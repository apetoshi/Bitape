(()=>{var e={};e.id=817,e.ids=[817],e.modules={2920:(e,t,n)=>{"use strict";n.d(t,{secp256k1:()=>ew});var r={};n.r(r),n.d(r,{aK:()=>j,e8:()=>f,DO:()=>d,dJ:()=>P,OG:()=>T,My:()=>m,Ph:()=>v,lX:()=>w,Id:()=>I,fg:()=>B,qj:()=>A,aT:()=>x,r4:()=>S,aY:()=>u,x:()=>k,lq:()=>N,z:()=>E,zW:()=>p,Q5:()=>F});var a=n(71814),i=n(82102),s=n(90113);let o=BigInt(0),l=BigInt(1),c=BigInt(2);function u(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function d(e){if(!u(e))throw Error("Uint8Array expected")}function f(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let h=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function m(e){d(e);let t="";for(let n=0;n<e.length;n++)t+=h[e[n]];return t}function p(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function g(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?o:BigInt("0x"+e)}let y={_0:48,_9:57,A:65,F:70,a:97,f:102};function b(e){return e>=y._0&&e<=y._9?e-y._0:e>=y.A&&e<=y.F?e-(y.A-10):e>=y.a&&e<=y.f?e-(y.a-10):void 0}function x(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let t=0,a=0;t<n;t++,a+=2){let n=b(e.charCodeAt(a)),i=b(e.charCodeAt(a+1));if(void 0===n||void 0===i)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);r[t]=16*n+i}return r}function v(e){return g(m(e))}function w(e){return d(e),g(m(Uint8Array.from(e).reverse()))}function N(e,t){return x(e.toString(16).padStart(2*t,"0"))}function E(e,t){return N(e,t).reverse()}function A(e,t,n){let r;if("string"==typeof t)try{r=x(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(u(t))r=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let a=r.length;if("number"==typeof n&&a!==n)throw Error(e+" of length "+n+" expected, got "+a);return r}function I(...e){let t=0;for(let n=0;n<e.length;n++){let r=e[n];d(r),t+=r.length}let n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){let a=e[t];n.set(a,r),r+=a.length}return n}let C=e=>"bigint"==typeof e&&o<=e;function S(e,t,n){return C(e)&&C(t)&&C(n)&&t<=e&&e<n}function j(e,t,n,r){if(!S(t,n,r))throw Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function P(e){let t;for(t=0;e>o;e>>=l,t+=1);return t}let T=e=>(c<<BigInt(e-1))-l,M=e=>new Uint8Array(e),R=e=>Uint8Array.from(e);function B(e,t,n){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof n)throw Error("hmacFn must be a function");let r=M(e),a=M(e),i=0,s=()=>{r.fill(1),a.fill(0),i=0},o=(...e)=>n(a,r,...e),l=(e=M())=>{a=o(R([0]),e),r=o(),0!==e.length&&(a=o(R([1]),e),r=o())},c=()=>{if(i++>=1e3)throw Error("drbg: tried 1000 values");let e=0,n=[];for(;e<t;){let t=(r=o()).slice();n.push(t),e+=r.length}return I(...n)};return(e,t)=>{let n;for(s(),l(e);!(n=t(c()));)l();return s(),n}}let O={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||u(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function F(e,t,n={}){let r=(t,n,r)=>{let a=O[n];if("function"!=typeof a)throw Error("invalid validator function");let i=e[t];if((!r||void 0!==i)&&!a(i,e))throw Error("param "+String(t)+" is invalid. Expected "+n+", got "+i)};for(let[e,n]of Object.entries(t))r(e,n,!1);for(let[e,t]of Object.entries(n))r(e,t,!0);return e}function k(e){let t=new WeakMap;return(n,...r)=>{let a=t.get(n);if(void 0!==a)return a;let i=e(n,...r);return t.set(n,i),i}}let L=BigInt(0),$=BigInt(1),_=BigInt(2),D=BigInt(3),q=BigInt(4),U=BigInt(5),G=BigInt(8);function H(e,t){let n=e%t;return n>=L?n:t+n}function z(e,t,n){let r=e;for(;t-- >L;)r*=r,r%=n;return r}function Q(e,t){if(e===L)throw Error("invert: expected non-zero number");if(t<=L)throw Error("invert: expected positive modulus, got "+t);let n=H(e,t),r=t,a=L,i=$,s=$,o=L;for(;n!==L;){let e=r/n,t=r%n,l=a-s*e,c=i-o*e;r=n,n=t,a=s,i=o,s=l,o=c}if(r!==$)throw Error("invert: does not exist");return H(a,t)}let W=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function K(e,t){let n=void 0!==t?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Y(e,t,n=!1,r={}){let a;if(e<=L)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:i,nByteLength:s}=K(e,t);if(s>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let o=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:s,MASK:T(i),ZERO:L,ONE:$,create:t=>H(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return L<=t&&t<e},is0:e=>e===L,isOdd:e=>(e&$)===$,neg:t=>H(-t,e),eql:(e,t)=>e===t,sqr:t=>H(t*t,e),add:(t,n)=>H(t+n,e),sub:(t,n)=>H(t-n,e),mul:(t,n)=>H(t*n,e),pow:(e,t)=>(function(e,t,n){if(n<L)throw Error("invalid exponent, negatives unsupported");if(n===L)return e.ONE;if(n===$)return t;let r=e.ONE,a=t;for(;n>L;)n&$&&(r=e.mul(r,a)),a=e.sqr(a),n>>=$;return r})(o,e,t),div:(t,n)=>H(t*Q(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Q(t,e),sqrt:r.sqrt||(t=>(a||(a=function(e){if(e%q===D){let t=(e+$)/q;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw Error("Cannot find square root");return r}}if(e%G===U){let t=(e-U)/G;return function(e,n){let r=e.mul(n,_),a=e.pow(r,t),i=e.mul(n,a),s=e.mul(e.mul(i,_),a),o=e.mul(i,e.sub(s,e.ONE));if(!e.eql(e.sqr(o),n))throw Error("Cannot find square root");return o}}return function(e){let t,n,r,a=(e-$)/_;for(t=e-$,n=0;t%_===L;t/=_,n++);for(r=_;r<e&&function(e,t,n){if(t<L)throw Error("invalid exponent, negatives unsupported");if(n<=L)throw Error("invalid modulus");if(n===$)return L;let r=$;for(;t>L;)t&$&&(r=r*e%n),e=e*e%n,t>>=$;return r}(r,a,e)!==e-$;r++)if(r>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===n){let t=(e+$)/q;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw Error("Cannot find square root");return r}}let i=(t+$)/_;return function(e,s){if(e.pow(s,a)===e.neg(e.ONE))throw Error("Cannot find square root");let o=n,l=e.pow(e.mul(e.ONE,r),t),c=e.pow(s,i),u=e.pow(s,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(u);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);let n=e.pow(l,$<<BigInt(o-t-1));l=e.sqr(n),c=e.mul(c,n),u=e.mul(u,l),o=t}return c}}(e)}(e)),a(o,t))),invertBatch:e=>(function(e,t){let n=Array(t.length),r=t.reduce((t,r,a)=>e.is0(r)?t:(n[a]=t,e.mul(t,r)),e.ONE),a=e.inv(r);return t.reduceRight((t,r,a)=>e.is0(r)?t:(n[a]=e.mul(t,n[a]),e.mul(t,r)),a),n})(o,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?E(e,s):N(e,s),fromBytes:e=>{if(e.length!==s)throw Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return n?w(e):v(e)}});return Object.freeze(o)}function X(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function V(e){let t=X(e);return t+Math.ceil(t/2)}let Z=BigInt(0),J=BigInt(1);function ee(e,t){let n=t.negate();return e?n:t}function et(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function en(e,t){return et(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}let er=new WeakMap,ea=new WeakMap;function ei(e){return ea.get(e)||1}function es(e){return F(e.Fp,W.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),F(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...K(e.n,e.nBitLength),...e,...{p:e.Fp.ORDER}})}function eo(e){void 0!==e.lowS&&f("lowS",e.lowS),void 0!==e.prehash&&f("prehash",e.prehash)}let{Ph:el,aT:ec}=r;class eu extends Error{constructor(e=""){super(e)}}let ed={Err:eu,_tlv:{encode:(e,t)=>{let{Err:n}=ed;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");let r=t.length/2,a=p(r);if(a.length/2&128)throw new n("tlv.encode: long form length too big");let i=r>127?p(a.length/2|128):"";return p(e)+i+a+t},decode(e,t){let{Err:n}=ed,r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");let a=t[r++],i=0;if(128&a){let e=127&a;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");let s=t.subarray(r,r+e);if(s.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===s[0])throw new n("tlv.decode(long): zero leftmost byte");for(let e of s)i=i<<8|e;if(r+=e,i<128)throw new n("tlv.decode(long): not minimal encoding")}else i=a;let s=t.subarray(r,r+i);if(s.length!==i)throw new n("tlv.decode: wrong value length");return{v:s,l:t.subarray(r+i)}}},_int:{encode(e){let{Err:t}=ed;if(e<ef)throw new t("integer: negative integers are not allowed");let n=p(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){let{Err:t}=ed;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return el(e)}},toSig(e){let{Err:t,_int:n,_tlv:r}=ed,a="string"==typeof e?ec(e):e;d(a);let{v:i,l:s}=r.decode(48,a);if(s.length)throw new t("invalid signature: left bytes after parsing");let{v:o,l:l}=r.decode(2,i),{v:c,l:u}=r.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(c)}},hexFromSig(e){let{_tlv:t,_int:n}=ed,r=t.encode(2,n.encode(e.r)),a=t.encode(2,n.encode(e.s));return t.encode(48,r+a)}},ef=BigInt(0),eh=BigInt(1),em=(BigInt(2),BigInt(3)),ep=(BigInt(4),BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f")),eg=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ey=BigInt(1),eb=BigInt(2),ex=(e,t)=>(e+t/eb)/t,ev=Y(ep,void 0,void 0,{sqrt:function(e){let t=BigInt(3),n=BigInt(6),r=BigInt(11),a=BigInt(22),i=BigInt(23),s=BigInt(44),o=BigInt(88),l=e*e*e%ep,c=l*l*e%ep,u=z(c,t,ep)*c%ep,d=z(u,t,ep)*c%ep,f=z(d,eb,ep)*l%ep,h=z(f,r,ep)*f%ep,m=z(h,a,ep)*h%ep,p=z(m,s,ep)*m%ep,g=z(p,o,ep)*p%ep,y=z(g,s,ep)*m%ep,b=z(y,t,ep)*c%ep,x=z(b,i,ep)*h%ep,v=z(x,n,ep)*l%ep,w=z(v,eb,ep);if(!ev.eql(ev.sqr(w),e))throw Error("Cannot find square root");return w}}),ew=function(e,t){let n=t=>(function(e){let t=function(e){let t=es(e);return F(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,a=n.BYTES+1,i=2*n.BYTES+1;function s(e){return H(e,r)}let{ProjectivePoint:o,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:d}=function(e){var t;let n=function(e){let t=es(e);F(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:n,Fp:r,a}=t;if(n){if(!r.eql(a,r.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=n,a=Y(n.n,n.nBitLength),i=n.toBytes||((e,t,n)=>{let a=t.toAffine();return I(Uint8Array.from([4]),r.toBytes(a.x),r.toBytes(a.y))}),s=n.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){let{a:t,b:a}=n,i=r.sqr(e),s=r.mul(i,e);return r.add(r.add(s,r.mul(e,t)),a)}if(!r.eql(r.sqr(n.Gy),o(n.Gx)))throw Error("bad generator point: equation left != right");function l(e){let t,{allowedPrivateKeyLengths:r,nByteLength:a,wrapPrivateKey:i,n:s}=n;if(r&&"bigint"!=typeof e){if(u(e)&&(e=m(e)),"string"!=typeof e||!r.includes(e.length))throw Error("invalid private key");e=e.padStart(2*a,"0")}try{t="bigint"==typeof e?e:v(A("private key",e,a))}catch(t){throw Error("invalid private key, expected hex or "+a+" bytes, got "+typeof e)}return i&&(t=H(t,s)),j("private key",t,eh,s),t}function c(e){if(!(e instanceof p))throw Error("ProjectivePoint expected")}let d=k((e,t)=>{let{px:n,py:a,pz:i}=e;if(r.eql(i,r.ONE))return{x:n,y:a};let s=e.is0();null==t&&(t=s?r.ONE:r.inv(i));let o=r.mul(n,t),l=r.mul(a,t),c=r.mul(i,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw Error("invZ was invalid");return{x:o,y:l}}),h=k(e=>{if(e.is0()){if(n.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:t,y:a}=e.toAffine();if(!r.isValid(t)||!r.isValid(a))throw Error("bad point: x or y not FE");let i=r.sqr(a),s=o(t);if(!r.eql(i,s))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class p{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof p)throw Error("projective point not allowed");let a=e=>r.eql(e,r.ZERO);return a(t)&&a(n)?p.ZERO:new p(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(p.fromAffine)}static fromHex(e){let t=p.fromAffine(s(A("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return p.BASE.multiply(l(e))}static msm(e,t){return function(e,t,n,r){if(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,n)=>{if(!(e instanceof t))throw Error("invalid point at index "+n)})}(n,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,n)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+n)})}(r,t),n.length!==r.length)throw Error("arrays of points and scalars must have equal length");let a=e.ZERO,i=P(BigInt(n.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,l=Array(o+1).fill(a),c=Math.floor((t.BITS-1)/s)*s,u=a;for(let e=c;e>=0;e-=s){l.fill(a);for(let t=0;t<r.length;t++){let a=Number(r[t]>>BigInt(e)&BigInt(o));l[a]=l[a].add(n[t])}let t=a;for(let e=l.length-1,n=a;e>0;e--)n=n.add(l[e]),t=t.add(n);if(u=u.add(t),0!==e)for(let e=0;e<s;e++)u=u.double()}return u}(p,a,e,t)}_setWindowSize(e){y.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){c(e);let{px:t,py:n,pz:a}=this,{px:i,py:s,pz:o}=e,l=r.eql(r.mul(t,o),r.mul(i,a)),u=r.eql(r.mul(n,o),r.mul(s,a));return l&&u}negate(){return new p(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:t}=n,a=r.mul(t,em),{px:i,py:s,pz:o}=this,l=r.ZERO,c=r.ZERO,u=r.ZERO,d=r.mul(i,i),f=r.mul(s,s),h=r.mul(o,o),m=r.mul(i,s);return m=r.add(m,m),u=r.mul(i,o),u=r.add(u,u),l=r.mul(e,u),c=r.mul(a,h),c=r.add(l,c),l=r.sub(f,c),c=r.add(f,c),c=r.mul(l,c),l=r.mul(m,l),u=r.mul(a,u),h=r.mul(e,h),m=r.sub(d,h),m=r.mul(e,m),m=r.add(m,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,h),d=r.mul(d,m),c=r.add(c,d),h=r.mul(s,o),h=r.add(h,h),d=r.mul(h,m),l=r.sub(l,d),u=r.mul(h,f),u=r.add(u,u),new p(l,c,u=r.add(u,u))}add(e){c(e);let{px:t,py:a,pz:i}=this,{px:s,py:o,pz:l}=e,u=r.ZERO,d=r.ZERO,f=r.ZERO,h=n.a,m=r.mul(n.b,em),g=r.mul(t,s),y=r.mul(a,o),b=r.mul(i,l),x=r.add(t,a),v=r.add(s,o);x=r.mul(x,v),v=r.add(g,y),x=r.sub(x,v),v=r.add(t,i);let w=r.add(s,l);return v=r.mul(v,w),w=r.add(g,b),v=r.sub(v,w),w=r.add(a,i),u=r.add(o,l),w=r.mul(w,u),u=r.add(y,b),w=r.sub(w,u),f=r.mul(h,v),u=r.mul(m,b),f=r.add(u,f),u=r.sub(y,f),f=r.add(y,f),d=r.mul(u,f),y=r.add(g,g),y=r.add(y,g),b=r.mul(h,b),v=r.mul(m,v),y=r.add(y,b),b=r.sub(g,b),b=r.mul(h,b),v=r.add(v,b),g=r.mul(y,v),d=r.add(d,g),g=r.mul(w,v),u=r.mul(x,u),u=r.sub(u,g),g=r.mul(x,y),f=r.mul(w,f),new p(u,d,f=r.add(f,g))}subtract(e){return this.add(e.negate())}is0(){return this.equals(p.ZERO)}wNAF(e){return y.wNAFCached(this,e,p.normalizeZ)}multiplyUnsafe(e){let{endo:t,n:a}=n;j("scalar",e,ef,a);let i=p.ZERO;if(e===ef)return i;if(this.is0()||e===eh)return this;if(!t||y.hasPrecomputes(this))return y.wNAFCachedUnsafe(this,e,p.normalizeZ);let{k1neg:s,k1:o,k2neg:l,k2:c}=t.splitScalar(e),u=i,d=i,f=this;for(;o>ef||c>ef;)o&eh&&(u=u.add(f)),c&eh&&(d=d.add(f)),f=f.double(),o>>=eh,c>>=eh;return s&&(u=u.negate()),l&&(d=d.negate()),d=new p(r.mul(d.px,t.beta),d.py,d.pz),u.add(d)}multiply(e){let t,a,{endo:i,n:s}=n;if(j("scalar",e,eh,s),i){let{k1neg:n,k1:s,k2neg:o,k2:l}=i.splitScalar(e),{p:c,f:u}=this.wNAF(s),{p:d,f:f}=this.wNAF(l);c=y.constTimeNegate(n,c),d=y.constTimeNegate(o,d),d=new p(r.mul(d.px,i.beta),d.py,d.pz),t=c.add(d),a=u.add(f)}else{let{p:n,f:r}=this.wNAF(e);t=n,a=r}return p.normalizeZ([t,a])[0]}multiplyAndAddUnsafe(e,t,n){let r=p.BASE,a=(e,t)=>t!==ef&&t!==eh&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=a(this,t).add(a(e,n));return i.is0()?void 0:i}toAffine(e){return d(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=n;if(e===eh)return!0;if(t)return t(p,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=n;return e===eh?this:t?t(p,this):this.multiplyUnsafe(n.h)}toRawBytes(e=!0){return f("isCompressed",e),this.assertValidity(),i(p,this,e)}toHex(e=!0){return f("isCompressed",e),m(this.toRawBytes(e))}}p.BASE=new p(n.Gx,n.Gy,r.ONE),p.ZERO=new p(r.ZERO,r.ONE,r.ZERO);let g=n.nBitLength,y=(t=n.endo?Math.ceil(g/2):g,{constTimeNegate:ee,hasPrecomputes:e=>1!==ei(e),unsafeLadder(e,t,n=p.ZERO){let r=e;for(;t>Z;)t&J&&(n=n.add(r)),r=r.double(),t>>=J;return n},precomputeWindow(e,n){let{windows:r,windowSize:a}=en(n,t),i=[],s=e,o=s;for(let e=0;e<r;e++){o=s,i.push(o);for(let e=1;e<a;e++)o=o.add(s),i.push(o);s=o.double()}return i},wNAF(e,n,r){let{windows:a,windowSize:i}=en(e,t),s=p.ZERO,o=p.BASE,l=BigInt(2**e-1),c=2**e,u=BigInt(e);for(let e=0;e<a;e++){let t=e*i,a=Number(r&l);r>>=u,a>i&&(a-=c,r+=J);let d=t+Math.abs(a)-1,f=e%2!=0,h=a<0;0===a?o=o.add(ee(f,n[t])):s=s.add(ee(h,n[d]))}return{p:s,f:o}},wNAFUnsafe(e,n,r,a=p.ZERO){let{windows:i,windowSize:s}=en(e,t),o=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let e=0;e<i;e++){let t=e*s;if(r===Z)break;let i=Number(r&o);if(r>>=c,i>s&&(i-=l,r+=J),0===i)continue;let u=n[t+Math.abs(i)-1];i<0&&(u=u.negate()),a=a.add(u)}return a},getPrecomputes(e,t,n){let r=er.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&er.set(t,n(r))),r},wNAFCached(e,t,n){let r=ei(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)},wNAFCachedUnsafe(e,t,n,r){let a=ei(e);return 1===a?this.unsafeLadder(e,t,r):this.wNAFUnsafe(a,this.getPrecomputes(a,e,n),t,r)},setWindowSize(e,n){et(n,t),ea.set(e,n),er.delete(e)}});return{CURVE:n,ProjectivePoint:p,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:function(e){return S(e,eh,n.n)}}}({...t,toBytes(e,t,r){let a=t.toAffine(),i=n.toBytes(a.x),s=I;return(f("isCompressed",r),r)?s(Uint8Array.from([t.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,n.toBytes(a.y))},fromBytes(e){let t=e.length,r=e[0],s=e.subarray(1);if(t===a&&(2===r||3===r)){let e,t=v(s);if(!S(t,eh,n.ORDER))throw Error("Point is not on curve");let a=c(t);try{e=n.sqrt(a)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&r)==1!=((e&eh)===eh)&&(e=n.neg(e)),{x:t,y:e}}if(t===i&&4===r)return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))};throw Error("invalid Point, expected length of "+a+", or uncompressed "+i+", got "+t)}}),h=e=>m(N(e,t.nByteLength)),p=(e,t,n)=>v(e.slice(t,n));class g{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){let n=t.nByteLength;return new g(p(e=A("compactSignature",e,2*n),0,n),p(e,n,2*n))}static fromDER(e){let{r:t,s:n}=ed.toSig(A("DER",e));return new g(t,n)}assertValidity(){j("r",this.r,eh,r),j("s",this.s,eh,r)}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){let{r:a,s:i,recovery:l}=this,c=C(A("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let u=2===l||3===l?a+t.n:a;if(u>=n.ORDER)throw Error("recovery id 2 or 3 invalid");let d=(1&l)==0?"02":"03",f=o.fromHex(d+h(u)),m=Q(u,r),p=s(-c*m),g=s(i*m),y=o.BASE.multiplyAndAddUnsafe(f,p,g);if(!y)throw Error("point at infinify");return y.assertValidity(),y}hasHighS(){return this.s>r>>eh}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return x(this.toDERHex())}toDERHex(){return ed.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return x(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}function y(e){let t=u(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===a||r===i:n?r===2*a||r===2*i:e instanceof o}let b=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let n=v(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},C=t.bits2int_modN||function(e){return s(b(e))},M=T(t.nBitLength);function R(e){return j("num < 2^"+t.nBitLength,e,ef,M),N(e,t.nByteLength)}let O={lowS:t.lowS,prehash:!1},L={lowS:t.lowS,prehash:!1};return o.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return o.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(y(e))throw Error("first arg must be private key");if(!y(t))throw Error("second arg must be public key");return o.fromHex(t).multiply(l(e)).toRawBytes(n)},sign:function(e,a,i=O){let{seed:c,k2sig:u}=function(e,a,i=O){if(["recovered","canonical"].some(e=>e in i))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:u}=t,{lowS:f,prehash:h,extraEntropy:m}=i;null==f&&(f=!0),e=A("msgHash",e),eo(i),h&&(e=A("prehashed msgHash",c(e)));let p=C(e),y=l(a),x=[R(y),R(p)];if(null!=m&&!1!==m){let e=!0===m?u(n.BYTES):m;x.push(A("extraEntropy",e))}return{seed:I(...x),k2sig:function(e){var t;let n=b(e);if(!d(n))return;let a=Q(n,r),i=o.BASE.multiply(n).toAffine(),l=s(i.x);if(l===ef)return;let c=s(a*s(p+l*y));if(c===ef)return;let u=2*(i.x!==l)|Number(i.y&eh),h=c;return f&&c>r>>eh&&(h=(t=c)>r>>eh?s(-t):t,u^=1),new g(l,h,u)}}}(e,a,i);return B(t.hash.outputLen,t.nByteLength,t.hmac)(c,u)},verify:function(e,n,a,i=L){let l,c;n=A("msgHash",n),a=A("publicKey",a);let{lowS:d,prehash:f,format:h}=i;if(eo(i),"strict"in i)throw Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw Error("format must be compact or der");let m="string"==typeof e||u(e),p=!m&&!h&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!m&&!p)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(p&&(c=new g(e.r,e.s)),m){try{"compact"!==h&&(c=g.fromDER(e))}catch(e){if(!(e instanceof ed.Err))throw e}c||"der"===h||(c=g.fromCompact(e))}l=o.fromHex(a)}catch(e){return!1}if(!c||d&&c.hasHighS())return!1;f&&(n=t.hash(n));let{r:y,s:b}=c,x=C(n),v=Q(b,r),w=s(x*v),N=s(y*v),E=o.BASE.multiplyAndAddUnsafe(l,w,N)?.toAffine();return!!E&&s(E.x)===y},ProjectivePoint:o,Signature:g,utils:{isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=V(t.n);return function(e,t,n=!1){let r=e.length,a=X(t),i=V(t);if(r<16||r<i||r>1024)throw Error("expected "+i+"-1024 bytes of input, got "+r);let s=H(n?w(e):v(e),t-$)+$;return n?E(s,a):N(s,a)}(t.randomBytes(e),t.n)},precompute:(e=8,t=o.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,...{hash:t,hmac:(e,...n)=>(0,i.w)(t,e,(0,s.Id)(...n)),randomBytes:s.po}});return{...n(t),create:n}}({a:BigInt(0),b:BigInt(7),Fp:ev,n:eg,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ey*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=BigInt("0x100000000000000000000000000000000"),i=ex(t*e,eg),s=ex(-n*e,eg),o=H(e-i*t-s*r,eg),l=H(-i*n-s*t,eg),c=o>a,u=l>a;if(c&&(o=eg-o),u&&(l=eg-l),o>a||l>a)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:o,k2neg:u,k2:l}}}},a.sc),eN=(BigInt(0),{}),eE=e=>e.toRawBytes(!0).slice(1),eA=e=>mod(e,eg),eI=ew.ProjectivePoint},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5215:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>s.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>f,tree:()=>c});var r=n(65239),a=n(48088),i=n(88170),s=n.n(i),o=n(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);n.d(t,l);let c={children:["",{children:["room",{children:["[address]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,58813)),"/Users/alexalaniz/Downloads/bitape-ui/src/app/room/[address]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,94431)),"/Users/alexalaniz/Downloads/bitape-ui/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(n.t.bind(n,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(n.t.bind(n,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,u=["/Users/alexalaniz/Downloads/bitape-ui/src/app/room/[address]/page.tsx"],d={require:n,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/room/[address]/page",pathname:"/room/[address]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6957:(e,t,n)=>{Promise.resolve().then(n.bind(n,58813))},8086:e=>{"use strict";e.exports=require("module")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11117:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,s){if("function"!=typeof r)throw TypeError("The listener must be a function");var o=new a(r,i||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,i=r.length,s=Array(i);a<i;a++)s[a]=r[a].fn;return s},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,a,i,s){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,a),!0;case 5:return u.fn.call(u.context,t,r,a,i),!0;case 6:return u.fn.call(u.context,t,r,a,i,s),!0}for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var f,h=u.length;for(c=0;c<h;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,a);break;default:if(!l)for(f=1,l=Array(d-1);f<d;f++)l[f-1]=arguments[f];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,a){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||a&&!o.once||r&&o.context!==r||s(this,i);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||a&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},11997:e=>{"use strict";e.exports=require("punycode")},12412:e=>{"use strict";e.exports=require("assert")},15076:(e,t,n)=>{"use strict";let r,a;n.r(t),n.d(t,{default:()=>sH});var i,s,o=n(60687),l=n(43210),c=n.t(l,2),u=n(30474),d=n(85814),f=n.n(d),h=n(16189),m=n(18038),p=n(31628),g=n(54050),y=n(20629),b=n(83117);class x extends b.C{constructor({docsPath:e}={}){super("Could not find an Account to execute with this Action.\nPlease provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client.",{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class v extends b.C{constructor({docsPath:e,metaMessages:t,type:n}){super(`Account type "${n}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}}var w=n(38639),N=n(36438),E=n(53304),A=n(6141),I=n(48340),C=n(35106),S=n(523),j=n(45548);async function P({hash:e,signature:t}){let r=(0,C.q)(e)?e:(0,j.nj)(e),{secp256k1:a}=await Promise.resolve().then(n.bind(n,2920)),i=(()=>{if("object"==typeof t&&"r"in t&&"s"in t){let{r:e,s:n,v:r,yParity:i}=t,s=T(Number(i??r));return new a.Signature((0,S.uU)(e),(0,S.uU)(n)).addRecoveryBit(s)}let e=(0,C.q)(t)?t:(0,j.nj)(t),n=T((0,S.ME)(`0x${e.slice(130)}`));return a.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(n)})().recoverPublicKey(r.substring(2)).toHex(!1);return`0x${i}`}function T(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw Error("Invalid yParityOrV value")}async function M({hash:e,signature:t}){var n=await P({hash:e,signature:t});let r=(0,I.S)(`0x${n.substring(4)}`).substring(26);return(0,A.o)(`0x${r}`)}var R=n(32419),B=n(72914),O=n(37378);function F(e){if(e<256)return 1;if(e<65536)return 2;if(e<0x1000000)return 3;if(e<0x100000000)return 4;throw new b.C("Length is too large.")}async function k(e){let{authorization:t,signature:n}=e;return M({hash:function(e){let{chainId:t,nonce:n,to:r}=e,a=e.contractAddress??e.address,i=(0,I.S)((0,R.aP)(["0x05",function(e,t="hex"){let n=function e(t){return Array.isArray(t)?function(e){let t=e.reduce((e,t)=>e+t.length,0),n=F(t);return{length:t<=55?1+t:1+n+t,encode(r){for(let{encode:a}of(t<=55?r.pushByte(192+t):(r.pushByte(247+n),1===n?r.pushUint8(t):2===n?r.pushUint16(t):3===n?r.pushUint24(t):r.pushUint32(t)),e))a(r)}}}(t.map(t=>e(t))):function(e){let t="string"==typeof e?(0,B.aT)(e):e,n=F(t.length);return{length:1===t.length&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(e){1===t.length&&t[0]<128||(t.length<=55?e.pushByte(128+t.length):(e.pushByte(183+n),1===n?e.pushUint8(t.length):2===n?e.pushUint16(t.length):3===n?e.pushUint24(t.length):e.pushUint32(t.length))),e.pushBytes(t)}}}(t)}(e),r=(0,O.l)(new Uint8Array(n.length));return(n.encode(r),"hex"===t)?(0,j.My)(r.bytes):r.bytes}([t?(0,j.cK)(t):"0x",a,n?(0,j.cK)(n):"0x"])]));return"bytes"===r?(0,B.aT)(i):i}(t),signature:n??t})}var L=n(27399),$=n(18060),_=n(74974),D=n(63016),q=n(28169),U=n(15543),G=n(56079),H=n(85453);async function z(e){let t=await e.request({method:"eth_chainId"},{dedupe:!0});return(0,S.ME)(t)}var Q=n(1430);class W extends b.C{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class K extends b.C{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Y extends b.C{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${(0,Q.Q)(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class X extends b.C{constructor({blockHash:e,blockNumber:t}){let n="Block";e&&(n=`Block at hash "${e}"`),t&&(n=`Block at number "${t}"`),super(`${n} could not be found.`,{name:"BlockNotFoundError"})}}let V={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Z(e){let t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?(0,S.ME)(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?(0,S.ME)(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?V[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=e.authorizationList.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof t.v){if(0n===t.v||27n===t.v)return 0;if(1n===t.v||28n===t.v)return 1;if(t.v>=35n)return+(t.v%2n===0n)}})(),"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),"eip2930"===t.type&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),"eip1559"===t.type&&delete t.maxFeePerBlobGas,t}function J(e){let t=(e.transactions??[]).map(e=>"string"==typeof e?e:Z(e));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function ee(e,{blockHash:t,blockNumber:n,blockTag:r,includeTransactions:a}={}){let i=a??!1,s=void 0!==n?(0,j.cK)(n):void 0,o=null;if(!(o=t?await e.request({method:"eth_getBlockByHash",params:[t,i]},{dedupe:!0}):await e.request({method:"eth_getBlockByNumber",params:[s||(r??"latest"),i]},{dedupe:!!s})))throw new X({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||J)(o)}async function et(e){return BigInt(await e.request({method:"eth_gasPrice"}))}async function en(e,t){return er(e,t)}async function er(e,t){let{block:n,chain:r=e.chain,request:a}=t||{};try{let t=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if("function"==typeof t){let r=n||await (0,E.T)(e,ee,"getBlock")({}),i=await t({block:r,client:e,request:a});if(null===i)throw Error();return i}if(void 0!==t)return t;let i=await e.request({method:"eth_maxPriorityFeePerGas"});return(0,S.uU)(i)}catch{let[t,r]=await Promise.all([n?Promise.resolve(n):(0,E.T)(e,ee,"getBlock")({}),(0,E.T)(e,et,"getGasPrice")({})]);if("bigint"!=typeof t.baseFeePerGas)throw new K;let a=r-t.baseFeePerGas;if(a<0n)return 0n;return a}}async function ea(e,t){return ei(e,t)}async function ei(e,t){let{block:n,chain:r=e.chain,request:a,type:i="eip1559"}=t||{},s=await (async()=>"function"==typeof r?.fees?.baseFeeMultiplier?r.fees.baseFeeMultiplier({block:n,client:e,request:a}):r?.fees?.baseFeeMultiplier??1.2)();if(s<1)throw new W;let o=s.toString().split(".")[1]?.length??0,l=10**o,c=e=>e*BigInt(Math.ceil(s*l))/BigInt(l),u=n||await (0,E.T)(e,ee,"getBlock")({});if("function"==typeof r?.fees?.estimateFeesPerGas){let t=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:c,request:a,type:i});if(null!==t)return t}if("eip1559"===i){if("bigint"!=typeof u.baseFeePerGas)throw new K;let t="bigint"==typeof a?.maxPriorityFeePerGas?a.maxPriorityFeePerGas:await er(e,{block:u,chain:r,request:a}),n=c(u.baseFeePerGas);return{maxFeePerGas:a?.maxFeePerGas??n+t,maxPriorityFeePerGas:t}}return{gasPrice:a?.gasPrice??c(await (0,E.T)(e,et,"getGasPrice")({}))}}var es=n(44056);class eo extends b.C{constructor(e,{account:t,docsPath:n,chain:r,data:a,gas:i,gasPrice:s,maxFeePerGas:o,maxPriorityFeePerGas:l,nonce:c,to:u,value:d}){super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",(0,_.aO)({from:t?.address,to:u,value:void 0!==d&&`${(0,es.c)(d)} ${r?.nativeCurrency?.symbol||"ETH"}`,data:a,gas:i,gasPrice:void 0!==s&&`${(0,Q.Q)(s)} gwei`,maxFeePerGas:void 0!==o&&`${(0,Q.Q)(o)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${(0,Q.Q)(l)} gwei`,nonce:c})].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}var el=n(52611),ec=n(60234);async function eu(e,t){let{account:n=e.account}=t,r=n?(0,y.J)(n):void 0;try{let{accessList:n,authorizationList:i,blobs:s,blobVersionedHashes:o,blockNumber:l,blockTag:c,data:u,gas:d,gasPrice:f,maxFeePerBlobGas:h,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:g,value:y,stateOverride:x,...v}=await ev(e,{...t,parameters:r?.type==="local"?void 0:["blobVersionedHashes"]}),w=(l?(0,j.cK)(l):void 0)||c,N=(0,el.yH)(x),E=await (async()=>v.to?v.to:i&&i.length>0?await k({authorization:i[0]}).catch(()=>{throw new b.C("`to` is required. Could not infer from `authorizationList`")}):void 0)();(0,H.c)(t);let A=e.chain?.formatters?.transactionRequest?.format,I=(A||U.Bv)({...(0,q.o)(v,{format:A}),from:r?.address,accessList:n,authorizationList:i,blobs:s,blobVersionedHashes:o,data:u,gas:d,gasPrice:f,maxFeePerBlobGas:h,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:g,to:E,value:y});function a(t){let{block:n,request:r,rpcStateOverride:a}=t;return e.request({method:"eth_estimateGas",params:a?[r,n??"latest",a]:n?[r,n]:[r]})}let C=BigInt(await a({block:w,request:I,rpcStateOverride:N}));if(i){let t=await (0,ec.r)(e,{address:I.from}),n=await Promise.all(i.map(async e=>{let{address:n}=e,i=await a({block:w,request:{authorizationList:void 0,data:u,from:r?.address,to:n,value:(0,j.cK)(t)},rpcStateOverride:N}).catch(()=>100000n);return 2n*BigInt(i)}));C+=n.reduce((e,t)=>e+t,0n)}return C}catch(n){throw function(e,{docsPath:t,...n}){return new eo((()=>{let t=(0,D.l)(e,n);return t instanceof $.RM?e:t})(),{docsPath:t,...n})}(n,{...t,account:r,chain:e.chain})}}async function ed(e,{address:t,blockTag:n="latest",blockNumber:r}){let a=await e.request({method:"eth_getTransactionCount",params:[t,r?(0,j.cK)(r):n]},{dedupe:!!r});return(0,S.ME)(a)}function ef(e){let{kzg:t}=e,n=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),r="string"==typeof e.blobs[0]?e.blobs.map(e=>(0,B.aT)(e)):e.blobs,a=[];for(let e of r)a.push(Uint8Array.from(t.blobToKzgCommitment(e)));return"bytes"===n?a:a.map(e=>(0,j.My)(e))}function eh(e){let{kzg:t}=e,n=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),r="string"==typeof e.blobs[0]?e.blobs.map(e=>(0,B.aT)(e)):e.blobs,a="string"==typeof e.commitments[0]?e.commitments.map(e=>(0,B.aT)(e)):e.commitments,i=[];for(let e=0;e<r.length;e++){let n=r[e],s=a[e];i.push(Uint8Array.from(t.computeBlobKzgProof(n,s)))}return"bytes"===n?i:i.map(e=>(0,j.My)(e))}var em=n(71814);class ep extends b.C{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}}class eg extends b.C{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}b.C,b.C;var ey=n(80934);let eb=["blobVersionedHashes","chainId","fees","gas","nonce","type"],ex=new Map;async function ev(e,t){let n,r,{account:a=e.account,blobs:i,chain:s,gas:o,kzg:l,nonce:c,nonceManager:u,parameters:d=eb,type:f}=t,h=a?(0,y.J)(a):a,m={...t,...h?{from:h?.address}:{}};async function p(){return n||(n=await (0,E.T)(e,ee,"getBlock")({blockTag:"latest"}))}async function g(){return r||(s?s.id:void 0!==t.chainId?t.chainId:r=await (0,E.T)(e,z,"getChainId")({}))}if(d.includes("nonce")&&void 0===c&&h)if(u){let t=await g();m.nonce=await u.consume({address:h.address,chainId:t,client:e})}else m.nonce=await (0,E.T)(e,ed,"getTransactionCount")({address:h.address,blockTag:"pending"});if((d.includes("blobVersionedHashes")||d.includes("sidecars"))&&i&&l){let e=ef({blobs:i,kzg:l});if(d.includes("blobVersionedHashes")&&(m.blobVersionedHashes=function(e){let{commitments:t,version:n}=e,r=e.to??("string"==typeof t[0]?"hex":"bytes"),a=[];for(let e of t)a.push(function(e){let{commitment:t,version:n=1}=e,r=e.to??("string"==typeof t?"hex":"bytes"),a=function(e,t){let n=(0,em.sc)((0,C.q)(e,{strict:!1})?(0,B.ZJ)(e):e);return"bytes"===(t||"hex")?n:(0,j.nj)(n)}(t,"bytes");return a.set([n],0),"bytes"===r?a:(0,j.My)(a)}({commitment:e,to:r,version:n}));return a}({commitments:e,to:"hex"})),d.includes("sidecars")){let t=eh({blobs:i,commitments:e,kzg:l});m.sidecars=function(e){let{data:t,kzg:n,to:r}=e,a=e.blobs??function(e){let t=e.to??("string"==typeof e.data?"hex":"bytes"),n="string"==typeof e.data?(0,B.aT)(e.data):e.data,r=(0,ey.E)(n);if(!r)throw new eg;if(r>761855)throw new ep({maxSize:761855,size:r});let a=[],i=!0,s=0;for(;i;){let e=(0,O.l)(new Uint8Array(131072)),t=0;for(;t<4096;){let r=n.slice(s,s+31);if(e.pushByte(0),e.pushBytes(r),r.length<31){e.pushByte(128),i=!1;break}t++,s+=31}a.push(e)}return"bytes"===t?a.map(e=>e.bytes):a.map(e=>(0,j.My)(e.bytes))}({data:t,to:r}),i=e.commitments??ef({blobs:a,kzg:n,to:r}),s=e.proofs??eh({blobs:a,commitments:i,kzg:n,to:r}),o=[];for(let e=0;e<a.length;e++)o.push({blob:a[e],commitment:i[e],proof:s[e]});return o}({blobs:i,commitments:e,proofs:t,to:"hex"})}}if(d.includes("chainId")&&(m.chainId=await g()),(d.includes("fees")||d.includes("type"))&&void 0===f)try{m.type=function(e){if(e.type)return e.type;if(void 0!==e.authorizationList)return"eip7702";if(void 0!==e.blobs||void 0!==e.blobVersionedHashes||void 0!==e.maxFeePerBlobGas||void 0!==e.sidecars)return"eip4844";if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new _.Vg({transaction:e})}(m)}catch{let t=ex.get(e.uid);if(void 0===t){let n=await p();t="bigint"==typeof n?.baseFeePerGas,ex.set(e.uid,t)}m.type=t?"eip1559":"legacy"}if(d.includes("fees"))if("legacy"!==m.type&&"eip2930"!==m.type){if(void 0===m.maxFeePerGas||void 0===m.maxPriorityFeePerGas){let n=await p(),{maxFeePerGas:r,maxPriorityFeePerGas:a}=await ei(e,{block:n,chain:s,request:m});if(void 0===t.maxPriorityFeePerGas&&t.maxFeePerGas&&t.maxFeePerGas<a)throw new Y({maxPriorityFeePerGas:a});m.maxPriorityFeePerGas=a,m.maxFeePerGas=r}}else{if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)throw new K;if(void 0===t.gasPrice){let t=await p(),{gasPrice:n}=await ei(e,{block:t,chain:s,request:m,type:"legacy"});m.gasPrice=n}}return d.includes("gas")&&void 0===o&&(m.gas=await (0,E.T)(e,eu,"estimateGas")({...m,account:h?{address:h.address,type:"json-rpc"}:h})),(0,H.c)(m),delete m.parameters,m}async function ew(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}let eN=new G.A(128);async function eE(e,t){let{account:n=e.account,chain:r=e.chain,accessList:a,authorizationList:i,blobs:s,data:o,gas:l,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,value:m,...p}=t;if(void 0===n)throw new x({docsPath:"/docs/actions/wallet/sendTransaction"});let g=n?(0,y.J)(n):null;try{(0,H.c)(t);let n=await (async()=>t.to?t.to:null!==t.to&&i&&i.length>0?await k({authorization:i[0]}).catch(()=>{throw new b.C("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if(g?.type==="json-rpc"||null===g){let t;null!==r&&(t=await (0,E.T)(e,z,"getChainId")({}),function({chain:e,currentChainId:t}){if(!e)throw new L.jF;if(t!==e.id)throw new L.EH({chain:e,currentChainId:t})}({currentChainId:t,chain:r}));let y=e.chain?.formatters?.transactionRequest?.format,b=(y||U.Bv)({...(0,q.o)(p,{format:y}),accessList:a,authorizationList:i,blobs:s,chainId:t,data:o,from:g?.address,gas:l,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,to:n,value:m}),x=eN.get(e.uid);try{return await e.request({method:x?"wallet_sendTransaction":"eth_sendTransaction",params:[b]},{retryCount:0})}catch(t){if(!1===x)throw t;if("InvalidInputRpcError"===t.name||"InvalidParamsRpcError"===t.name||"MethodNotFoundRpcError"===t.name||"MethodNotSupportedRpcError"===t.name)return await e.request({method:"wallet_sendTransaction",params:[b]},{retryCount:0}).then(t=>(eN.set(e.uid,!0),t)).catch(n=>{if("MethodNotFoundRpcError"===n.name||"MethodNotSupportedRpcError"===n.name)throw eN.set(e.uid,!1),t;throw n});throw t}}if(g?.type==="local"){let t=await (0,E.T)(e,ev,"prepareTransactionRequest")({account:g,accessList:a,authorizationList:i,blobs:s,chain:r,data:o,gas:l,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,nonceManager:g.nonceManager,parameters:[...eb,"sidecars"],value:m,...p,to:n}),y=r?.serializers?.transaction,b=await g.signTransaction(t,{serializer:y});return await (0,E.T)(e,ew,"sendRawTransaction")({serializedTransaction:b})}if(g?.type==="smart")throw new v({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new v({docsPath:"/docs/actions/wallet/sendTransaction",type:g?.type})}catch(e){if(e instanceof v)throw e;throw function(e,{docsPath:t,...n}){let r=(()=>{let t=(0,D.l)(e,n);return t instanceof $.RM?e:t})();return new _.$s(r,{docsPath:t,...n})}(e,{...t,account:g,chain:t.chain||void 0})}}async function eA(e,t){let{abi:n,account:r=e.account,address:a,args:i,dataSuffix:s,functionName:o,...l}=t;if(void 0===r)throw new x({docsPath:"/docs/contract/writeContract"});let c=r?(0,y.J)(r):null,u=(0,w.p)({abi:n,args:i,functionName:o});try{return await (0,E.T)(e,eE,"sendTransaction")({data:`${u}${s?s.replace("0x",""):""}`,to:a,account:c,...l})}catch(e){throw(0,N.j)(e,{abi:n,address:a,args:i,docsPath:"/docs/contract/writeContract",functionName:o,sender:c?.address})}}var eI=n(62844);let eC=256;function eS(e=11){if(!r||eC+e>512){r="",eC=0;for(let e=0;e<256;e++)r+=(256+256*Math.random()|0).toString(16).substring(1)}return r.substring(eC,eC+++e)}var ej=n(18683),eP=n(67221);let eT=new G.A(8192);async function eM(e){return new Promise(t=>setTimeout(t,e))}function eR(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((a,i)=>{let s=async({count:o=0}={})=>{let l=async({error:e})=>{let n="function"==typeof t?t({count:o,error:e}):t;n&&await eM(n),s({count:o+1})};try{let t=await e();a(t)}catch(e){if(o<n&&await r({count:o,error:e}))return l({error:e});i(e)}};s()})}var eB=n(83599);function eO({key:e,methods:t,name:n,request:r,retryCount:a=3,retryDelay:i=150,timeout:s,type:o},l){return{config:{key:e,methods:t,name:n,request:r,retryCount:a,retryDelay:i,timeout:s,type:o},request:function(e,t={}){return async(n,r={})=>{let{dedupe:a=!1,methods:i,retryDelay:s=150,retryCount:o=3,uid:l}={...t,...r},{method:c}=n;if(i?.exclude?.includes(c)||i?.include&&!i.include.includes(c))throw new eP.ab(Error("method not supported"),{method:c});let u=a?(0,j.i3)(`${l}.${(0,eB.A)(n)}`):void 0;return function(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(eT.get(n))return eT.get(n);let r=e().finally(()=>eT.delete(n));return eT.set(n,r),r}(()=>eR(async()=>{try{return await e(n)}catch(e){switch(e.code){case eP.XU.code:throw new eP.XU(e);case eP.CL.code:throw new eP.CL(e);case eP.Gi.code:throw new eP.Gi(e,{method:n.method});case eP.D5.code:throw new eP.D5(e);case eP.bq.code:throw new eP.bq(e);case eP.Di.code:throw new eP.Di(e);case eP.hA.code:throw new eP.hA(e);case eP.qZ.code:throw new eP.qZ(e);case eP.YW.code:throw new eP.YW(e);case eP.ab.code:throw new eP.ab(e,{method:n.method});case eP.s0.code:throw new eP.s0(e);case eP.xQ.code:throw new eP.xQ(e);case eP.vx.code:throw new eP.vx(e);case eP.sV.code:throw new eP.sV(e);case eP.Sf.code:throw new eP.Sf(e);case eP.RV.code:throw new eP.RV(e);case eP.xq.code:throw new eP.xq(e);case eP.ch.code:throw new eP.ch(e);case 5e3:throw new eP.vx(e);default:if(e instanceof b.C)throw e;throw new eP.MI(e)}}},{delay:({count:e,error:t})=>{if(t&&t instanceof ej.Ci){let e=t?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*Number.parseInt(e)}return~~(1<<e)*s},retryCount:o,shouldRetry:({error:e})=>{var t;return"code"in(t=e)&&"number"==typeof t.code?-1===t.code||t.code===eP.s0.code||t.code===eP.bq.code:!(t instanceof ej.Ci)||!t.status||403===t.status||408===t.status||413===t.status||429===t.status||500===t.status||502===t.status||503===t.status||504===t.status||!1}}),{enabled:a,id:u})}}(r,{methods:t,retryCount:a,retryDelay:i,uid:eS()}),value:l}}var eF=n(93895);class ek extends eF.C{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}eF.C;class eL extends eF.C{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}eF.C;class e$ extends eF.C{constructor({address:e,connector:t}){super(`Account "${e}" not found for connector "${t.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class e_ extends eF.C{constructor({connectionChainId:e,connectorChainId:t}){super(`The current chain of the connector (id: ${t}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class eD extends eF.C{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:"During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`. All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored. This error commonly occurs for connectors that asynchronously inject after reconnection has already started."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function eq(e,t={}){let n;if(t.connector){let{connector:r}=t;if("reconnecting"===e.state.status&&!r.getAccounts&&!r.getChainId)throw new eD({connector:r});let[a,i]=await Promise.all([r.getAccounts().catch(e=>{if(null===t.account)return[];throw e}),r.getChainId()]);n={accounts:a,chainId:i,connector:r}}else n=e.state.connections.get(e.state.current);if(!n)throw new eL;let r=t.chainId??n.chainId,a=await n.connector.getChainId();if(a!==n.chainId)throw new e_({connectionChainId:n.chainId,connectorChainId:a});let i=n.connector;if(i.getClient)return i.getClient({chainId:r});let s=(0,y.J)(t.account??n.accounts[0]);if(s&&(s.address=(0,A.b)(s.address)),t.account&&!n.accounts.some(e=>e.toLowerCase()===s.address.toLowerCase()))throw new e$({address:s.address,connector:i});let o=e.chains.find(e=>e.id===r),l=await n.connector.getProvider({chainId:r});return function(e){let{batch:t,cacheTime:n=e.pollingInterval??4e3,ccipRead:r,key:a="base",name:i="Base Client",pollingInterval:s=4e3,type:o="base"}=e,l=e.chain,c=e.account?(0,y.J)(e.account):void 0,{config:u,request:d,value:f}=e.transport({chain:l,pollingInterval:s}),h={account:c,batch:t,cacheTime:n,ccipRead:r,chain:l,key:a,name:i,pollingInterval:s,request:d,transport:{...u,...f},type:o,uid:eS()};return Object.assign(h,{extend:function e(t){return n=>{let r=n(t);for(let e in h)delete r[e];let a={...t,...r};return Object.assign(a,{extend:e(a)})}}(h)})}({account:s,chain:o,name:"Connector Client",transport:e=>(function(e,t={}){let{key:n="custom",methods:r,name:a="Custom Provider",retryDelay:i}=t;return({retryCount:s})=>eO({key:n,methods:r,name:a,request:e.request.bind(e),retryCount:t.retryCount??s,retryDelay:i,type:"custom"})})(l)({...e,retryCount:0})})}async function eU(e,t){let n,{account:r,chainId:a,connector:i,...s}=t;n="object"==typeof r&&r?.type==="local"?e.getClient({chainId:a}):await eq(e,{account:r??void 0,chainId:a,connector:i});let o=(0,eI.T)(n,eA,"writeContract");return await o({...s,...r?{account:r}:{},chain:a?{id:a}:null})}var eG=n(42139);function eH(e={}){var t;let{mutation:n}=e,r=(t=(0,eG.U)(e),{mutationFn:e=>eU(t,e),mutationKey:["writeContract"]}),{mutate:a,mutateAsync:i,...s}=(0,g.n)({...n,...r});return{...s,writeContract:a,writeContractAsync:i}}var ez=n(73711),eQ=n(73008),eW=n(98901),eK=n(64751),eY=n(56625),eX=n(47430);function eV(e,t){if(!(e instanceof b.C))return!1;let n=e.walk(e=>e instanceof eX.M);return n instanceof eX.M&&(!!(n.data?.errorName==="ResolverNotFound"||n.data?.errorName==="ResolverWildcardNotSupported"||n.data?.errorName==="ResolverNotContract"||n.data?.errorName==="ResolverError"||n.data?.errorName==="HttpError"||n.reason?.includes("Wildcard on non-extended resolvers is not supported"))||"reverse"===t&&n.reason===eY.fD[50])}function eZ(e){if(66!==e.length||0!==e.indexOf("[")||65!==e.indexOf("]"))return null;let t=`0x${e.slice(1,65)}`;return(0,C.q)(t)?t:null}function eJ(e){let t=new Uint8Array(32).fill(0);if(!e)return(0,j.My)(t);let n=e.split(".");for(let e=n.length-1;e>=0;e-=1){let r=eZ(n[e]),a=r?(0,B.ZJ)(r):(0,I.S)((0,B.Af)(n[e]),"bytes");t=(0,I.S)((0,R.xW)([t,a]),"bytes")}return(0,j.My)(t)}function e0(e){let t=e.replace(/^\.|\.$/gm,"");if(0===t.length)return new Uint8Array(1);let n=new Uint8Array((0,B.Af)(t).byteLength+2),r=0,a=t.split(".");for(let e=0;e<a.length;e++){var i;let t=(0,B.Af)(a[e]);t.byteLength>255&&(t=(0,B.Af)((i=function(e){let t=new Uint8Array(32).fill(0);return e?eZ(e)||(0,I.S)((0,B.Af)(e)):(0,j.My)(t)}(a[e]),`[${i.slice(2)}]`))),n[r]=t.length,n.set(t,r+1),r+=t.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}var e1=n(98200);async function e2(e,t){let{blockNumber:n,blockTag:r,coinType:a,name:i,gatewayUrls:s,strict:o}=t,{chain:l}=e,c=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!l)throw Error("client chain not configured. universalResolverAddress is required.");return(0,eW.M)({blockNumber:n,chain:l,contract:"ensUniversalResolver"})})(),u=l?.ensTlds;if(u&&!u.some(e=>i.endsWith(e)))return null;try{let t=(0,w.p)({abi:ez.Rm,functionName:"addr",...null!=a?{args:[eJ(i),BigInt(a)]}:{args:[eJ(i)]}}),o={address:c,abi:ez.Ag,functionName:"resolve",args:[(0,j.nj)(e0(i)),t],blockNumber:n,blockTag:r},l=(0,E.T)(e,e1.J,"readContract"),u=s?await l({...o,args:[...o.args,s]}):await l(o);if("0x"===u[0])return null;let d=(0,eQ.e)({abi:ez.Rm,args:null!=a?[eJ(i),BigInt(a)]:void 0,functionName:"addr",data:u[0]});if("0x"===d||"0x00"===(0,eK.B)(d))return null;return d}catch(e){if(o)throw e;if(eV(e,"resolve"))return null;throw e}}class e5 extends b.C{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class e6 extends b.C{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class e3 extends b.C{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class e4 extends b.C{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}let e8=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,e9=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,e7=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,te=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function tt(e){try{let t=await fetch(e,{method:"HEAD"});if(200===t.status){let e=t.headers.get("content-type");return e?.startsWith("image/")}return!1}catch(t){if("object"==typeof t&&void 0!==t.response||!globalThis.hasOwnProperty("Image"))return!1;return new Promise(t=>{let n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=e})}}function tn(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function tr({uri:e,gatewayUrls:t}){let n=e7.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};let r=tn(t?.ipfs,"https://ipfs.io"),a=tn(t?.arweave,"https://arweave.net"),i=e.match(e8),{protocol:s,subpath:o,target:l,subtarget:c=""}=i?.groups||{},u="ipns:/"===s||"ipns/"===o,d="ipfs:/"===s||"ipfs/"===o||e9.test(e);if(e.startsWith("http")&&!u&&!d){let n=e;return t?.arweave&&(n=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:n,isOnChain:!1,isEncoded:!1}}if((u||d)&&l)return{uri:`${r}/${u?"ipns":"ipfs"}/${l}${c}`,isOnChain:!1,isEncoded:!1};if("ar:/"===s&&l)return{uri:`${a}/${l}${c||""}`,isOnChain:!1,isEncoded:!1};let f=e.replace(te,"");if(f.startsWith("<svg")&&(f=`data:image/svg+xml;base64,${btoa(f)}`),f.startsWith("data:")||f.startsWith("{"))return{uri:f,isOnChain:!0,isEncoded:!1};throw new e3({uri:e})}function ta(e){if("object"!=typeof e||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new e5({data:e});return e.image||e.image_url||e.image_data}async function ti({gatewayUrls:e,uri:t}){try{let n=await fetch(t).then(e=>e.json());return await ts({gatewayUrls:e,uri:ta(n)})}catch{throw new e3({uri:t})}}async function ts({gatewayUrls:e,uri:t}){let{uri:n,isOnChain:r}=tr({uri:t,gatewayUrls:e});if(r||await tt(n))return n;throw new e3({uri:t})}async function to(e,{nft:t}){if("erc721"===t.namespace)return(0,e1.J)(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if("erc1155"===t.namespace)return(0,e1.J)(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new e4({namespace:t.namespace})}async function tl(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?tc(e,{gatewayUrls:t,record:n}):ts({uri:n,gatewayUrls:t})}async function tc(e,{gatewayUrls:t,record:n}){let r=function(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));let[n,r,a]=t.split("/"),[i,s]=n.split(":"),[o,l]=r.split(":");if(!i||"eip155"!==i.toLowerCase())throw new e6({reason:"Only EIP-155 supported"});if(!s)throw new e6({reason:"Chain ID not found"});if(!l)throw new e6({reason:"Contract address not found"});if(!a)throw new e6({reason:"Token ID not found"});if(!o)throw new e6({reason:"ERC namespace not found"});return{chainID:Number.parseInt(s),namespace:o.toLowerCase(),contractAddress:l,tokenID:a}}(n),{uri:a,isOnChain:i,isEncoded:s}=tr({uri:await to(e,{nft:r}),gatewayUrls:t});if(i&&(a.includes("data:application/json;base64,")||a.startsWith("{")))return ts({uri:ta(JSON.parse(s?atob(a.replace("data:application/json;base64,","")):a)),gatewayUrls:t});let o=r.tokenID;return"erc1155"===r.namespace&&(o=o.replace("0x","").padStart(64,"0")),ti({gatewayUrls:t,uri:a.replace(/(?:0x)?{id}/,o)})}async function tu(e,t){let{blockNumber:n,blockTag:r,key:a,name:i,gatewayUrls:s,strict:o}=t,{chain:l}=e,c=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!l)throw Error("client chain not configured. universalResolverAddress is required.");return(0,eW.M)({blockNumber:n,chain:l,contract:"ensUniversalResolver"})})(),u=l?.ensTlds;if(u&&!u.some(e=>i.endsWith(e)))return null;try{let t={address:c,abi:ez.Ag,functionName:"resolve",args:[(0,j.nj)(e0(i)),(0,w.p)({abi:ez.SJ,functionName:"text",args:[eJ(i),a]})],blockNumber:n,blockTag:r},o=(0,E.T)(e,e1.J,"readContract"),l=s?await o({...t,args:[...t.args,s]}):await o(t);if("0x"===l[0])return null;let u=(0,eQ.e)({abi:ez.SJ,functionName:"text",data:l[0]});return""===u?null:u}catch(e){if(o)throw e;if(eV(e,"resolve"))return null;throw e}}async function td(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:a,gatewayUrls:i,strict:s,universalResolverAddress:o}){let l=await (0,E.T)(e,tu,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:a,universalResolverAddress:o,gatewayUrls:i,strict:s});if(!l)return null;try{return await tl(e,{record:l,gatewayUrls:r})}catch{return null}}async function tf(e,{address:t,blockNumber:n,blockTag:r,gatewayUrls:a,strict:i,universalResolverAddress:s}){let o=s;if(!o){if(!e.chain)throw Error("client chain not configured. universalResolverAddress is required.");o=(0,eW.M)({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}let l=`${t.toLowerCase().substring(2)}.addr.reverse`;try{let i={address:o,abi:ez.oX,functionName:"reverse",args:[(0,j.nj)(e0(l))],blockNumber:n,blockTag:r},s=(0,E.T)(e,e1.J,"readContract"),[c,u]=a?await s({...i,args:[...i.args,a]}):await s(i);if(t.toLowerCase()!==u.toLowerCase())return null;return c}catch(e){if(i)throw e;if(eV(e,"reverse"))return null;throw e}}async function th(e,t){let{blockNumber:n,blockTag:r,name:a}=t,{chain:i}=e,s=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!i)throw Error("client chain not configured. universalResolverAddress is required.");return(0,eW.M)({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),o=i?.ensTlds;if(o&&!o.some(e=>a.endsWith(e)))throw Error(`${a} is not a valid ENS TLD (${o?.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);let[l]=await (0,E.T)(e,e1.J,"readContract")({address:s,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,j.nj)(e0(a))],blockNumber:n,blockTag:r});return l}var tm=n(8959),tp=n(14392);async function tg(e,t){let{account:n=e.account,blockNumber:r,blockTag:a="latest",blobs:i,data:s,gas:o,gasPrice:l,maxFeePerBlobGas:c,maxFeePerGas:u,maxPriorityFeePerGas:d,to:f,value:h,...m}=t,p=n?(0,y.J)(n):void 0;try{(0,H.c)(t);let n=r?(0,j.cK)(r):void 0,g=e.chain?.formatters?.transactionRequest?.format,y=(g||U.Bv)({...(0,q.o)(m,{format:g}),from:p?.address,blobs:i,data:s,gas:o,gasPrice:l,maxFeePerBlobGas:c,maxFeePerGas:u,maxPriorityFeePerGas:d,to:f,value:h}),b=await e.request({method:"eth_createAccessList",params:[y,n||a]});return{accessList:b.accessList,gasUsed:BigInt(b.gasUsed)}}catch(n){throw(0,tp.d)(n,{...t,account:p,chain:e.chain})}}function ty(e,{method:t}){let n={};return"fallback"===e.transport.type&&e.transport.onResponse?.(({method:e,response:r,status:a,transport:i})=>{"success"===a&&t===e&&(n[r]=i.request)}),t=>n[t]||e.request}async function tb(e){let t=ty(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}var tx=n(84536);class tv extends b.C{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}var tw=n(55005),tN=n(17099),tE=n(82975),tA=n(45306);let tI="/docs/contract/encodeEventTopics";function tC(e){let{abi:t,eventName:n,args:r}=e,a=t[0];if(n){let e=(0,tA.iY)({abi:t,name:n});if(!e)throw new tx.M_(n,{docsPath:tI});a=e}if("event"!==a.type)throw new tx.M_(void 0,{docsPath:tI});let i=(0,tE.B)(a),s=(0,tw.h)(i),o=[];if(r&&"inputs"in a){let e=a.inputs?.filter(e=>"indexed"in e&&e.indexed),t=Array.isArray(r)?r:Object.values(r).length>0?e?.map(e=>r[e.name])??[]:[];t.length>0&&(o=e?.map((e,n)=>Array.isArray(t[n])?t[n].map((r,a)=>tS({param:e,value:t[n][a]})):void 0!==t[n]&&null!==t[n]?tS({param:e,value:t[n]}):null)??[])}return[s,...o]}function tS({param:e,value:t}){if("string"===e.type||"bytes"===e.type)return(0,I.S)((0,B.ZJ)(t));if("tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))throw new tv(e.type);return(0,tN.h)([e],[t])}async function tj(e,t){let{address:n,abi:r,args:a,eventName:i,fromBlock:s,strict:o,toBlock:l}=t,c=ty(e,{method:"eth_newFilter"}),u=i?tC({abi:r,args:a,eventName:i}):void 0,d=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:"bigint"==typeof s?(0,j.cK)(s):s,toBlock:"bigint"==typeof l?(0,j.cK)(l):l,topics:u}]});return{abi:r,args:a,eventName:i,id:d,request:c(d),strict:!!o,type:"event"}}async function tP(e,{address:t,args:n,event:r,events:a,fromBlock:i,strict:s,toBlock:o}={}){let l=a??(r?[r]:void 0),c=ty(e,{method:"eth_newFilter"}),u=[];l&&(u=[l.flatMap(e=>tC({abi:[e],eventName:e.name,args:n}))],r&&(u=u[0]));let d=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof i?(0,j.cK)(i):i,toBlock:"bigint"==typeof o?(0,j.cK)(o):o,...u.length?{topics:u}:{}}]});return{abi:l,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:c(d),strict:!!s,toBlock:o,type:"event"}}async function tT(e){let t=ty(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function tM(e,t){let{abi:n,address:r,args:a,functionName:i,dataSuffix:s,...o}=t,l=(0,w.p)({abi:n,args:a,functionName:i});try{return await (0,E.T)(e,eu,"estimateGas")({data:`${l}${s?s.replace("0x",""):""}`,to:r,...o})}catch(t){let e=o.account?(0,y.J)(o.account):void 0;throw(0,N.j)(t,{abi:n,address:r,args:a,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:e?.address})}}async function tR(e){return BigInt(await e.request({method:"eth_blobBaseFee"}))}let tB=new Map,tO=new Map;async function tF(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){let r=function(e){let t=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:n=>t.set(e,n)}),n=t(e,tB),r=t(e,tO);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}(t),a=r.response.get();if(a&&n>0&&new Date().getTime()-a.created.getTime()<n)return a.data;let i=r.promise.get();i||(i=e(),r.promise.set(i));try{let e=await i;return r.response.set({created:new Date,data:e}),e}finally{r.promise.clear()}}let tk=e=>`blockNumber.${e}`;async function tL(e,{cacheTime:t=e.cacheTime}={}){return BigInt(await tF(()=>e.request({method:"eth_blockNumber"}),{cacheKey:tk(e.uid),cacheTime:t}))}async function t$(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){let a,i=void 0!==n?(0,j.cK)(n):void 0;return a=t?await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):await e.request({method:"eth_getBlockTransactionCountByNumber",params:[i||r]},{dedupe:!!i}),(0,S.ME)(a)}async function t_(e,{address:t,blockNumber:n,blockTag:r="latest"}){let a=void 0!==n?(0,j.cK)(n):void 0,i=await e.request({method:"eth_getCode",params:[t,a||r]},{dedupe:!!a});if("0x"!==i)return i}var tD=n(90425),tq=n(31866),tU=n(35643);let tG="/docs/contract/decodeEventLog";function tH(e){let{abi:t,data:n,strict:r,topics:a}=e,i=r??!0,[s,...o]=a;if(!s)throw new tx._z({docsPath:tG});let l=1===t.length?t[0]:t.find(e=>"event"===e.type&&s===(0,tw.h)((0,tE.B)(e)));if(!(l&&"name"in l)||"event"!==l.type)throw new tx.kE(s,{docsPath:tG});let{name:c,inputs:u}=l,d=u?.some(e=>!("name"in e&&e.name)),f=d?[]:{},h=u.filter(e=>"indexed"in e&&e.indexed);for(let e=0;e<h.length;e++){let t=h[e],n=o[e];if(!n)throw new tx.l3({abiItem:l,param:t});f[d?e:t.name||e]=function({param:e,value:t}){return"string"===e.type||"bytes"===e.type||"tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/)?t:((0,tU.n)([e],t)||[])[0]}({param:t,value:n})}let m=u.filter(e=>!("indexed"in e&&e.indexed));if(m.length>0){if(n&&"0x"!==n)try{let e=(0,tU.n)(m,n);if(e)if(d)f=[...f,...e];else for(let t=0;t<m.length;t++)f[m[t].name]=e[t]}catch(e){if(i){if(e instanceof tx.Iy||e instanceof tq.SK)throw new tx.fo({abiItem:l,data:n,params:m,size:(0,ey.E)(n)});throw e}}else if(i)throw new tx.fo({abiItem:l,data:"0x",params:m,size:0})}return{eventName:c,args:Object.values(f).length>0?f:void 0}}function tz(e){let{abi:t,args:n,logs:r,strict:a=!0}=e,i=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(e=>{try{let r=t.find(t=>"event"===t.type&&e.topics[0]===(0,tw.h)(t));if(!r)return null;let s=tH({...e,abi:[r],strict:a});if(i&&!i.includes(s.eventName)||!function(e){let{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function a(e,t,n){try{if("address"===e.type)return(0,tD.h)(t,n);if("string"===e.type||"bytes"===e.type)return(0,I.S)((0,B.ZJ)(t))===n;return t===n}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((e,r)=>{if(null==e)return!0;let i=n[r];return!!i&&(Array.isArray(e)?e:[e]).some(e=>a(i,e,t[r]))}):!("object"!=typeof t||Array.isArray(t)||"object"!=typeof r||Array.isArray(r))&&Object.entries(r).every(([e,r])=>{if(null==r)return!0;let i=n.find(t=>t.name===e);return!!i&&(Array.isArray(r)?r:[r]).some(n=>a(i,n,t[e]))})}({args:s.args,inputs:r.inputs,matchArgs:n}))return null;return{...s,...e}}catch(r){let t,n;if(r instanceof tx.kE)return null;if(r instanceof tx.fo||r instanceof tx.l3){if(a)return null;t=r.abiItem.name,n=r.abiItem.inputs?.some(e=>!("name"in e&&e.name))}return{...e,args:n?[]:{},eventName:t}}}).filter(Boolean)}function tQ(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function tW(e,{address:t,blockHash:n,fromBlock:r,toBlock:a,event:i,events:s,args:o,strict:l}={}){let c,u=s??(i?[i]:void 0),d=[];u&&(d=[u.flatMap(e=>tC({abi:[e],eventName:e.name,args:s?void 0:o}))],i&&(d=d[0]));let f=(n?await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:"bigint"==typeof r?(0,j.cK)(r):r,toBlock:"bigint"==typeof a?(0,j.cK)(a):a}]})).map(e=>tQ(e));return u?tz({abi:u,args:o,logs:f,strict:l??!1}):f}async function tK(e,t){let{abi:n,address:r,args:a,blockHash:i,eventName:s,fromBlock:o,toBlock:l,strict:c}=t,u=s?(0,tA.iY)({abi:n,name:s}):void 0,d=u?void 0:n.filter(e=>"event"===e.type);return(0,E.T)(e,tW,"getLogs")({address:r,args:a,blockHash:i,event:u,events:d,fromBlock:o,toBlock:l,strict:c})}class tY extends b.C{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function tX(e,t){let{address:n,factory:r,factoryData:a}=t;try{let[t,i,s,o,l,c,u]=await (0,E.T)(e,e1.J,"readContract")({abi:tV,address:n,functionName:"eip712Domain",factory:r,factoryData:a});return{domain:{name:i,version:s,chainId:Number(o),verifyingContract:l,salt:c},extensions:u,fields:t}}catch(e){if("ContractFunctionExecutionError"===e.name&&"ContractFunctionZeroDataError"===e.cause.name)throw new tY({address:n});throw e}}let tV=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];async function tZ(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:a}){var i;let s=n?(0,j.cK)(n):void 0;return{baseFeePerGas:(i=await e.request({method:"eth_feeHistory",params:[(0,j.cK)(t),s||r,a]},{dedupe:!!s})).baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:i.gasUsedRatio,oldestBlock:BigInt(i.oldestBlock),reward:i.reward?.map(e=>e.map(e=>BigInt(e)))}}async function tJ(e,{filter:t}){let n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if("string"==typeof r[0])return r;let a=r.map(e=>tQ(e));return"abi"in t&&t.abi?tz({abi:t.abi,logs:a,strict:n}):a}async function t0(e,{filter:t}){let n=t.strict??!1,r=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(e=>tQ(e));return t.abi?tz({abi:t.abi,logs:r,strict:n}):r}async function t1(e,{address:t,blockNumber:n,blockTag:r,storageKeys:a}){let i=void 0!==n?(0,j.cK)(n):void 0;var s=await e.request({method:"eth_getProof",params:[t,a,i||(r??"latest")]});return{...s,balance:s.balance?BigInt(s.balance):void 0,nonce:s.nonce?(0,S.ME)(s.nonce):void 0,storageProof:s.storageProof?s.storageProof.map(e=>({...e,value:BigInt(e.value)})):void 0}}async function t2(e,{address:t,blockNumber:n,blockTag:r="latest",slot:a}){let i=void 0!==n?(0,j.cK)(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,a,i||r]})}async function t5(e,{blockHash:t,blockNumber:n,blockTag:r,hash:a,index:i}){let s=r||"latest",o=void 0!==n?(0,j.cK)(n):void 0,l=null;if(a?l=await e.request({method:"eth_getTransactionByHash",params:[a]},{dedupe:!0}):t?l=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,(0,j.cK)(i)]},{dedupe:!0}):(o||s)&&(l=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[o||s,(0,j.cK)(i)]},{dedupe:!!o})),!l)throw new _.Kz({blockHash:t,blockNumber:n,blockTag:s,hash:a,index:i});return(e.chain?.formatters?.transaction?.format||Z)(l)}async function t6(e,{hash:t,transactionReceipt:n}){let[r,a]=await Promise.all([(0,E.T)(e,tL,"getBlockNumber")({}),t?(0,E.T)(e,t5,"getTransaction")({hash:t}):void 0]),i=n?.blockNumber||a?.blockNumber;return i?r-i+1n:0n}let t3={"0x0":"reverted","0x1":"success"};async function t4(e,{hash:t}){let n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new _.Kc({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||function(e){let t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(e=>tQ(e)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?(0,S.ME)(e.transactionIndex):null,status:e.status?t3[e.status]:null,type:e.type?V[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t})(n)}var t8=n(42513);class t9 extends Error{constructor(e,t={}){let n=(()=>{if(t.cause instanceof t9){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause?.message?t.cause.message:t.details})(),r=t.cause instanceof t9&&t.cause.docsPath||t.docsPath,a=`https://oxlib.sh${r??""}`;super([e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...n||r?["",n?`Details: ${n}`:void 0,r?`See: ${a}`:void 0]:[]].filter(e=>"string"==typeof e).join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"ox@0.1.1"}),this.cause=t.cause,this.details=n,this.docs=a,this.docsPath=r,this.shortMessage=e}walk(e){return function e(t,n){return n?.(t)?t:t&&"object"==typeof t&&"cause"in t&&t.cause?e(t.cause,n):n?null:t}(this,e)}}function t7(e,t,n){return JSON.stringify(e,(e,n)=>"function"==typeof t?t(e,n):"bigint"==typeof n?n.toString()+"#__bigint":n,n)}function ne(e,t){if(nf(e)>t)throw new ng({givenSize:nf(e),maxSize:t})}function nt(e,t={}){let{dir:n,size:r=32}=t;if(0===r)return e;let a=e.replace("0x","");if(a.length>2*r)throw new nb({size:Math.ceil(a.length/2),targetSize:r,type:"Hex"});return`0x${a["right"===n?"padEnd":"padStart"](2*r,"0")}`}let nn=new TextEncoder,nr=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function na(...e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}function ni(e,t={}){let n=`0x${Number(e)}`;return"number"==typeof t.size?(ne(n,t.size),nc(n,t.size)):n}function ns(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=nr[e[t]];let r=`0x${n}`;return"number"==typeof t.size?(ne(r,t.size),nu(r,t.size)):r}function no(e,t={}){let n,{signed:r,size:a}=t,i=BigInt(e);a?n=r?(1n<<8n*BigInt(a)-1n)-1n:2n**(8n*BigInt(a))-1n:"number"==typeof e&&(n=BigInt(Number.MAX_SAFE_INTEGER));let s="bigint"==typeof n&&r?-n-1n:0;if(n&&i>n||i<s){let t="bigint"==typeof e?"n":"";throw new nh({max:n?`${n}${t}`:void 0,min:`${s}${t}`,signed:r,size:a,value:`${e}${t}`})}let o=(r&&i<0?(1n<<BigInt(8*a))+BigInt(i):i).toString(16),l=`0x${o}`;return a?nc(l,a):l}function nl(e,t={}){return ns(nn.encode(e),t)}function nc(e,t){return nt(e,{dir:"left",size:t})}function nu(e,t){return nt(e,{dir:"right",size:t})}function nd(e,t,n,r={}){let{strict:a}=r;if("number"==typeof t&&t>0&&t>nf(e)-1)throw new ny({offset:t,position:"start",size:nf(e)});let i=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return a&&function(e,t,n){if("number"==typeof t&&"number"==typeof n&&nf(e)!==n-t)throw new ny({offset:n,position:"end",size:nf(e)})}(i,t,n),i}function nf(e){return Math.ceil((e.length-2)/2)}class nh extends t9{constructor({max:e,min:t,signed:n,size:r,value:a}){super(`Number \`${a}\` is not in safe${r?` ${8*r}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class nm extends t9{constructor(e){super(`Value \`${"object"==typeof e?t7(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class np extends t9{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class ng extends t9{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class ny extends t9{constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class nb extends t9{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function nx(e){return{address:e.address,amount:no(e.amount),index:no(e.index),validatorIndex:no(e.validatorIndex)}}async function nv(e,t){let{blockNumber:n,blockTag:r="latest",blocks:a,returnFullTransactions:i,traceTransfers:s,validation:o}=t;try{let t=[];for(let e of a){var l;let n=e.blockOverrides?(l=e.blockOverrides,{..."bigint"==typeof l.baseFeePerGas&&{baseFeePerGas:no(l.baseFeePerGas)},..."bigint"==typeof l.blobBaseFee&&{blobBaseFee:no(l.blobBaseFee)},..."string"==typeof l.feeRecipient&&{feeRecipient:l.feeRecipient},..."bigint"==typeof l.gasLimit&&{gasLimit:no(l.gasLimit)},..."bigint"==typeof l.number&&{number:no(l.number)},..."bigint"==typeof l.prevRandao&&{prevRandao:no(l.prevRandao)},..."bigint"==typeof l.time&&{time:no(l.time)},...l.withdrawals&&{withdrawals:l.withdrawals.map(nx)}}):void 0,r=e.calls.map(e=>{let t=e.account?(0,y.J)(e.account):void 0,n={...e,data:e.abi?(0,w.p)(e):e.data,from:e.from??t?.address};return(0,H.c)(n),(0,U.Bv)(n)}),a=e.stateOverrides?(0,el.yH)(e.stateOverrides):void 0;t.push({blockOverrides:n,calls:r,stateOverrides:a})}let c=n?(0,j.cK)(n):void 0;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:t,returnFullTransactions:i,traceTransfers:s,validation:o},c||r]})).map((e,t)=>({...J(e),calls:e.calls.map((e,n)=>{let{abi:r,args:i,functionName:s,to:o}=a[t].calls[n],l=e.error?.data??e.returnData,c=BigInt(e.gasUsed),u=e.logs?.map(e=>tQ(e)),d="0x1"===e.status?"success":"failure",f=r&&"success"===d&&"0x"!==l?(0,eQ.e)({abi:r,data:l,functionName:s}):null,h=(()=>{let t;if("success"!==d&&(e.error?.data==="0x"?t=new tx.O:e.error&&(t=new eX.$S(e.error)),t))return(0,N.j)(t,{abi:r??[],address:o,args:i,functionName:s??"<unknown>"})})();return{data:l,gasUsed:c,logs:u,status:d,..."success"===d?{result:f}:{error:h}}})}))}catch(t){let e=(0,D.l)(t,{});if(e instanceof $.RM)throw t;throw e}}var nw=n(35303),nN=n(71680),nE=n(57804),nA=n(54991),nI=n(88648),nC=n(66308);let nS={zero:48,nine:57,A:65,F:70,a:97,f:102};function nj(e){return e>=nS.zero&&e<=nS.nine?e-nS.zero:e>=nS.A&&e<=nS.F?e-(nS.A-10):e>=nS.a&&e<=nS.f?e-(nS.a-10):void 0}let nP=new TextEncoder;class nT extends t9{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class nM extends t9{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function nR(e,t={}){var n;let{as:r="string"==typeof e?"Hex":"Bytes"}=t,a=(0,nC.lY)(e instanceof Uint8Array?e:"string"==typeof e?function(e,t={}){let{size:n}=t,r=e;n&&(ne(e,n),r=nu(e,n));let a=r.slice(2);a.length%2&&(a=`0${a}`);let i=a.length/2,s=new Uint8Array(i);for(let e=0,t=0;e<i;e++){let n=nj(a.charCodeAt(t++)),r=nj(a.charCodeAt(t++));if(void 0===n||void 0===r)throw new t9(`Invalid byte sequence ("${a[t-2]}${a[t-1]}" in "${a}").`);s[e]=16*n+r}return s}(e):(n=e)instanceof Uint8Array?n:new Uint8Array(n));return"Bytes"===r?a:ns(a)}class nB extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=this.keys().next().value;e&&this.delete(e)}return this}}let nO={checksum:new nB(8192)}.checksum,nF=/^0x[a-fA-F0-9]{40}$/;function nk(e,t={}){let{strict:n=!0}=t;if(!nF.test(e))throw new n$({address:e,cause:new n_});if(n){if(e.toLowerCase()===e)return;if(function(e){if(nO.has(e))return nO.get(e);nk(e,{strict:!1});let t=e.substring(2).toLowerCase(),n=nR(function(e,t={}){let{size:n}=t,r=nP.encode(e);if("number"==typeof n){var a;if(r.length>n)throw new nT({givenSize:r.length,maxSize:n});return a=r,function(e,t={}){let{dir:n,size:r=32}=t;if(0===r)return e;if(e.length>r)throw new nM({size:e.length,targetSize:r,type:"Bytes"});let a=new Uint8Array(r);for(let t=0;t<r;t++){let i="right"===n;a[i?t:r-t-1]=e[i?t:e.length-t-1]}return a}(a,{dir:"right",size:n})}return r}(t),{as:"Bytes"}),r=t.split("");for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&r[e]&&(r[e]=r[e].toUpperCase()),(15&n[e>>1])>=8&&r[e+1]&&(r[e+1]=r[e+1].toUpperCase());let a=`0x${r.join("")}`;return nO.set(e,a),a}(e)!==e)throw new n$({address:e,cause:new nD})}}function nL(e,t={}){let{strict:n=!0}=t??{};try{return nk(e,{strict:n}),!0}catch{return!1}}class n$ extends t9{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class n_ extends t9{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class nD extends t9{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function nq(e){let t=!0,n="",r=0,a="",i=!1;for(let s=0;s<e.length;s++){let o=e[s];if(["(",")",","].includes(o)&&(t=!0),"("===o&&r++,")"===o&&r--,t){if(0===r){if(" "===o&&["event","function","error",""].includes(a))a="";else if(a+=o,")"===o){i=!0;break}continue}if(" "===o){","!==e[s-1]&&","!==n&&",("!==n&&(n="",t=!1);continue}a+=o,n+=o}}if(!i)throw new t9("Unable to normalize signature.");return a}function nU(e,t={}){let{prepare:n=!0}=t,r=Array.isArray(e)||"string"==typeof e?function(e){let t;if("string"==typeof e)t=(0,nA.uT)(e);else{let n=(0,nE.e)(e),r=e.length;for(let a=0;a<r;a++){let r=e[a];if(!(0,nN.WL)(r)){t=(0,nA.uT)(r,n);break}}}if(!t)throw new nw.xo({signature:e});return t}(e):e;return{...r,...n?{hash:nH(r)}:{}}}function nG(e){return nd(nH(e),0,4)}function nH(e){return"string"!=typeof e&&"hash"in e&&e.hash?e.hash:nR(nl(nq("string"==typeof e?e:nI.B(e))))}class nz extends t9{constructor(e,t){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${nq(nI.B(e.abiItem))}\`, and`,`\`${t.type}\` in \`${nq(nI.B(t.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class nQ extends t9{constructor({name:e,data:t,type:n="item"}){super(`ABI ${n}${e?` with name "${e}"`:t?` with data "${t}"`:""} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}var nW=n(68050);let nK=/^(.*)\[([0-9]*)\]$/,nY=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,nX=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function nV(e){let t=0;for(let n=0;n<e.length;n++){let{dynamic:r,encoded:a}=e[n];r?t+=32:t+=nf(a)}let n=[],r=[],a=0;for(let i=0;i<e.length;i++){let{dynamic:s,encoded:o}=e[i];s?(n.push(no(t+a,{size:32})),r.push(o),a+=nf(o)):n.push(o)}return na(...n,...r)}function nZ(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function nJ(e){let{type:t}=e;if("string"===t||"bytes"===t||t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(nJ);let n=nZ(e.type);return!!(n&&nJ({...e,type:n[1]}))}function n0(e,t,n){let{checksumAddress:r=!1}=n??{};if(e.length!==t.length)throw new n6({expectedLength:e.length,givenLength:t.length});let a=nV(function({checksumAddress:e,parameters:t,values:n}){let r=[];for(let a=0;a<t.length;a++)r.push(function e({checksumAddress:t=!1,parameter:n,value:r}){let a=nZ(n.type);if(a){let[i,s]=a;return function(t,n){let{checksumAddress:r,length:a,parameter:i}=n,s=null===a;if(!Array.isArray(t))throw new n3(t);if(!s&&t.length!==a)throw new n2({expectedLength:a,givenLength:t.length,type:`${i.type}[${a}]`});let o=!1,l=[];for(let n=0;n<t.length;n++){let a=e({checksumAddress:r,parameter:i,value:t[n]});a.dynamic&&(o=!0),l.push(a)}if(s||o){let e=nV(l);if(s){let t=no(l.length,{size:32});return{dynamic:!0,encoded:l.length>0?na(t,e):t}}if(o)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:na(...l.map(({encoded:e})=>e))}}(r,{checksumAddress:t,length:i,parameter:{...n,type:s}})}if("tuple"===n.type)return function(t,n){let{checksumAddress:r,parameter:a}=n,i=!1,s=[];for(let n=0;n<a.components.length;n++){let o=a.components[n],l=Array.isArray(t)?n:o.name,c=e({checksumAddress:r,parameter:o,value:t[l]});s.push(c),c.dynamic&&(i=!0)}return{dynamic:i,encoded:i?nV(s):na(...s.map(({encoded:e})=>e))}}(r,{checksumAddress:t,parameter:n});if("address"===n.type){var i=r,s={checksum:t};let{checksum:e=!1}=s;return nk(i,{strict:e}),{dynamic:!1,encoded:nc(i.toLowerCase())}}if("bool"===n.type){var o=r;if("boolean"!=typeof o)throw new t9(`Invalid boolean value: "${o}" (type: ${typeof o}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:nc(ni(o))}}if(n.type.startsWith("uint")||n.type.startsWith("int")){let e=n.type.startsWith("int"),[,,t="256"]=nX.exec(n.type)??[];return function(e,{signed:t,size:n}){if("number"==typeof n){let r=2n**(BigInt(n)-(t?1n:0n))-1n,a=t?-r-1n:0n;if(e>r||e<a)throw new nh({max:r.toString(),min:a.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:no(e,{size:32,signed:t})}}(r,{signed:e,size:Number(t)})}if(n.type.startsWith("bytes"))return function(e,{type:t}){let[,n]=t.split("bytes"),r=nf(e);if(!n){let t=e;return r%32!=0&&(t=nu(t,32*Math.ceil((e.length-2)/2/32))),{dynamic:!0,encoded:na(nc(no(r,{size:32})),t)}}if(r!==Number.parseInt(n))throw new n5({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:nu(e)}}(r,{type:n.type});if("string"===n.type){var l=r;let e=nl(l),t=Math.ceil(nf(e)/32),n=[];for(let r=0;r<t;r++)n.push(nu(nd(e,32*r,(r+1)*32)));return{dynamic:!0,encoded:na(nu(no(nf(e),{size:32})),...n)}}throw new n4(n.type)}({checksumAddress:e,parameter:t[a],value:n[a]}));return r}({checksumAddress:r,parameters:e,values:t}));return 0===a.length?"0x":a}function n1(e,t){if(e.length!==t.length)throw new n6({expectedLength:e.length,givenLength:t.length});let n=[];for(let r=0;r<e.length;r++){let a=e[r],i=t[r];n.push(n1.encode(a,i))}return na(...n)}(n1||(n1={})).encode=function e(t,n,r=!1){if("address"===t)return nk(n),nc(n.toLowerCase(),32*!!r);if("string"===t)return nl(n);if("bytes"===t)return n;if("bool"===t)return nc(ni(n),r?32:1);let a=t.match(nX);if(a){let[e,t,i="256"]=a,s=Number.parseInt(i)/8;return no(n,{size:r?32:s,signed:"int"===t})}let i=t.match(nY);if(i){let[e,t]=i;if(Number.parseInt(t)!==(n.length-2)/2)throw new n5({expectedSize:Number.parseInt(t),value:n});return nu(n,32*!!r)}let s=t.match(nK);if(s&&Array.isArray(n)){let[t,r]=s,a=[];for(let t=0;t<n.length;t++)a.push(e(r,n[t],!0));return 0===a.length?"0x":na(...a)}throw new n4(t)};class n2 extends t9{constructor({expectedLength:e,givenLength:t,type:n}){super(`Array length mismatch for type \`${n}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class n5 extends t9{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${nf(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class n6 extends t9{constructor({expectedLength:e,givenLength:t}){super(`ABI encoding parameters/values length mismatch.
Expected length (parameters): ${e}
Given length (values): ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class n3 extends t9{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class n4 extends t9{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function n8(e,t={}){return nU(e,t)}let n9="0x0000000000000000000000000000000000000000";var n7=n(73877);async function re(e,t){let{blockNumber:n,blockTag:r,calls:a,stateOverrides:i,traceAssetChanges:s,traceTransfers:o,validation:l}=t,c=t.account?(0,y.J)(t.account):void 0;if(s&&!c)throw new b.C("`account` is required when `traceAssetChanges` is true");let u=c?function(e,t){let{bytecode:n,args:r}=t;return na(n,e.inputs?.length&&r?.length?n0(e.inputs,r):"0x")}(nU("constructor(bytes, bytes)"),{bytecode:n7.LX,args:["0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033",function(e,...t){let{overloads:n}=e,r=n?function(e,t,n){let r=function(e,t,n){let r,{args:a=[],prepare:i=!0}=n??{},s=function(e,t={}){let{strict:n=!1}=t;try{return!function(e,t={}){let{strict:n=!1}=t;if(!e||"string"!=typeof e)throw new nm(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e)||!e.startsWith("0x"))throw new np(e)}(e,{strict:n}),!0}catch{return!1}}(t,{strict:!1}),o=e.filter(e=>s?"function"===e.type||"error"===e.type?nG(e)===nd(t,0,4):"event"===e.type&&nH(e)===t:"name"in e&&e.name===t);if(0===o.length)throw new nQ({name:t});if(1===o.length)return{...o[0],...i?{hash:nH(o[0])}:{}};for(let e of o){if("inputs"in e){if(!a||0===a.length){if(!e.inputs||0===e.inputs.length)return{...e,...i?{hash:nH(e)}:{}};continue}if(e.inputs&&0!==e.inputs.length&&e.inputs.length===a.length&&a.every((t,n)=>{let r="inputs"in e&&e.inputs[n];return!!r&&function e(t,n){let r=typeof t,a=n.type;switch(a){case"address":return nL(t,{strict:!1});case"bool":return"boolean"===r;case"function":case"string":return"string"===r;default:if("tuple"===a&&"components"in n)return Object.values(n.components).every((n,r)=>e(Object.values(t)[r],n));if(/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(a))return"number"===r||"bigint"===r;if(/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(a))return"string"===r||t instanceof Uint8Array;if(/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(a))return Array.isArray(t)&&t.every(t=>e(t,{...n,type:a.replace(/(\[[0-9]{0,}\])$/,"")}));return!1}}(t,r)})){if(r&&"inputs"in r&&r.inputs){let t=function e(t,n,r){for(let a in t){let i=t[a],s=n[a];if("tuple"===i.type&&"tuple"===s.type&&"components"in i&&"components"in s)return e(i.components,s.components,r[a]);let o=[i.type,s.type];if(o.includes("address")&&o.includes("bytes20")||(o.includes("address")&&o.includes("string")||o.includes("address")&&o.includes("bytes"))&&nL(r[a],{strict:!1}))return o}}(e.inputs,r.inputs,a);if(t)throw new nz({abiItem:e,type:t[0]},{abiItem:r,type:t[1]})}r=e}}}let l=(()=>{if(r)return r;let[e,...t]=o;return{...e,overloads:t}})();if(!l)throw new nQ({name:t});return{...l,...i?{hash:nH(l)}:{}}}(e,t,n);if("function"!==r.type)throw new nQ({name:t,type:"function"});return r}([e,...n],e.name,{args:t[0]}):e,a=nG(r),i=t.length>0?n0(r.inputs,t[0]):void 0;return i?na(a,i):a}(n8("function getBalance(address)"),[c.address])]}):void 0,d=s?await Promise.all(t.calls.map(async t=>{if(!t.data&&!t.abi)return;let{accessList:n}=await tg(e,{account:c.address,...t,data:t.abi?(0,w.p)(t):t.data});return n.map(({address:e,storageKeys:t})=>t.length>0?e:null)})).then(e=>e.flat().filter(Boolean)):[],f=i?.map(e=>e.address===c?.address?{...e,nonce:0}:e),h=await nv(e,{blockNumber:n,blockTag:r,blocks:[...s?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((e,t)=>({abi:[n8("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[c.address],to:e,from:n9,nonce:t})),stateOverrides:[{address:n9,nonce:0}]}]:[],{calls:[...a,{}].map((e,t)=>({...e,from:c?.address,nonce:t})),stateOverrides:f},...s?[{calls:[{data:u}]},{calls:d.map((e,t)=>({abi:[n8("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[c.address],to:e,from:n9,nonce:t})),stateOverrides:[{address:n9,nonce:0}]},{calls:d.map((e,t)=>({to:e,abi:[n8("function decimals() returns (uint256)")],functionName:"decimals",from:n9,nonce:t})),stateOverrides:[{address:n9,nonce:0}]},{calls:d.map((e,t)=>({to:e,abi:[n8("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:n9,nonce:t})),stateOverrides:[{address:n9,nonce:0}]},{calls:d.map((e,t)=>({to:e,abi:[n8("function symbol() returns (string)")],functionName:"symbol",from:n9,nonce:t})),stateOverrides:[{address:n9,nonce:0}]}]:[]],traceTransfers:o,validation:l}),m=s?h[2]:h[0],[p,g,,x,v,N,E,A]=s?h:[],{calls:I,...C}=m,j=I.slice(0,-1)??[],P=[...p?.calls??[],...g?.calls??[]].map(e=>"success"===e.status?(0,S.uU)(e.data):null),T=[...x?.calls??[],...v?.calls??[]].map(e=>"success"===e.status?(0,S.uU)(e.data):null),M=(N?.calls??[]).map(e=>"success"===e.status?e.result:null),R=(A?.calls??[]).map(e=>"success"===e.status?e.result:null),B=(E?.calls??[]).map(e=>"success"===e.status?e.result:null),O=[];for(let[e,t]of T.entries()){let n=P[e];if("bigint"!=typeof t||"bigint"!=typeof n)continue;let r=M[e-1],a=R[e-1],i=B[e-1],s=0===e?{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",decimals:18,symbol:"ETH"}:{address:d[e-1],decimals:i||r?Number(r??1):void 0,symbol:a??void 0};O.some(e=>e.token.address===s.address)||O.push({token:s,value:{pre:n,post:t,diff:t-n}})}return{assetChanges:O,block:C,results:j}}async function rt(e,t){let{abi:n,address:r,args:a,dataSuffix:i,functionName:s,...o}=t,l=o.account?(0,y.J)(o.account):e.account,c=(0,w.p)({abi:n,args:a,functionName:s});try{let{data:u}=await (0,E.T)(e,tm.T,"call")({batch:!1,data:`${c}${i?i.replace("0x",""):""}`,to:r,...o,account:l}),d=(0,eQ.e)({abi:n,args:a,functionName:s,data:u||"0x"}),f=n.filter(e=>"name"in e&&e.name===t.functionName);return{result:d,request:{abi:f,address:r,args:a,dataSuffix:i,functionName:s,...o,account:l}}}catch(e){throw(0,N.j)(e,{abi:n,address:r,args:a,docsPath:"/docs/contract/simulateContract",functionName:s,sender:l?.address})}}async function rn(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function rr(e,t){return(0,I.S)(function(e){let t="string"==typeof e?(0,j.i3)(e):"string"==typeof e.raw?e.raw:(0,j.My)(e.raw),n=(0,j.i3)(`\x19Ethereum Signed Message:
${(0,ey.E)(t)}`);return(0,R.xW)([n,t])}(e),t)}var ra=n(12810);let ri="0x6492649264926492649264926492649264926492649264926492649264926492";var rs=n(65701),ro=n(2920);async function rl(e,t){let{address:n,factory:r,factoryData:a,hash:i,signature:s,universalSignatureVerifierAddress:o=e.chain?.contracts?.universalSignatureVerifier?.address,...l}=t,c=(0,C.q)(s)?s:"object"==typeof s&&"r"in s&&"s"in s?function({r:e,s:t,to:n="hex",v:r,yParity:a}){let i=(()=>{if(0===a||1===a)return a;if(r&&(27n===r||28n===r||r>=35n))return+(r%2n===0n);throw Error("Invalid `v` or `yParity` value")})(),s=`0x${new ro.secp256k1.Signature((0,S.uU)(e),(0,S.uU)(t)).toCompactHex()}${0===i?"1b":"1c"}`;return"hex"===n?s:(0,B.aT)(s)}(s):(0,j.My)(s),u=await (async()=>{if(!r&&!a||(0,rs.iN)(c,-32)===ri)return c;let{address:e,data:t,signature:n,to:i="hex"}={address:r,data:a,signature:c},s=(0,R.aP)([(0,tN.h)([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,t,n]),ri]);return"hex"===i?s:(0,B.aT)(s)})();try{let t=o?{to:o,data:(0,w.p)({abi:ez._,functionName:"isValidSig",args:[n,i,u]}),...l}:{data:(0,ra.m)({abi:ez._,args:[n,i,u],bytecode:n7.nP}),...l},{data:r}=await (0,E.T)(e,tm.T,"call")(t);return(0,S.Nx)(r??"0x0")}catch(e){try{if((0,tD.h)((0,A.b)(n),await M({hash:i,signature:s})))return!0}catch{}if(e instanceof eX.zX)return!1;throw e}}async function rc(e,{address:t,message:n,factory:r,factoryData:a,signature:i,...s}){return rl(e,{address:t,factory:r,factoryData:a,hash:rr(n),signature:i,...s})}var ru=n(64746);class rd extends b.C{constructor({domain:e}){super(`Invalid domain "${(0,eB.A)(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class rf extends b.C{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class rh extends b.C{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}var rm=n(55925),rp=n(23105);function rg({data:e,primaryType:t,types:n}){let r=function e({data:t,primaryType:n,types:r}){let a=[{type:"bytes32"}],i=[function({primaryType:e,types:t}){let n=(0,j.nj)(function({primaryType:e,types:t}){let n="",r=function e({primaryType:t,types:n},r=new Set){let a=t.match(/^\w*/u),i=a?.[0];if(r.has(i)||void 0===n[i])return r;for(let t of(r.add(i),n[i]))e({primaryType:t.type,types:n},r);return r}({primaryType:e,types:t});for(let a of(r.delete(e),[e,...Array.from(r).sort()]))n+=`${a}(${t[a].map(({name:e,type:t})=>`${t} ${e}`).join(",")})`;return n}({primaryType:e,types:t}));return(0,I.S)(n)}({primaryType:n,types:r})];for(let s of r[n]){let[n,o]=function t({types:n,name:r,type:a,value:i}){if(void 0!==n[a])return[{type:"bytes32"},(0,I.S)(e({data:i,primaryType:a,types:n}))];if("bytes"===a){let e=i.length%2?"0":"";return i=`0x${e+i.slice(2)}`,[{type:"bytes32"},(0,I.S)(i)]}if("string"===a)return[{type:"bytes32"},(0,I.S)((0,j.nj)(i))];if(a.lastIndexOf("]")===a.length-1){let e=a.slice(0,a.lastIndexOf("[")),s=i.map(a=>t({name:r,type:e,types:n,value:a}));return[{type:"bytes32"},(0,I.S)((0,tN.h)(s.map(([e])=>e),s.map(([,e])=>e)))]}return[{type:a},i]}({types:r,name:s.name,type:s.type,value:t[s.name]});a.push(n),i.push(o)}return(0,tN.h)(a,i)}({data:e,primaryType:t,types:n});return(0,I.S)(r)}async function ry(e,t){let{address:n,factory:r,factoryData:a,signature:i,message:s,primaryType:o,types:l,domain:c,...u}=t;return rl(e,{address:n,factory:r,factoryData:a,hash:function(e){let{domain:t={},message:n,primaryType:r}=e,a={EIP712Domain:function({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},("number"==typeof e?.chainId||"bigint"==typeof e?.chainId)&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}({domain:t}),...e.types},{domain:i,message:s,primaryType:o,types:l}={domain:t,message:n,primaryType:r,types:a},c=(e,t)=>{for(let n of e){let{name:e,type:r}=n,a=t[e],i=r.match(rp.Ge);if(i&&("number"==typeof a||"bigint"==typeof a)){let[e,t,n]=i;(0,j.cK)(a,{signed:"int"===t,size:Number.parseInt(n)/8})}if("address"===r&&"string"==typeof a&&!(0,rm.P)(a))throw new ru.M({address:a});let s=r.match(rp.BD);if(s){let[e,t]=s;if(t&&(0,ey.E)(a)!==Number.parseInt(t))throw new tx.BI({expectedSize:Number.parseInt(t),givenSize:(0,ey.E)(a)})}let o=l[r];o&&(function(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new rh({type:e})}(r),c(o,a))}};if(l.EIP712Domain&&i){if("object"!=typeof i)throw new rd({domain:i});c(l.EIP712Domain,i)}if("EIP712Domain"!==o)if(l[o])c(l[o],s);else throw new rf({primaryType:o,types:l});let u=["0x1901"];return t&&u.push(function({domain:e,types:t}){return rg({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:a})),"EIP712Domain"!==r&&u.push(rg({data:n,primaryType:r,types:a})),(0,I.S)((0,R.xW)(u))}({message:s,primaryType:o,types:l,domain:c}),signature:i,...u})}let rb=new Map,rx=new Map,rv=0;function rw(e,t,n){let r=++rv,a=()=>rb.get(e)||[],i=()=>{let t=a();rb.set(e,t.filter(e=>e.id!==r))},s=()=>{let t=a();if(!t.some(e=>e.id===r))return;let n=rx.get(e);1===t.length&&n&&n(),i()},o=a();if(rb.set(e,[...o,{id:r,fns:t}]),o&&o.length>0)return s;let l={};for(let e in t)l[e]=(...t)=>{let n=a();if(0!==n.length)for(let r of n)r.fns[e]?.(...t)};let c=n(l);return"function"==typeof c&&rx.set(e,c),s}var rN=n(95283);function rE(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let a=!0,i=()=>a=!1;return(async()=>{let s;t&&(s=await e({unpoll:i}));let o=await n?.(s)??r;await eM(o);let l=async()=>{a&&(await e({unpoll:i}),await eM(r),l())};l()})(),i}function rA(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:a,poll:i,pollingInterval:s=e.pollingInterval}){let o;return(void 0!==i?i:"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type))?rw((0,eB.A)(["watchBlockNumber",e.uid,t,n,s]),{onBlockNumber:r,onError:a},r=>rE(async()=>{try{let t=await (0,E.T)(e,tL,"getBlockNumber")({cacheTime:0});if(o){if(t===o)return;if(t-o>1&&n)for(let e=o+1n;e<t;e++)r.onBlockNumber(e,o),o=e}(!o||t>o)&&(r.onBlockNumber(t,o),o=t)}catch(e){r.onError?.(e)}},{emitOnBegin:t,interval:s})):rw((0,eB.A)(["watchBlockNumber",e.uid,t,n]),{onBlockNumber:r,onError:a},t=>{let n=!0,r=()=>n=!1;return(async()=>{try{let a=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type);return t?t.value:e.transport}return e.transport})(),{unsubscribe:i}=await a.subscribe({params:["newHeads"],onData(e){if(!n)return;let r=(0,S.uU)(e.result?.number);t.onBlockNumber(r,o),o=r},onError(e){t.onError?.(e)}});r=i,n||r()}catch(e){a?.(e)}})(),()=>r()})}async function rI(e,{confirmations:t=1,hash:n,onReplaced:r,pollingInterval:a=e.pollingInterval,retryCount:i=6,retryDelay:s=({count:e})=>200*~~(1<<e),timeout:o=18e4}){let l,c,u,d=(0,eB.A)(["waitForTransactionReceipt",e.uid,n]),f=!1,{promise:h,resolve:m,reject:p}=(0,rN.Y)(),g=o?setTimeout(()=>p(new _.WA({hash:n})),o):void 0,y=rw(d,{onReplaced:r,resolve:m,reject:p},r=>{let o=(0,E.T)(e,rA,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:a,async onBlockNumber(a){let d=e=>{clearTimeout(g),o(),e(),y()},h=a;if(!f)try{if(u){if(t>1&&(!u.blockNumber||h-u.blockNumber+1n<t))return;d(()=>r.resolve(u));return}if(l||(f=!0,await eR(async()=>{(l=await (0,E.T)(e,t5,"getTransaction")({hash:n})).blockNumber&&(h=l.blockNumber)},{delay:s,retryCount:i}),f=!1),u=await (0,E.T)(e,t4,"getTransactionReceipt")({hash:n}),t>1&&(!u.blockNumber||h-u.blockNumber+1n<t))return;d(()=>r.resolve(u))}catch(n){if(n instanceof _.Kz||n instanceof _.Kc){if(!l){f=!1;return}try{c=l,f=!0;let n=await eR(()=>(0,E.T)(e,ee,"getBlock")({blockNumber:h,includeTransactions:!0}),{delay:s,retryCount:i,shouldRetry:({error:e})=>e instanceof X});f=!1;let a=n.transactions.find(({from:e,nonce:t})=>e===c.from&&t===c.nonce);if(!a||(u=await (0,E.T)(e,t4,"getTransactionReceipt")({hash:a.hash}),t>1&&(!u.blockNumber||h-u.blockNumber+1n<t)))return;let o="replaced";a.to===c.to&&a.value===c.value&&a.input===c.input?o="repriced":a.from===a.to&&0n===a.value&&(o="cancelled"),d(()=>{r.onReplaced?.({reason:o,replacedTransaction:c,transaction:a,transactionReceipt:u}),r.resolve(u)})}catch(e){d(()=>r.reject(e))}}else d(()=>r.reject(n))}}})});return h}let rC=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,rS=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;async function rj(e,t){let{address:n,domain:r,message:a,nonce:i,scheme:s,signature:o,time:l=new Date,...c}=t,u=function(e){let{scheme:t,statement:n,...r}=e.match(rC)?.groups??{},{chainId:a,expirationTime:i,issuedAt:s,notBefore:o,requestId:l,...c}=e.match(rS)?.groups??{},u=e.split("Resources:")[1]?.split("\n- ").slice(1);return{...r,...c,...a?{chainId:Number(a)}:{},...i?{expirationTime:new Date(i)}:{},...s?{issuedAt:new Date(s)}:{},...o?{notBefore:new Date(o)}:{},...l?{requestId:l}:{},...u?{resources:u}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}(a);if(!u.address||!function(e){let{address:t,domain:n,message:r,nonce:a,scheme:i,time:s=new Date}=e;if(n&&r.domain!==n||a&&r.nonce!==a||i&&r.scheme!==i||r.expirationTime&&s>=r.expirationTime||r.notBefore&&s<r.notBefore)return!1;try{if(!r.address||t&&!(0,tD.h)(r.address,t))return!1}catch{return!1}return!0}({address:n,domain:r,message:u,nonce:i,scheme:s,time:l}))return!1;let d=rr(a);return rl(e,{address:u.address,hash:d,signature:o,...c})}function rP(e){return{call:t=>(0,tm.T)(e,t),createAccessList:t=>tg(e,t),createBlockFilter:()=>tb(e),createContractEventFilter:t=>tj(e,t),createEventFilter:t=>tP(e,t),createPendingTransactionFilter:()=>tT(e),estimateContractGas:t=>tM(e,t),estimateGas:t=>eu(e,t),getBalance:t=>(0,ec.r)(e,t),getBlobBaseFee:()=>tR(e),getBlock:t=>ee(e,t),getBlockNumber:t=>tL(e,t),getBlockTransactionCount:t=>t$(e,t),getBytecode:t=>t_(e,t),getChainId:()=>z(e),getCode:t=>t_(e,t),getContractEvents:t=>tK(e,t),getEip712Domain:t=>tX(e,t),getEnsAddress:t=>e2(e,t),getEnsAvatar:t=>td(e,t),getEnsName:t=>tf(e,t),getEnsResolver:t=>th(e,t),getEnsText:t=>tu(e,t),getFeeHistory:t=>tZ(e,t),estimateFeesPerGas:t=>ea(e,t),getFilterChanges:t=>tJ(e,t),getFilterLogs:t=>t0(e,t),getGasPrice:()=>et(e),getLogs:t=>tW(e,t),getProof:t=>t1(e,t),estimateMaxPriorityFeePerGas:t=>en(e,t),getStorageAt:t=>t2(e,t),getTransaction:t=>t5(e,t),getTransactionConfirmations:t=>t6(e,t),getTransactionCount:t=>ed(e,t),getTransactionReceipt:t=>t4(e,t),multicall:t=>(0,t8.C)(e,t),prepareTransactionRequest:t=>ev(e,t),readContract:t=>(0,e1.J)(e,t),sendRawTransaction:t=>ew(e,t),simulate:t=>nv(e,t),simulateBlocks:t=>nv(e,t),simulateCalls:t=>re(e,t),simulateContract:t=>rt(e,t),verifyMessage:t=>rc(e,t),verifySiweMessage:t=>rj(e,t),verifyTypedData:t=>ry(e,t),uninstallFilter:t=>rn(e,t),waitForTransactionReceipt:t=>rI(e,t),watchBlocks:t=>(function(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:a,onError:i,includeTransactions:s,poll:o,pollingInterval:l=e.pollingInterval}){let c,u,d,f,h=void 0!==o?o:"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type),m=s??!1;return h?rw((0,eB.A)(["watchBlocks",e.uid,t,n,r,m,l]),{onBlock:a,onError:i},a=>rE(async()=>{try{let r=await (0,E.T)(e,ee,"getBlock")({blockTag:t,includeTransactions:m});if(r.number&&c?.number){if(r.number===c.number)return;if(r.number-c.number>1&&n)for(let t=c?.number+1n;t<r.number;t++){let n=await (0,E.T)(e,ee,"getBlock")({blockNumber:t,includeTransactions:m});a.onBlock(n,c),c=n}}(!c?.number||"pending"===t&&!r?.number||r.number&&r.number>c.number)&&(a.onBlock(r,c),c=r)}catch(e){a.onError?.(e)}},{emitOnBegin:r,interval:l})):(u=!0,d=!0,f=()=>u=!1,(async()=>{try{r&&(0,E.T)(e,ee,"getBlock")({blockTag:t,includeTransactions:m}).then(e=>{u&&d&&(a(e,void 0),d=!1)});let n=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type);return t?t.value:e.transport}return e.transport})(),{unsubscribe:s}=await n.subscribe({params:["newHeads"],async onData(t){if(!u)return;let n=await (0,E.T)(e,ee,"getBlock")({blockNumber:t.blockNumber,includeTransactions:m}).catch(()=>{});u&&(a(n,c),d=!1,c=n)},onError(e){i?.(e)}});f=s,u||f()}catch(e){i?.(e)}})(),()=>f())})(e,t),watchBlockNumber:t=>rA(e,t),watchContractEvent:t=>(function(e,t){let{abi:n,address:r,args:a,batch:i=!0,eventName:s,fromBlock:o,onError:l,onLogs:c,poll:u,pollingInterval:d=e.pollingInterval,strict:f}=t;return(void 0!==u?u:"bigint"==typeof o||"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type))?(()=>{let t=f??!1;return rw((0,eB.A)(["watchContractEvent",r,a,i,e.uid,s,d,t,o]),{onLogs:c,onError:l},l=>{let c,u;void 0!==o&&(c=o-1n);let f=!1,h=rE(async()=>{if(!f){try{u=await (0,E.T)(e,tj,"createContractEventFilter")({abi:n,address:r,args:a,eventName:s,strict:t,fromBlock:o})}catch{}f=!0;return}try{let o;if(u)o=await (0,E.T)(e,tJ,"getFilterChanges")({filter:u});else{let i=await (0,E.T)(e,tL,"getBlockNumber")({});o=c&&c<i?await (0,E.T)(e,tK,"getContractEvents")({abi:n,address:r,args:a,eventName:s,fromBlock:c+1n,toBlock:i,strict:t}):[],c=i}if(0===o.length)return;if(i)l.onLogs(o);else for(let e of o)l.onLogs([e])}catch(e){u&&e instanceof eP.Di&&(f=!1),l.onError?.(e)}},{emitOnBegin:!0,interval:d});return async()=>{u&&await (0,E.T)(e,rn,"uninstallFilter")({filter:u}),h()}})})():(()=>{let t=(0,eB.A)(["watchContractEvent",r,a,i,e.uid,s,d,f??!1]),o=!0,u=()=>o=!1;return rw(t,{onLogs:c,onError:l},t=>((async()=>{try{let i=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type);return t?t.value:e.transport}return e.transport})(),l=s?tC({abi:n,eventName:s,args:a}):[],{unsubscribe:c}=await i.subscribe({params:["logs",{address:r,topics:l}],onData(e){if(!o)return;let r=e.result;try{let{eventName:e,args:a}=tH({abi:n,data:r.data,topics:r.topics,strict:f}),i=tQ(r,{args:a,eventName:e});t.onLogs([i])}catch(i){let e,n;if(i instanceof tx.fo||i instanceof tx.l3){if(f)return;e=i.abiItem.name,n=i.abiItem.inputs?.some(e=>!("name"in e&&e.name))}let a=tQ(r,{args:n?[]:{},eventName:e});t.onLogs([a])}},onError(e){t.onError?.(e)}});u=c,o||u()}catch(e){l?.(e)}})(),()=>u()))})()})(e,t),watchEvent:t=>(function(e,{address:t,args:n,batch:r=!0,event:a,events:i,fromBlock:s,onError:o,onLogs:l,poll:c,pollingInterval:u=e.pollingInterval,strict:d}){let f,h,m=void 0!==c?c:"bigint"==typeof s||"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type),p=d??!1;return m?rw((0,eB.A)(["watchEvent",t,n,r,e.uid,a,u,s]),{onLogs:l,onError:o},o=>{let l,c;void 0!==s&&(l=s-1n);let d=!1,f=rE(async()=>{if(!d){try{c=await (0,E.T)(e,tP,"createEventFilter")({address:t,args:n,event:a,events:i,strict:p,fromBlock:s})}catch{}d=!0;return}try{let s;if(c)s=await (0,E.T)(e,tJ,"getFilterChanges")({filter:c});else{let r=await (0,E.T)(e,tL,"getBlockNumber")({});s=l&&l!==r?await (0,E.T)(e,tW,"getLogs")({address:t,args:n,event:a,events:i,fromBlock:l+1n,toBlock:r}):[],l=r}if(0===s.length)return;if(r)o.onLogs(s);else for(let e of s)o.onLogs([e])}catch(e){c&&e instanceof eP.Di&&(d=!1),o.onError?.(e)}},{emitOnBegin:!0,interval:u});return async()=>{c&&await (0,E.T)(e,rn,"uninstallFilter")({filter:c}),f()}}):(f=!0,h=()=>f=!1,(async()=>{try{let r=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type);return t?t.value:e.transport}return e.transport})(),s=i??(a?[a]:void 0),c=[];s&&(c=[s.flatMap(e=>tC({abi:[e],eventName:e.name,args:n}))],a&&(c=c[0]));let{unsubscribe:u}=await r.subscribe({params:["logs",{address:t,topics:c}],onData(e){if(!f)return;let t=e.result;try{let{eventName:e,args:n}=tH({abi:s??[],data:t.data,topics:t.topics,strict:p}),r=tQ(t,{args:n,eventName:e});l([r])}catch(a){let e,n;if(a instanceof tx.fo||a instanceof tx.l3){if(d)return;e=a.abiItem.name,n=a.abiItem.inputs?.some(e=>!("name"in e&&e.name))}let r=tQ(t,{args:n?[]:{},eventName:e});l([r])}},onError(e){o?.(e)}});h=u,f||h()}catch(e){o?.(e)}})(),()=>h())})(e,t),watchPendingTransactions:t=>(function(e,{batch:t=!0,onError:n,onTransactions:r,poll:a,pollingInterval:i=e.pollingInterval}){let s,o;return(void 0!==a?a:"webSocket"!==e.transport.type)?rw((0,eB.A)(["watchPendingTransactions",e.uid,t,i]),{onTransactions:r,onError:n},n=>{let r,a=rE(async()=>{try{if(!r)try{r=await (0,E.T)(e,tT,"createPendingTransactionFilter")({});return}catch(e){throw a(),e}let i=await (0,E.T)(e,tJ,"getFilterChanges")({filter:r});if(0===i.length)return;if(t)n.onTransactions(i);else for(let e of i)n.onTransactions([e])}catch(e){n.onError?.(e)}},{emitOnBegin:!0,interval:i});return async()=>{r&&await (0,E.T)(e,rn,"uninstallFilter")({filter:r}),a()}}):(s=!0,o=()=>s=!1,(async()=>{try{let{unsubscribe:t}=await e.transport.subscribe({params:["newPendingTransactions"],onData(e){if(!s)return;let t=e.result;r([t])},onError(e){n?.(e)}});o=t,s||o()}catch(e){n?.(e)}})(),()=>o())})(e,t)}}function rT(e,t={}){let n=function(e,t={}){let n;try{n=e.getClient(t)}catch{}return n}(e,t);return n?.extend(rP)}var rM=n(39733);function rR(e={}){let t=(0,eG.U)(e);return(0,rM.useSyncExternalStoreWithSelector)(e=>(function(e,t){let{onChange:n}=t;return e.subscribe(()=>rT(e),n,{equalityFn:(e,t)=>e?.uid===t?.uid})})(t,{onChange:e}),()=>rT(t,e),()=>rT(t,e),e=>e,(e,t)=>e?.uid===t?.uid)}var rB=n(26265),rO=n(32054);class rF extends b.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function rk(e,t="wei"){return function(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new rF({value:e});let[n,r="0"]=e.split("."),a=n.startsWith("-");if(a&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${r}`))&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){let[e,a,i]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],s=Math.round(Number(`${a}.${i}`));(r=s>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${s}`).length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${a?"-":""}${n}${r}`)}(e,rO.eL[t])}var rL=n(52855),r$=function(e){return e[e.BANANA_MINER=1]="BANANA_MINER",e[e.MONKEY_TOASTER=2]="MONKEY_TOASTER",e[e.GORILLA_GADGET=3]="GORILLA_GADGET",e[e.APEPAD_MINI=4]="APEPAD_MINI",e}({});let r_={1:{id:1,name:"BANANA MINER",image:"/banana-miner.gif",hashrate:100,energyConsumption:1,price:0,description:"YOUR FIRST BANANA MINER IS FREE!",isActive:!0},2:{id:2,name:"MONKEY TOASTER",image:"/monkey-toaster.gif",hashrate:1e3,energyConsumption:10,price:20,description:"10X HASHRATE OF BANANA MINER",isActive:!0},3:{id:3,name:"GORILLA GADGET",image:"/gorilla-gadget.gif",hashrate:5e4,energyConsumption:5,price:60,description:"50X HASHRATE OF BANANA MINER",isActive:!0},4:{id:4,name:"APEPAD MINI",image:"/apepad.png",hashrate:2e3,energyConsumption:10,price:5e3,description:"20X HASHRATE OF BANANA MINER",isActive:!0}},rD=()=>Object.values(r_).filter(e=>e.isActive),rq=e=>r_[e];function rU(){let{address:e,isConnected:t}=(0,p.F)(),n=rR(),[r,a]=(0,l.useState)("0"),[i,s]=(0,l.useState)("0"),[o]=(0,l.useState)("0"),[c,u]=(0,l.useState)(!1),[d]=(0,l.useState)(0),[f]=(0,l.useState)(0),[h]=(0,l.useState)("0"),[g]=(0,l.useState)("0"),[y]=(0,l.useState)("0"),[b]=(0,l.useState)("0"),[x]=(0,l.useState)("0"),[v,w]=(0,l.useState)(!1),[N,E]=(0,l.useState)(!1),[A,I]=(0,l.useState)(!1),[C,S]=(0,l.useState)(!1),[j,P]=(0,l.useState)(0),[T,M]=(0,l.useState)("0"),[R,B]=(0,l.useState)([]),[O,F]=(0,l.useState)(!1),[k,L]=(0,l.useState)(!1),[$,_]=(0,l.useState)(void 0),[D,q]=(0,l.useState)(null),{data:U}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"miningHasStarted",query:{enabled:!0}}),{data:G}=(0,rB.A)({address:e,chainId:rL.ol,query:{enabled:!!e}}),{data:H}=(0,m.Q)({address:rL.Z_,abi:rL.lD,functionName:"balanceOf",args:[e||n9],query:{enabled:!!e}}),{data:z,isLoading:Q,refetch:W}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"ownerToFacility",args:[e||n9],query:{enabled:!!e,refetchInterval:1e4}}),{data:K}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"getUserReferralInfo",args:[e],query:{enabled:!!e}}),{data:Y,refetch:X}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"getPlayerStats",args:[e||n9],query:{enabled:!!e}}),{data:V,refetch:Z}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"acquiredStarterMiner",args:[e],query:{enabled:!!e}}),{data:J,refetch:ee}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"getPlayerMinersPaginated",args:[e||n9,BigInt(0),BigInt(100)],query:{enabled:!!e&&c}}),{data:et}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"miners",args:[BigInt(1)],query:{enabled:!!e}}),{data:en}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"miners",args:[BigInt(2)],query:{enabled:!!e}}),{data:er}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"miners",args:[BigInt(3)],query:{enabled:!!e}}),[ea,ei]=(0,l.useState)({}),{writeContract:eo}=eH(),el=async()=>{if(!e){console.error("Cannot purchase facility: wallet not connected"),alert("Please connect your wallet to purchase a facility");return}try{console.log("Starting facility purchase transaction..."),w(!0);let t=rk("0.005"),r=G?.value||BigInt(0);if(r<t){console.error(`Insufficient APE balance: have ${(0,es.c)(r)}, need 0.005`),alert("You need at least 0.005 APE to purchase a facility");return}if(n?.chain?.id!==rL.ol){console.error(`Wrong network: connected to ${n?.chain?.name} but need ApeChain`),alert("Please switch to ApeChain network to purchase a facility");return}console.log("Facility purchase transaction details:",{contractAddress:rL.QX.MAIN,function:"purchaseInitialFacility",args:[n9],value:(0,es.c)(t),userAddress:e}),eo({address:rL.QX.MAIN,abi:rL.aL,functionName:"purchaseInitialFacility",args:[n9],value:t},{onSuccess:async e=>{if(console.log("Facility purchase transaction submitted:",e),n){console.log("Waiting for transaction confirmation...");try{let t=await n.waitForTransactionReceipt({hash:e});console.log("Facility purchase confirmed:",t),await X(),await W(),u(!0),alert("Facility purchased successfully! You can now start mining.")}catch(e){console.error("Failed to get transaction receipt:",e)}finally{w(!1)}}},onError:e=>{console.error("Error purchasing facility:",e),e.message?.includes("user rejected")?alert("Transaction cancelled by user"):e.message?.includes("insufficient funds")?alert("Insufficient funds for transaction. You need 0.005 APE plus gas fees."):e.message?.includes("gas")?alert("Gas estimation failed. Please try again with more APE for gas fees."):alert(`Failed to purchase facility: ${e.message||"Unknown error"}`),w(!1)}})}catch(e){console.error("Unexpected error during facility purchase:",e),alert("An unexpected error occurred. Please try again later."),w(!1)}},ec=async()=>{try{I(!0),await eo({address:rL.QX.MAIN,abi:rL.aL,functionName:"claimRewards"}),await X()}catch(e){console.error("Error claiming rewards:",e)}finally{I(!1)}},eu=async()=>{try{S(!0),await eo({address:rL.QX.MAIN,abi:rL.aL,functionName:"upgradeFacility"}),await X()}catch(e){console.error("Error upgrading facility:",e)}finally{S(!1)}},ed=async(t,r)=>{if(!e)return void console.error("No wallet connected");try{E(!0),eo({address:rL.QX.MAIN,abi:rL.aL,functionName:"getFreeStarterMiner",args:[BigInt(t),BigInt(r)]},{onSuccess:async e=>{if(console.log("Starter miner transaction submitted:",e),n)try{let t=await n.waitForTransactionReceipt({hash:e});console.log("Starter miner transaction confirmed:",t),alert("Starter miner claimed successfully!"),await Z(),await ee()}catch(e){console.error("Error waiting for starter miner confirmation:",e),alert("Error confirming starter miner. Please check your wallet for status.")}finally{E(!1)}},onError:e=>{console.error("Error claiming starter miner:",e),e.message?.includes("user rejected")?alert("Transaction cancelled by user"):e.message?.includes("insufficient funds")?alert("Insufficient funds for gas. Please make sure you have enough APE for transaction fees."):alert(`Failed to claim starter miner: ${e.message||"Unknown error"}`),E(!1)}})}catch(e){console.error("Error preparing starter miner transaction:",e),alert("Failed to prepare starter miner transaction. Please try again."),E(!1)}},ef=async()=>{console.log("Refetching all miner data..."),await ee()},eh=async(t,r,a)=>{if(!e){console.error("Cannot purchase miner: wallet not connected"),alert("Please connect your wallet to purchase a miner");return}try{if(console.log("=== MINER PURCHASE FLOW STARTED ==="),console.log(`Attempting to purchase miner type ${t} at position (${r}, ${a})`),console.log(`Using BIT token address: ${rL.Z_}`),console.log(`Using MAIN contract address: ${rL.QX.MAIN}`),F(!0),!rL.Z_)throw Error("BIT token address is not defined");if(!rL.QX.MAIN)throw Error("Main contract address is not defined");if(n?.chain?.id!==rL.ol){console.error(`Wrong network: connected to ${n?.chain?.name} but need ApeChain`),alert("Please switch to ApeChain network to purchase a miner"),F(!1);return}if(!c){console.error("You must purchase a facility before buying miners"),alert("You need to purchase a facility before buying miners. Please buy a facility first."),F(!1);return}if(t===r$.BANANA_MINER&&!V){console.log("Processing free starter miner claim..."),await ed(r,a);return}let i=r_[t];console.log(`Miner config for type ${t}:`,i),t===r$.BANANA_MINER?console.log("Purchasing a BANANA MINER (Type 1)"):t===r$.MONKEY_TOASTER?console.log("Purchasing a MONKEY TOASTER (Type 2)"):t===r$.GORILLA_GADGET&&console.log("Purchasing a GORILLA GADGET (Type 3)");let s=i.price.toString(),o=rk(s);console.log("=== MINER TRANSACTION INFO ==="),console.log(`Miner price: ${s} BIT (${o} wei)`);let l=H||BigInt(0);if(l<o){console.error(`Insufficient BIT balance: have ${(0,es.c)(l)}, need ${s}`),alert(`You don't have enough BIT tokens. You need ${s} BIT to purchase this miner.`),F(!1);return}if("0"!==s){if(console.log("=== CHECKING TOKEN APPROVAL ==="),!n)throw Error("Public client not available, cannot check allowance");try{let i=await n.readContract({address:rL.Z_,abi:rL.lD,functionName:"allowance",args:[e,rL.QX.MAIN]});if(console.log(`Current token allowance: ${(0,es.c)(i)} BIT`),i<o){console.log("Insufficient allowance. Requesting approval first...");let e=rk("100");eo({address:rL.Z_,abi:rL.lD,functionName:"approve",args:[rL.QX.MAIN,e]},{onSuccess:async e=>{console.log("Approval transaction submitted:",e);try{let i=await n.waitForTransactionReceipt({hash:e});console.log("Approval confirmed:",i),em(t,r,a)}catch(e){console.error("Error waiting for approval confirmation:",e),alert("There was an error confirming your approval transaction. Please try again."),F(!1)}},onError:e=>{console.error("Error approving token spend:",e),alert("Failed to approve BIT token spending: "+e.message),F(!1)}})}else console.log("Token allowance is sufficient. Proceeding with purchase..."),em(t,r,a)}catch(e){console.error("Error checking allowance:",e),alert("Failed to check your token allowance. Please try again."),F(!1)}}else console.log("Free miner detected, proceeding with purchase..."),em(t,r,a)}catch(e){console.error("Error during miner purchase flow:",e),alert(`Error purchasing miner: ${e.message||"Unknown error"}`),F(!1)}},em=(t,r,a)=>{console.log(`Executing miner purchase for type ${t} at (${r}, ${a})`),eo({address:rL.QX.MAIN,abi:rL.aL,functionName:"buyMiner",args:[BigInt(t),BigInt(r),BigInt(a)]},{onSuccess:async i=>{console.log("Miner purchase transaction submitted:",i);try{if(n){let s=await n.waitForTransactionReceipt({hash:i});if(console.log("Miner purchase confirmed:",s),console.log("Updating game state after miner purchase..."),e){let e={id:`miner-${Date.now()}`,minerType:t,x:r,y:a,hashrate:r_[t]?.hashrate,powerConsumption:r_[t]?.energyConsumption,cost:r_[t]?.price,type:t};B(t=>[...t,e])}await ef(),await X(),alert("Miner purchased successfully!"),L(e=>!e)}}catch(e){console.error("Error confirming miner purchase:",e)}finally{F(!1)}},onError:e=>{console.error("Error purchasing miner:",e),e.message?.includes("user rejected")?alert("Transaction cancelled by user"):e.message?.includes("insufficient funds")?alert("Insufficient funds for gas. Please make sure you have enough APE for transaction fees."):e.message?.includes("facility")?alert("You need a facility to place miners. Please purchase a facility first."):e.message?.includes("tile occupied")?alert("This tile is already occupied. Please select an empty tile."):alert(`Failed to purchase miner: ${e.message||"Unknown error"}`),F(!1)}})},ep={isConnected:t,address:e,apeBalance:r,bitBalance:i,spacesLeft:D?Number(D.maxMiners)-Number(D.currMiners):0,gigawattsAvailable:D?Number(D.totalPowerOutput)-Number(D.currPowerOutput):0,miningRate:h,hashRate:g,blocksUntilHalving:y,networkHashRatePercentage:b,totalNetworkHashRate:x,totalMinedBit:Y?Y[0].toString():"0",burnedBit:"1,238,626.5",rewardPerBlock:"2.5",minedBit:o,hasFacility:c,facilityData:D?{power:Number(D.totalPowerOutput),level:Number(D.facilityIndex),miners:Number(D.currMiners),capacity:Number(D.maxMiners),used:Number(D.currPowerOutput),resources:0,spaces:Number(D.maxMiners)-Number(D.currMiners)}:null,stats:Y?{totalMined:Y[0],hashRate:Y[1],miningRate:Y[2],networkShare:Y[3]}:{totalMined:BigInt(0),hashRate:BigInt(0),miningRate:BigInt(0),networkShare:BigInt(0)},purchaseFacility:el,getStarterMiner:ed,purchaseMiner:eh,claimReward:ec,upgradeFacility:eu,isPurchasingFacility:v,isGettingStarterMiner:N,isPurchasingMiner:O,isClaimingReward:A,isUpgradingFacility:C,isGameActive:!!U,isUserActive:!!U,totalReferrals:j,totalBitEarned:T,refetch:()=>{console.log("Refetching all game state data..."),W(),X(),Z(),ee()},referralInfo:{referralCode:e?e.slice(2,8).toUpperCase():"",totalReferrals:Number(j),rewardsEarned:T},initialFacilityPrice:"5",hasClaimedStarterMiner:!!V,miners:R,minerTypesFromContract:ea};return console.log("\uD83D\uDD04 RETURNING GameState with facilityData:",ep.facilityData),console.log("\uD83D\uDD04 RETURNING GameState with miners count:",R.length,"hasClaimedStarterMiner:",!!V),ep}var rG=n(95078),rH=n(76180),rz=n.n(rH),rQ=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(rQ||{}),rW=Object.defineProperty,rK=(e,t,n)=>t in e?rW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rY=(e,t,n)=>(rK(e,"symbol"!=typeof t?t+"":t,n),n);class rX{constructor(){rY(this,"current",this.detect()),rY(this,"handoffState","pending"),rY(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"server"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}}let rV=new rX,rZ=(e,t)=>{rV.isServer?(0,l.useEffect)(e,t):(0,l.useLayoutEffect)(e,t)};function rJ(e){let t=(0,l.useRef)(e);return rZ(()=>{t.current=e},[e]),t}class r0 extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return void 0===t&&(t=this.factory(e),this.set(e,t)),t}}function r1(e,t){let n=e(),r=new Set;return{getSnapshot:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e)),dispatch(e,...a){let i=t[e].call(n,...a);i&&(n=i,r.forEach(e=>e()))}}}function r2(e){return(0,l.useSyncExternalStore)(e.subscribe,e.getSnapshot,e.getSnapshot)}let r5=new r0(()=>r1(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(-1===t)return this;let n=this.slice();return n.splice(t,1),n}}));function r6(e,t){let n=r5.get(t),r=(0,l.useId)(),a=r2(n);if(rZ(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let i=a.indexOf(r),s=a.length;return -1===i&&(i=s,s+=1),i===s-1}let r3=function(e){let t=rJ(e);return l.useCallback((...e)=>t.current(...e),[t])};function r4(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}function r8(){let e=[],t={addEventListener:(e,n,r,a)=>(e.addEventListener(n,r,a),t.add(()=>e.removeEventListener(n,r,a))),requestAnimationFrame(...e){let n=requestAnimationFrame(...e);return t.add(()=>cancelAnimationFrame(n))},nextFrame:(...e)=>t.requestAnimationFrame(()=>t.requestAnimationFrame(...e)),setTimeout(...e){let n=setTimeout(...e);return t.add(()=>clearTimeout(n))},microTask(...e){let n={current:!0};return r4(()=>{n.current&&e[0]()}),t.add(()=>{n.current=!1})},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add(()=>{Object.assign(e.style,{[t]:r})})},group(e){let t=r8();return e(t),this.add(()=>t.dispose())},add:t=>(e.includes(t)||e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function r9(e){var t,n;return rV.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?null!=(n=null==(t=e.current)?void 0:t.ownerDocument)?n:document:null:document}let r7=new Map,ae=new Map;function at(e){var t;let n=null!=(t=ae.get(e))?t:0;return ae.set(e,n+1),0!==n||(r7.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0),()=>(function(e){var t;let n=null!=(t=ae.get(e))?t:1;if(1===n?ae.delete(e):ae.set(e,n-1),1!==n)return;let r=r7.get(e);r&&(null===r["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,r7.delete(e))})(e)}function an(e,t,...n){if(e in t){let r=t[e];return"function"==typeof r?r(...n):r}let r=Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(e=>`"${e}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,an),r}let ar=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),aa=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ai=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(ai||{}),as=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(as||{}),ao=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(ao||{}),al=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(al||{}),ac=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(ac||{});function au(e){null==e||e.focus({preventScroll:!0})}function ad(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:a=[]}={}){var i,s,o;let l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,c=Array.isArray(e)?n?function(e,t=e=>e){return e.slice().sort((e,n)=>{let r=t(e),a=t(n);if(null===r||null===a)return 0;let i=r.compareDocumentPosition(a);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}(e):e:64&t?function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(aa)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e):function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(ar)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e);a.length>0&&c.length>1&&(c=c.filter(e=>!a.some(t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))),r=null!=r?r:l.activeElement;let u=(()=>{if(5&t)return 1;if(10&t)return -1;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,c.indexOf(r))-1;if(4&t)return Math.max(0,c.indexOf(r))+1;if(8&t)return c.length-1;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=32&t?{preventScroll:!0}:{},h=0,m=c.length,p;do{if(h>=m||h+m<=0)return 0;let e=d+h;if(16&t)e=(e+m)%m;else{if(e<0)return 3;if(e>=m)return 1}null==(p=c[e])||p.focus(f),h+=u}while(p!==l.activeElement);return 6&t&&null!=(o=null==(s=null==(i=p)?void 0:i.matches)?void 0:s.call(i,"textarea,input"))&&o&&p.select(),2}function af(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function ah(...e){return(0,l.useMemo)(()=>r9(...e),[...e])}function am(...e){return Array.from(new Set(e.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}var ap=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(ap||{}),ag=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ag||{});function ay(){let e,t,n=(e=(0,l.useRef)([]),t=(0,l.useCallback)(t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)},[]),(...n)=>{if(!n.every(e=>null==e))return e.current=n,t});return(0,l.useCallback)(e=>(function({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:a,visible:i=!0,name:s,mergeRefs:o}){o=null!=o?o:ax;let l=av(t,e);if(i)return ab(l,n,r,s,o);let c=null!=a?a:0;if(2&c){let{static:e=!1,...t}=l;if(e)return ab(t,n,r,s,o)}if(1&c){let{unmount:e=!0,...t}=l;return an(+!e,{0:()=>null,1:()=>ab({...t,hidden:!0,style:{display:"none"}},n,r,s,o)})}return ab(l,n,r,s,o)})({mergeRefs:n,...e}),[n])}function ab(e,t={},n,r,a){let{as:i=n,children:s,refName:o="ref",...c}=aE(e,["unmount","static"]),u=void 0!==e.ref?{[o]:e.ref}:{},d="function"==typeof s?s(t):s;"className"in c&&c.className&&"function"==typeof c.className&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let f={};if(t){let e=!1,n=[];for(let[r,a]of Object.entries(t))"boolean"==typeof a&&(e=!0),!0===a&&n.push(r.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`));if(e)for(let e of(f["data-headlessui-state"]=n.join(" "),n))f[`data-${e}`]=""}if(i===l.Fragment&&(Object.keys(aN(c)).length>0||Object.keys(aN(f)).length>0))if(!(0,l.isValidElement)(d)||Array.isArray(d)&&d.length>1){if(Object.keys(aN(c)).length>0)throw Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(aN(c)).concat(Object.keys(aN(f))).map(e=>`  - ${e}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>`  - ${e}`).join(`
`)].join(`
`))}else{var h;let e=d.props,t=null==e?void 0:e.className,n="function"==typeof t?(...e)=>am(t(...e),c.className):am(t,c.className),r=av(d.props,aN(aE(c,["ref"])));for(let e in f)e in r&&delete f[e];return(0,l.cloneElement)(d,Object.assign({},r,f,u,{ref:a((h=d,l.version.split(".")[0]>="19"?h.props.ref:h.ref),u.ref)},n?{className:n}:{}))}return(0,l.createElement)(i,Object.assign({},aE(c,["ref"]),i!==l.Fragment&&u,i!==l.Fragment&&f),d)}function ax(...e){return e.every(e=>null==e)?void 0:t=>{for(let n of e)null!=n&&("function"==typeof n?n(t):n.current=t)}}function av(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let r of e)for(let e in r)e.startsWith("on")&&"function"==typeof r[e]?(null!=n[e]||(n[e]=[]),n[e].push(r[e])):t[e]=r[e];if(t.disabled||t["aria-disabled"])for(let e in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(e)&&(n[e]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let e in n)Object.assign(t,{[e](t,...r){for(let a of n[e]){if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;a(t,...r)}}});return t}function aw(e){var t;return Object.assign((0,l.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function aN(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}function aE(e,t=[]){let n=Object.assign({},e);for(let e of t)e in n&&delete n[e];return n}var aA=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(aA||{});let aI=aw(function(e,t){var n;let{features:r=1,...a}=e,i={ref:t,"aria-hidden":(2&r)==2||(null!=(n=a["aria-hidden"])?n:void 0),hidden:(4&r)==4||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(4&r)==4&&(2&r)!=2&&{display:"none"}}};return ay()({ourProps:i,theirProps:a,slot:{},defaultTag:"span",name:"Hidden"})}),aC=(0,l.createContext)(null);function aS({children:e,node:t}){let[n,r]=(0,l.useState)(null),a=aj(null!=t?t:n);return l.createElement(aC.Provider,{value:a},e,null===a&&l.createElement(aI,{features:aA.Hidden,ref:e=>{var t,n;if(e){for(let a of null!=(n=null==(t=r9(e))?void 0:t.querySelectorAll("html > *, body > *"))?n:[])if(a!==document.body&&a!==document.head&&a instanceof HTMLElement&&null!=a&&a.contains(e)){r(a);break}}}}))}function aj(e=null){var t;return null!=(t=(0,l.useContext)(aC))?t:e}let aP=r1(()=>new Map,{PUSH(e,t){var n;let r=null!=(n=this.get(e))?n:{doc:e,count:0,d:r8(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r,a={doc:e,d:t,meta:function(e){let t={};for(let n of e)Object.assign(t,n(t));return t}(n)},i=[af()?{before({doc:e,d:t,meta:n}){function r(e){return n.containers.flatMap(e=>e()).some(t=>t.contains(e))}t.microTask(()=>{var n;if("auto"!==window.getComputedStyle(e.documentElement).scrollBehavior){let n=r8();n.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>n.dispose()))}let a=null!=(n=window.scrollY)?n:window.pageYOffset,i=null;t.addEventListener(e,"click",t=>{if(t.target instanceof HTMLElement)try{let n=t.target.closest("a");if(!n)return;let{hash:a}=new URL(n.href),s=e.querySelector(a);s&&!r(s)&&(i=s)}catch{}},!0),t.addEventListener(e,"touchstart",e=>{if(e.target instanceof HTMLElement)if(r(e.target)){let n=e.target;for(;n.parentElement&&r(n.parentElement);)n=n.parentElement;t.style(n,"overscrollBehavior","contain")}else t.style(e.target,"touchAction","none")}),t.addEventListener(e,"touchmove",e=>{if(e.target instanceof HTMLElement&&"INPUT"!==e.target.tagName)if(r(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()},{passive:!1}),t.add(()=>{var e;a!==(null!=(e=window.scrollY)?e:window.pageYOffset)&&window.scrollTo(0,a),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)})})}}:{},{before({doc:e}){var t;let n=e.documentElement;r=Math.max(0,(null!=(t=e.defaultView)?t:window).innerWidth-n.clientWidth)},after({doc:e,d:t}){let n=e.documentElement,a=Math.max(0,n.clientWidth-n.offsetWidth),i=Math.max(0,r-a);t.style(n,"paddingRight",`${i}px`)}},{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}];i.forEach(({before:e})=>null==e?void 0:e(a)),i.forEach(({after:e})=>null==e?void 0:e(a))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});function aT(){let e,t=(e="undefined"==typeof document,"useSyncExternalStore"in c&&(0,c.useSyncExternalStore)(()=>()=>{},()=>!1,()=>!e)),[n,r]=l.useState(rV.isHandoffComplete);return n&&!1===rV.isHandoffComplete&&r(!1),l.useEffect(()=>{!0!==n&&r(!0)},[n]),l.useEffect(()=>rV.handoff(),[]),!t&&n}aP.subscribe(()=>{let e=aP.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let e="hidden"===t.get(n.doc),r=0!==n.count;(r&&!e||!r&&e)&&aP.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&aP.dispatch("TEARDOWN",n)}});let aM=Symbol();function aR(...e){let t=(0,l.useRef)(e),n=r3(e=>{for(let n of t.current)null!=n&&("function"==typeof n?n(e):n.current=e)});return e.every(e=>null==e||(null==e?void 0:e[aM]))?void 0:n}let aB=(0,l.createContext)(()=>{});function aO({value:e,children:t}){return l.createElement(aB.Provider,{value:e},t)}let aF=(0,l.createContext)(null);aF.displayName="OpenClosedContext";var ak=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(ak||{});function aL(){return(0,l.useContext)(aF)}function a$({value:e,children:t}){return l.createElement(aF.Provider,{value:e},t)}function a_({children:e}){return l.createElement(aF.Provider,{value:null},e)}let aD=(0,l.createContext)(!1);function aq(e){return l.createElement(aD.Provider,{value:e.force},e.children)}let aU=(0,l.createContext)(void 0),aG=(0,l.createContext)(null);aG.displayName="DescriptionContext";let aH=Object.assign(aw(function(e,t){let n=(0,l.useId)(),r=(0,l.useContext)(aU),{id:a=`headlessui-description-${n}`,...i}=e,s=function e(){let t=(0,l.useContext)(aG);if(null===t){let t=Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}return t}(),o=aR(t);rZ(()=>s.register(a),[a,s.register]);let c=r||!1,u=(0,l.useMemo)(()=>({...s.slot,disabled:c}),[s.slot,c]),d={ref:o,...s.props,id:a};return ay()({ourProps:d,theirProps:i,slot:u,defaultTag:"p",name:s.name||"Description"})}),{});function az(){let[e]=(0,l.useState)(r8);return e}function aQ(){let e=(0,l.useRef)(!1);return rZ(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function aW(e){r3(e),(0,l.useRef)(!1)}var aK=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(aK||{});function aY(e,t){(0,l.useRef)([]),r3(e)}let aX=[];function aV(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}var aZ=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(aZ||{});let aJ=Object.assign(aw(function(e,t){let n,r=(0,l.useRef)(null),a=aR(r,t),{initialFocus:i,initialFocusFallback:s,containers:o,features:c=15,...u}=e;aT()||(c=0);let d=ah(r);!function(e,{ownerDocument:t}){let n=!!(8&e),r=function(e=!0){let t=(0,l.useRef)(aX.slice());return aY(([e],[n])=>{!0===n&&!1===e&&r4(()=>{t.current.splice(0)}),!1===n&&!0===e&&(t.current=aX.slice())},[e,aX,t]),r3(()=>{var e;return null!=(e=t.current.find(e=>null!=e&&e.isConnected))?e:null})}(n);aY(()=>{n||(null==t?void 0:t.activeElement)===(null==t?void 0:t.body)&&au(r())},[n]),aW(()=>{n&&au(r())})}(c,{ownerDocument:d});let f=function(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:a}){let i=(0,l.useRef)(null),s=r6(!!(1&e),"focus-trap#initial-focus"),o=aQ();return aY(()=>{if(0===e)return;if(!s){null!=a&&a.current&&au(a.current);return}let l=n.current;l&&r4(()=>{if(!o.current)return;let n=null==t?void 0:t.activeElement;if(null!=r&&r.current){if((null==r?void 0:r.current)===n){i.current=n;return}}else if(l.contains(n)){i.current=n;return}if(null!=r&&r.current)au(r.current);else{if(16&e){if(ad(l,ai.First|ai.AutoFocus)!==as.Error)return}else if(ad(l,ai.First)!==as.Error)return;if(null!=a&&a.current&&(au(a.current),(null==t?void 0:t.activeElement)===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=null==t?void 0:t.activeElement})},[a,s,e]),i}(c,{ownerDocument:d,container:r,initialFocus:i,initialFocusFallback:s});!function(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:a}){var i;let s=aQ(),o=!!(4&e);null==t||t.defaultView,rJ(e=>{if(!o||!s.current)return;let t=aV(r);n.current instanceof HTMLElement&&t.add(n.current);let i=a.current;if(!i)return;let l=e.target;l&&l instanceof HTMLElement?a0(t,l)?(a.current=l,au(l)):(e.preventDefault(),e.stopPropagation(),au(i)):au(a.current)})}(c,{ownerDocument:d,container:r,containers:o,previousActiveElement:f});let h=(n=(0,l.useRef)(0),rJ(e=>{"Tab"===e.key&&(n.current=+!!e.shiftKey)}),n),m=r3(e=>{let t=r.current;t&&an(h.current,{[aK.Forwards]:()=>{ad(t,ai.First,{skipElements:[e.relatedTarget,s]})},[aK.Backwards]:()=>{ad(t,ai.Last,{skipElements:[e.relatedTarget,s]})}})}),p=r6(!!(2&c),"focus-trap#tab-lock"),g=az(),y=(0,l.useRef)(!1),b=ay();return l.createElement(l.Fragment,null,p&&l.createElement(aI,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:aA.Focusable}),b({ourProps:{ref:a,onKeyDown(e){"Tab"==e.key&&(y.current=!0,g.requestAnimationFrame(()=>{y.current=!1}))},onBlur(e){if(!(4&c))return;let t=aV(o);r.current instanceof HTMLElement&&t.add(r.current);let n=e.relatedTarget;n instanceof HTMLElement&&"true"!==n.dataset.headlessuiFocusGuard&&(a0(t,n)||(y.current?ad(r.current,an(h.current,{[aK.Forwards]:()=>ai.Next,[aK.Backwards]:()=>ai.Previous})|ai.WrapAround,{relativeTo:e.target}):e.target instanceof HTMLElement&&au(e.target)))}},theirProps:u,defaultTag:"div",name:"FocusTrap"}),p&&l.createElement(aI,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:aA.Focusable}))}),{features:aZ});function a0(e,t){for(let n of e)if(n.contains(t))return!0;return!1}var a1=n(51215);let a2=l.Fragment,a5=aw(function(e,t){let{ownerDocument:n=null,...r}=e,a=(0,l.useRef)(null),i=aR(function(e,t=!0){return Object.assign(e,{[aM]:t})}(e=>{a.current=e}),t),s=ah(a),o=null!=n?n:s,c=function(e){let t=(0,l.useContext)(aD),n=(0,l.useContext)(a3),[r,a]=(0,l.useState)(()=>{var r;if(!t&&null!==n)return null!=(r=n.current)?r:null;if(rV.isServer)return null;let a=null==e?void 0:e.getElementById("headlessui-portal-root");if(a)return a;if(null===e)return null;let i=e.createElement("div");return i.setAttribute("id","headlessui-portal-root"),e.body.appendChild(i)});return r}(o),[u]=(0,l.useState)(()=>{var e;return rV.isServer?null:null!=(e=null==o?void 0:o.createElement("div"))?e:null}),d=(0,l.useContext)(a4),f=aT();rZ(()=>{!c||!u||c.contains(u)||(u.setAttribute("data-headlessui-portal",""),c.appendChild(u))},[c,u]),rZ(()=>{if(u&&d)return d.register(u)},[d,u]),aW(()=>{var e;c&&u&&(u instanceof Node&&c.contains(u)&&c.removeChild(u),c.childNodes.length<=0&&(null==(e=c.parentElement)||e.removeChild(c)))});let h=ay();return f&&c&&u?(0,a1.createPortal)(h({ourProps:{ref:i},theirProps:r,slot:{},defaultTag:a2,name:"Portal"}),u):null}),a6=l.Fragment,a3=(0,l.createContext)(null),a4=(0,l.createContext)(null),a8=aw(function(e,t){let n=aR(t),{enabled:r=!0,ownerDocument:a,...i}=e,s=ay();return r?l.createElement(a5,{...i,ownerDocument:a,ref:n}):s({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:a2,name:"Portal"})}),a9=aw(function(e,t){let{target:n,...r}=e,a={ref:aR(t)},i=ay();return l.createElement(a3.Provider,{value:n},i({ourProps:a,theirProps:r,defaultTag:a6,name:"Popover.Group"}))}),a7=Object.assign(a8,{Group:a9});"undefined"!=typeof process&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&(null==(i=null==process?void 0:process.env)?void 0:i.NODE_ENV)==="test"&&void 0===(null==(s=null==Element?void 0:Element.prototype)?void 0:s.getAnimations)&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var ie=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(ie||{});function it(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||(null!=(t=e.as)?t:il)!==l.Fragment||1===l.Children.count(e.children)}let ir=(0,l.createContext)(null);ir.displayName="TransitionContext";var ia=(e=>(e.Visible="visible",e.Hidden="hidden",e))(ia||{});let ii=(0,l.createContext)(null);function is(e){return"children"in e?is(e.children):e.current.filter(({el:e})=>null!==e.current).filter(({state:e})=>"visible"===e).length>0}function io(e,t){let n=rJ(e),r=(0,l.useRef)([]),a=aQ(),i=az(),s=r3((e,t=ag.Hidden)=>{let s=r.current.findIndex(({el:t})=>t===e);-1!==s&&(an(t,{[ag.Unmount](){r.current.splice(s,1)},[ag.Hidden](){r.current[s].state="hidden"}}),i.microTask(()=>{var e;!is(r)&&a.current&&(null==(e=n.current)||e.call(n))}))}),o=r3(e=>{let t=r.current.find(({el:t})=>t===e);return t?"visible"!==t.state&&(t.state="visible"):r.current.push({el:e,state:"visible"}),()=>s(e,ag.Unmount)}),c=(0,l.useRef)([]),u=(0,l.useRef)(Promise.resolve()),d=(0,l.useRef)({enter:[],leave:[]}),f=r3((e,n,r)=>{c.current.splice(0),t&&(t.chains.current[n]=t.chains.current[n].filter(([t])=>t!==e)),null==t||t.chains.current[n].push([e,new Promise(e=>{c.current.push(e)})]),null==t||t.chains.current[n].push([e,new Promise(e=>{Promise.all(d.current[n].map(([e,t])=>t)).then(()=>e())})]),"enter"===n?u.current=u.current.then(()=>null==t?void 0:t.wait.current).then(()=>r(n)):r(n)}),h=r3((e,t,n)=>{Promise.all(d.current[t].splice(0).map(([e,t])=>t)).then(()=>{var e;null==(e=c.current.shift())||e()}).then(()=>n(t))});return(0,l.useMemo)(()=>({children:r,register:o,unregister:s,onStart:f,onStop:h,wait:u,chains:d}),[o,s,r,f,h,d,u])}ii.displayName="NestingContext";let il=l.Fragment,ic=ap.RenderStrategy,iu=aw(function(e,t){let{show:n,appear:r=!1,unmount:a=!0,...i}=e,s=(0,l.useRef)(null),o=aR(...it(e)?[s,t]:null===t?[]:[t]);aT();let c=aL();if(void 0===n&&null!==c&&(n=(c&ak.Open)===ak.Open),void 0===n)throw Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=(0,l.useState)(n?"visible":"hidden"),f=io(()=>{n||d("hidden")}),[h,m]=(0,l.useState)(!0),p=(0,l.useRef)([n]);rZ(()=>{!1!==h&&p.current[p.current.length-1]!==n&&(p.current.push(n),m(!1))},[p,n]);let g=(0,l.useMemo)(()=>({show:n,appear:r,initial:h}),[n,r,h]);rZ(()=>{n?d("visible"):is(f)||null===s.current||d("hidden")},[n,f]);let y={unmount:a},b=r3(()=>{var t;h&&m(!1),null==(t=e.beforeEnter)||t.call(e)}),x=r3(()=>{var t;h&&m(!1),null==(t=e.beforeLeave)||t.call(e)}),v=ay();return l.createElement(ii.Provider,{value:f},l.createElement(ir.Provider,{value:g},v({ourProps:{...y,as:l.Fragment,children:l.createElement(id,{ref:o,...y,...i,beforeEnter:b,beforeLeave:x})},theirProps:{},defaultTag:l.Fragment,features:ic,visible:"visible"===u,name:"Transition"})))}),id=aw(function(e,t){var n,r;let{transition:a=!0,beforeEnter:i,afterEnter:s,beforeLeave:o,afterLeave:c,enter:u,enterFrom:d,enterTo:f,entered:h,leave:m,leaveFrom:p,leaveTo:g,...y}=e,[b,x]=(0,l.useState)(null),v=(0,l.useRef)(null),w=it(e),N=aR(...w?[v,t,x]:null===t?[]:[t]),E=null==(n=y.unmount)||n?ag.Unmount:ag.Hidden,{show:A,appear:I,initial:C}=function(){let e=(0,l.useContext)(ir);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[S,j]=(0,l.useState)(A?"visible":"hidden"),P=function(){let e=(0,l.useContext)(ii);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:T,unregister:M}=P;rZ(()=>T(v),[T,v]),rZ(()=>{if(E===ag.Hidden&&v.current)return A&&"visible"!==S?void j("visible"):an(S,{hidden:()=>M(v),visible:()=>T(v)})},[S,v,T,M,A,E]);let R=aT();rZ(()=>{if(w&&R&&"visible"===S&&null===v.current)throw Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[v,S,R,w]);let B=I&&A&&C,O=(0,l.useRef)(!1),F=io(()=>{O.current||(j("hidden"),M(v))},P),[,k]=function(e,t,n,r){let[a,i]=(0,l.useState)(n),{hasFlag:s,addFlag:o,removeFlag:c}=function(e=0){let[t,n]=(0,l.useState)(e),r=(0,l.useCallback)(e=>n(e),[t]),a=(0,l.useCallback)(e=>n(t=>t|e),[t]),i=(0,l.useCallback)(e=>(t&e)===e,[t]);return{flags:t,setFlag:r,addFlag:a,hasFlag:i,removeFlag:(0,l.useCallback)(e=>n(t=>t&~e),[n]),toggleFlag:(0,l.useCallback)(e=>n(t=>t^e),[n])}}(e&&a?3:0),u=(0,l.useRef)(!1),d=(0,l.useRef)(!1);return rZ(()=>{var a;if(e){if(n&&i(!0),!t){n&&o(3);return}return null==(a=null==r?void 0:r.start)||a.call(r,n),function(e,{prepare:t,run:n,done:r,inFlight:a}){let i=r8();return function(e,{inFlight:t,prepare:n}){if(null!=t&&t.current)return n();let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}(e,{prepare:t,inFlight:a}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(function(e,t){var n,r;let a=r8();if(!e)return a.dispose;let i=!1;a.add(()=>{i=!0});let s=null!=(r=null==(n=e.getAnimations)?void 0:n.call(e).filter(e=>e instanceof CSSTransition))?r:[];return 0===s.length?t():Promise.allSettled(s.map(e=>e.finished)).then(()=>{i||t()}),a.dispose}(e,r))})}),i.dispose}(t,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,d.current||(n?(o(3),c(4)):(o(4),c(2)))},run(){d.current?n?(c(3),o(4)):(c(4),o(3)):n?c(1):o(1)},done(){var e;d.current&&"function"==typeof t.getAnimations&&t.getAnimations().length>0||(u.current=!1,c(7),n||i(!1),null==(e=null==r?void 0:r.end)||e.call(r,n))}})}},[e,n,t,az()]),e?[a,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}(!(!a||!w||!R||C&&!I),b,A,{start:r3(e=>{O.current=!0,F.onStart(v,e?"enter":"leave",e=>{"enter"===e?null==i||i():"leave"===e&&(null==o||o())})}),end:r3(e=>{let t=e?"enter":"leave";O.current=!1,F.onStop(v,t,e=>{"enter"===e?null==s||s():"leave"===e&&(null==c||c())}),"leave"!==t||is(F)||(j("hidden"),M(v))})}),L=aN({ref:N,className:(null==(r=am(y.className,B&&u,B&&d,k.enter&&u,k.enter&&k.closed&&d,k.enter&&!k.closed&&f,k.leave&&m,k.leave&&!k.closed&&p,k.leave&&k.closed&&g,!k.transition&&A&&h))?void 0:r.trim())||void 0,...function(e){let t={};for(let n in e)!0===e[n]&&(t[`data-${n}`]="");return t}(k)}),$=0;"visible"===S&&($|=ak.Open),"hidden"===S&&($|=ak.Closed),k.enter&&($|=ak.Opening),k.leave&&($|=ak.Closing);let _=ay();return l.createElement(ii.Provider,{value:F},l.createElement(a$,{value:$},_({ourProps:L,theirProps:y,defaultTag:il,features:ic,visible:"visible"===S,name:"Transition.Child"})))}),ih=aw(function(e,t){let n=null!==(0,l.useContext)(ir),r=null!==aL();return l.createElement(l.Fragment,null,!n&&r?l.createElement(iu,{ref:t,...e}):l.createElement(id,{ref:t,...e}))}),im=Object.assign(iu,{Child:ih,Root:iu});var ip=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ip||{}),ig=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(ig||{});let iy={0:(e,t)=>e.titleId===t.id?e:{...e,titleId:t.id}},ib=(0,l.createContext)(null);function ix(e){let t=(0,l.useContext)(ib);if(null===t){let t=Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ix),t}return t}function iv(e,t){return an(t.type,iy,e,t)}ib.displayName="DialogContext";let iw=aw(function(e,t){let n,r,a,i,s,o,c,u,d,f,h=(0,l.useId)(),{id:m=`headlessui-dialog-${h}`,open:p,onClose:g,initialFocus:y,role:b="dialog",autoFocus:x=!0,__demoMode:v=!1,unmount:w=!1,...N}=e,E=(0,l.useRef)(!1);b="dialog"===b||"alertdialog"===b?b:(E.current||(E.current=!0,console.warn(`Invalid role [${b}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog");let A=aL();void 0===p&&null!==A&&(p=(A&ak.Open)===ak.Open);let I=(0,l.useRef)(null),C=aR(I,t),S=ah(I),j=+!p,[P,T]=(0,l.useReducer)(iv,{titleId:null,descriptionId:null,panelRef:(0,l.createRef)()}),M=r3(()=>g(!1)),R=r3(e=>T({type:0,id:e})),B=!!aT()&&0===j,[O,F]=(n=(0,l.useContext)(a4),r=(0,l.useRef)([]),a=r3(e=>(r.current.push(e),n&&n.register(e),()=>i(e))),i=r3(e=>{let t=r.current.indexOf(e);-1!==t&&r.current.splice(t,1),n&&n.unregister(e)}),s=(0,l.useMemo)(()=>({register:a,unregister:i,portals:r}),[a,i,r]),[r,(0,l.useMemo)(()=>function({children:e}){return l.createElement(a4.Provider,{value:s},e)},[s])]),k=aj(),{resolveContainers:L}=function({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=ah(n),a=r3(()=>{var a,i;let s=[];for(let t of e)null!==t&&(t instanceof HTMLElement?s.push(t):"current"in t&&t.current instanceof HTMLElement&&s.push(t.current));if(null!=t&&t.current)for(let e of t.current)s.push(e);for(let e of null!=(a=null==r?void 0:r.querySelectorAll("html > *, body > *"))?a:[])e!==document.body&&e!==document.head&&e instanceof HTMLElement&&"headlessui-portal-root"!==e.id&&(n&&(e.contains(n)||e.contains(null==(i=null==n?void 0:n.getRootNode())?void 0:i.host))||s.some(t=>e.contains(t))||s.push(e));return s});return{resolveContainers:a,contains:r3(e=>a().some(t=>t.contains(e)))}}({mainTreeNode:k,portals:O,defaultContainers:[{get current(){var $;return null!=($=P.panelRef.current)?$:I.current}}]}),_=null!==A&&(A&ak.Closing)===ak.Closing;(function(e,{allowed:t,disallowed:n}={}){let r=r6(e,"inert-others");rZ(()=>{var e,a;if(!r)return;let i=r8();for(let t of null!=(e=null==n?void 0:n())?e:[])t&&i.add(at(t));let s=null!=(a=null==t?void 0:t())?a:[];for(let e of s){if(!e)continue;let t=r9(e);if(!t)continue;let n=e.parentElement;for(;n&&n!==t.body;){for(let e of n.children)s.some(t=>e.contains(t))||i.add(at(e));n=n.parentElement}}return i.dispose},[r,t,n])})(!v&&!_&&B,{allowed:r3(()=>{var e,t;return[null!=(t=null==(e=I.current)?void 0:e.closest("[data-headlessui-portal]"))?t:null]}),disallowed:r3(()=>{var e;return[null!=(e=null==k?void 0:k.closest("body > *:not(#headlessui-portal-root)"))?e:null]})}),r6(B,"outside-click"),c=rJ(e=>{e.preventDefault(),M()}),u=(0,l.useCallback)(function(e,t){if(e.defaultPrevented)return;let n=t(e);if(null!==n&&n.getRootNode().contains(n)&&n.isConnected){for(let t of function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(L))if(null!==t&&(t.contains(n)||e.composed&&e.composedPath().includes(t)))return;return function(e,t=0){var n;return e!==(null==(n=r9(e))?void 0:n.body)&&an(t,{0:()=>e.matches(ar),1(){let t=e;for(;null!==t;){if(t.matches(ar))return!0;t=t.parentElement}return!1}})}(n,al.Loose)||-1===n.tabIndex||e.preventDefault(),c.current(e,n)}},[c,L]),d=(0,l.useRef)(null),rJ(e=>{var t,n;d.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target}),rJ(e=>{var t,n;d.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target}),rJ(e=>{af()||/Android/gi.test(window.navigator.userAgent)||d.current&&(u(e,()=>d.current),d.current=null)}),f=(0,l.useRef)({x:0,y:0}),rJ(e=>{f.current.x=e.touches[0].clientX,f.current.y=e.touches[0].clientY}),rJ(e=>{let t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};if(!(Math.abs(t.x-f.current.x)>=30||Math.abs(t.y-f.current.y)>=30))return u(e,()=>e.target instanceof HTMLElement?e.target:null)}),rJ(e=>u(e,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null)),function(e,t="undefined"!=typeof document?document.defaultView:null,n){let r=r6(e,"escape");rJ(e=>{r&&(e.defaultPrevented||e.key===rQ.Escape&&n(e))})}(B,null==S?void 0:S.defaultView,e=>{e.preventDefault(),e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur(),M()}),function(e,t,n=()=>[document.body]){!function(e,t,n=()=>({containers:[]})){let r=r2(aP),a=t?r.get(t):void 0;a&&a.count,rZ(()=>{if(!(!t||!e))return aP.dispatch("PUSH",t,n),()=>aP.dispatch("POP",t,n)},[e,t])}(r6(e,"scroll-lock"),t,e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],n]}})}(!v&&!_&&B,S,L),rJ(e=>{let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&M()});let[D,q]=function(){let[e,t]=(0,l.useState)([]);return[e.length>0?e.join(" "):void 0,(0,l.useMemo)(()=>function(e){let n=r3(e=>(t(t=>[...t,e]),()=>t(t=>{let n=t.slice(),r=n.indexOf(e);return -1!==r&&n.splice(r,1),n}))),r=(0,l.useMemo)(()=>({register:n,slot:e.slot,name:e.name,props:e.props,value:e.value}),[n,e.slot,e.name,e.props,e.value]);return l.createElement(aG.Provider,{value:r},e.children)},[t])]}(),U=(0,l.useMemo)(()=>[{dialogState:j,close:M,setTitleId:R,unmount:w},P],[j,P,M,R,w]),G=(0,l.useMemo)(()=>({open:0===j}),[j]),H={ref:C,id:m,role:b,tabIndex:-1,"aria-modal":v?void 0:0===j||void 0,"aria-labelledby":P.titleId,"aria-describedby":D,unmount:w},z=!function(){var e;let[t]=(0,l.useState)(()=>null),[n,r]=(0,l.useState)(null!=(e=null==t?void 0:t.matches)&&e);return rZ(()=>{if(t)return t.addEventListener("change",e),()=>t.removeEventListener("change",e);function e(e){r(e.matches)}},[t]),n}(),Q=aZ.None;B&&!v&&(Q|=aZ.RestoreFocus,Q|=aZ.TabLock,x&&(Q|=aZ.AutoFocus),z&&(Q|=aZ.InitialFocus));let W=ay();return l.createElement(a_,null,l.createElement(aq,{force:!0},l.createElement(a7,null,l.createElement(ib.Provider,{value:U},l.createElement(a9,{target:I},l.createElement(aq,{force:!1},l.createElement(q,{slot:G},l.createElement(F,null,l.createElement(aJ,{initialFocus:y,initialFocusFallback:I,containers:L,features:Q},l.createElement(aO,{value:M},W({ourProps:H,theirProps:N,slot:G,defaultTag:iN,features:iE,visible:0===j,name:"Dialog"})))))))))))}),iN="div",iE=ap.RenderStrategy|ap.Static,iA=Object.assign(aw(function(e,t){let{transition:n=!1,open:r,...a}=e,i=aL(),s=e.hasOwnProperty("open")||null!==i,o=e.hasOwnProperty("onClose");if(!s&&!o)throw Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!o)throw Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&"boolean"!=typeof e.open)throw Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if("function"!=typeof e.onClose)throw Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(void 0!==r||n)&&!a.static?l.createElement(aS,null,l.createElement(im,{show:r,transition:n,unmount:a.unmount},l.createElement(iw,{ref:t,...a}))):l.createElement(aS,null,l.createElement(iw,{ref:t,open:r,...a}))}),{Panel:aw(function(e,t){let n=(0,l.useId)(),{id:r=`headlessui-dialog-panel-${n}`,transition:a=!1,...i}=e,[{dialogState:s,unmount:o},c]=ix("Dialog.Panel"),u=aR(t,c.panelRef),d=(0,l.useMemo)(()=>({open:0===s}),[s]),f=r3(e=>{e.stopPropagation()}),h=a?ih:l.Fragment,m=ay();return l.createElement(h,{...a?{unmount:o}:{}},m({ourProps:{ref:u,id:r,onClick:f},theirProps:i,slot:d,defaultTag:"div",name:"Dialog.Panel"}))}),Title:(aw(function(e,t){let{transition:n=!1,...r}=e,[{dialogState:a,unmount:i}]=ix("Dialog.Backdrop"),s=(0,l.useMemo)(()=>({open:0===a}),[a]),o=n?ih:l.Fragment,c=ay();return l.createElement(o,{...n?{unmount:i}:{}},c({ourProps:{ref:t,"aria-hidden":!0},theirProps:r,slot:s,defaultTag:"div",name:"Dialog.Backdrop"}))}),aw(function(e,t){let n=(0,l.useId)(),{id:r=`headlessui-dialog-title-${n}`,...a}=e,[{dialogState:i,setTitleId:s}]=ix("Dialog.Title"),o=aR(t),c=(0,l.useMemo)(()=>({open:0===i}),[i]);return ay()({ourProps:{ref:o,id:r},theirProps:a,slot:c,defaultTag:"h2",name:"Dialog.Title"})})),Description:aH}),iI=`
  .facility-modal-content {
    max-height: 90vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
`,iC=function({isOpen:e,onClose:t,onConfirm:n}){let{purchaseFacility:r,isPurchasingFacility:a,apeBalance:i,initialFacilityPrice:s}=rU(),l=parseFloat(i)>=parseFloat(s),c=async()=>{await r(),n?.()};return(0,o.jsxs)(iA,{open:e,onClose:t,className:"relative z-50",children:[(0,o.jsx)(rz(),{id:iI.__hash,children:iI}),(0,o.jsx)("div",{"aria-hidden":"true",className:"fixed inset-0 bg-black/70 transition-opacity duration-300"}),(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:(0,o.jsxs)(iA.Panel,{className:"w-full max-w-md bg-royal border-2 border-banana p-6 shadow-lg shadow-black/25 transform transition-all facility-modal-content",children:[(0,o.jsx)(iA.Title,{className:"font-press-start text-xl text-banana mb-6 text-center",children:"PURCHASE INITIAL FACILITY"}),(0,o.jsxs)("div",{className:"bg-royal-dark p-6 mb-8 border border-banana/20",children:[(0,o.jsxs)("p",{className:"font-press-start text-white text-sm text-center",children:["Purchase your initial facility for ",s," APE to start mining BIT."]}),!l&&(0,o.jsxs)("p",{className:"font-press-start text-red-500 text-sm mt-4 text-center",children:["You need at least ",s," APE to purchase a facility."]})]}),(0,o.jsxs)("div",{className:"flex justify-center space-x-6",children:[(0,o.jsx)("button",{onClick:t,className:"font-press-start px-8 py-3 border-2 border-banana text-banana hover:bg-banana/10 active:bg-banana/20 transition-colors duration-150",children:"CANCEL"}),(0,o.jsx)("button",{onClick:c,disabled:!l||a,className:"font-press-start px-8 py-3 bg-banana text-royal hover:bg-banana/90 active:bg-banana/80 transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"PURCHASING...":"PURCHASE FACILITY"})]})]})})]})};var iS=n(1592);let ij=({isOpen:e,onClose:t,totalReferrals:n,totalBitEarned:r})=>{let{address:a}=(0,p.F)(),i=a?`https://bitape.tech?ref=${a}`:"";return(0,o.jsxs)(iA,{open:e,onClose:t,className:"relative z-50",children:[(0,o.jsx)("div",{className:"fixed inset-0 bg-black/70","aria-hidden":"true"}),(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,o.jsx)(iA.Panel,{className:"w-full max-w-2xl bg-royal border-4 border-banana rounded-lg shadow-xl overflow-y-auto max-h-[90vh]",children:(0,o.jsxs)("div",{className:"p-4 md:p-6",children:[(0,o.jsx)(iA.Title,{className:"text-lg md:text-xl font-press-start text-center text-banana mb-4",children:"REFER A FRIEND"}),(0,o.jsx)("p",{className:"text-xs md:text-sm font-press-start text-center text-white mb-6 md:mb-8",children:"SHARE YOUR REFERRAL LINK WITH FRIENDS AND EARN A 2.5% BONUS OF WHATEVER $BIT THEY MINE!"}),(0,o.jsxs)("div",{className:"bg-royal-dark p-3 md:p-4 mb-6 md:mb-8 rounded",children:[(0,o.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between mb-6 space-y-4 sm:space-y-0",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-press-start text-white text-xs md:text-sm mb-2",children:"TOTAL REFERRALS"}),(0,o.jsx)("p",{className:"font-press-start text-banana text-lg md:text-xl",children:n})]}),(0,o.jsxs)("div",{className:"sm:text-right",children:[(0,o.jsx)("p",{className:"font-press-start text-white text-xs md:text-sm mb-2",children:"TOTAL BIT EARNED"}),(0,o.jsxs)("p",{className:"font-press-start text-banana text-lg md:text-xl",children:[r," $BIT"]})]})]}),(0,o.jsx)("p",{className:"font-press-start text-white text-xs md:text-sm mb-2",children:"YOUR REFERRAL LINK"}),(0,o.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,o.jsx)("input",{type:"text",readOnly:!0,value:i,"aria-label":"Your referral link",title:"Your referral link",className:"flex-1 bg-royal font-press-start text-banana p-2 border-2 border-banana text-xs md:text-sm overflow-x-auto whitespace-nowrap"}),(0,o.jsx)("button",{onClick:()=>navigator.clipboard.writeText(i),className:"px-6 py-2 bg-banana font-press-start text-royal hover:bg-banana-dark transition-colors text-xs md:text-sm whitespace-nowrap",children:"COPY"})]})]}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)("button",{onClick:t,className:"px-6 py-2 bg-transparent font-press-start text-banana border-2 border-banana hover:bg-banana hover:text-royal transition-colors text-xs md:text-sm",children:"CLOSE"})})]})})})]})};var iP=n(6478),iT=n(30038),iM=n(24556),iR=n(50956);let iB=`
  @keyframes float {
    0% { transform: translateY(0px) rotate(0deg); }
    25% { transform: translateY(-5px) rotate(-3deg); }
    50% { transform: translateY(0px) rotate(0deg); }
    75% { transform: translateY(5px) rotate(3deg); }
    100% { transform: translateY(0px) rotate(0deg); }
  }

  .miner-float {
    animation: float 3s ease-in-out infinite;
  }
  
  @keyframes pulse {
    0% { opacity: 0.7; }
    50% { opacity: 1; }
    100% { opacity: 0.7; }
  }
  
  .instruction-pulse {
    animation: pulse 2s infinite;
  }
  
  /* Ensure modal is scrollable on mobile */
  .starter-miner-modal {
    max-height: 90vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
`,iO=({isOpen:e,onClose:t,onClaim:n,selectedTile:r,isProcessing:a})=>((0,l.useEffect)(()=>{let n=n=>{"Escape"===n.key&&e&&t()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e,t]),e)?(0,o.jsxs)(iA,{open:!0,onClose:t,className:"relative z-50",children:[(0,o.jsx)(rz(),{id:iB.__hash,children:iB}),(0,o.jsx)("div",{"aria-hidden":"true",className:"fixed inset-0 bg-black/70"}),(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:(0,o.jsxs)(iA.Panel,{className:"relative bg-royal border-2 border-banana p-6 max-w-lg w-full m-4 starter-miner-modal",children:[(0,o.jsx)(iA.Title,{className:"font-press-start text-2xl text-banana mb-6 text-center",children:"CLAIM YOUR FREE BANANA MINER"}),(0,o.jsx)("div",{className:"bg-royal-dark p-6 mb-8 border border-banana/20",children:(0,o.jsxs)("div",{className:"space-y-4 font-press-start",children:[(0,o.jsxs)("div",{className:"mb-4 border border-banana/50 p-3 bg-black/50",children:[(0,o.jsx)("p",{className:"text-white text-center font-bold",children:"HOW TO CLAIM YOUR MINER:"}),(0,o.jsxs)("ol",{className:"list-decimal pl-6 text-white mt-2 space-y-2",children:[(0,o.jsx)("li",{className:"text-yellow-300 font-bold",children:"Select a tile for your miner"}),(0,o.jsx)("li",{className:"text-yellow-300 font-bold",children:'Click "CLAIM FREE MINER" button below'}),(0,o.jsx)("li",{className:"text-yellow-300 font-bold",children:"Confirm the transaction in your wallet"}),(0,o.jsx)("li",{className:"text-yellow-300 font-bold",children:"Start earning BIT!"})]})]}),r?(0,o.jsxs)("p",{className:"text-green-400 text-center font-bold",children:["✓ Tile Selected: X:",r.x,", Y:",r.y]}):(0,o.jsx)("p",{className:"text-yellow-300 text-center animate-pulse",children:"No tile selected yet"}),(0,o.jsxs)("div",{className:"relative w-48 h-48 mx-auto mb-6",children:[(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,o.jsx)("div",{className:`relative w-40 h-40 ${r?"miner-float":""}`,children:(0,o.jsx)(u.default,{src:"/banana-miner.gif",alt:"Banana Miner",fill:!0,className:"object-contain",style:{filter:r?"drop-shadow(0 0 10px #FFDD00)":"none"}})})}),r&&(0,o.jsx)("div",{className:"absolute bottom-0 w-full",children:(0,o.jsx)("div",{className:"bg-royal border border-banana rounded-full w-24 h-6 mx-auto flex items-center justify-center",children:(0,o.jsxs)("p",{className:"text-banana text-xs font-press-start",children:["POSITION ",r.x,",",r.y]})})})]}),(0,o.jsxs)("div",{className:"space-y-2 text-white",children:[(0,o.jsx)("p",{children:"- HASH RATE: 100 GH/S"}),(0,o.jsx)("p",{children:"- ENERGY: 1 WATT"}),(0,o.jsx)("p",{children:"- PRICE: FREE"}),(0,o.jsx)("p",{className:"text-yellow-300 mt-4",children:"This is your free starter miner! You can only claim one per wallet."})]})]})}),(0,o.jsxs)("div",{className:"flex justify-between space-x-4",children:[(0,o.jsx)("button",{onClick:t,className:"font-press-start px-6 py-2 border-2 border-banana text-banana hover:bg-banana hover:text-royal transition-colors",children:"CLOSE"}),r?(0,o.jsx)("button",{onClick:()=>r&&n(r.x,r.y),disabled:!r||a,className:"font-press-start px-6 py-2 bg-banana text-royal hover:bg-opacity-90 transition-colors disabled:opacity-50",children:a?"CLAIMING...":"CLAIM FREE MINER"}):(0,o.jsx)("button",{onClick:t,className:"font-press-start px-6 py-2 bg-banana text-royal hover:bg-opacity-90 transition-colors",children:"CLOSE & SELECT TILE"})]})]})})]}):null,iF=`
  @keyframes pulse {
    0% { filter: drop-shadow(0 0 1px #FFDD00); }
    50% { filter: drop-shadow(0 0 8px #FFDD00); }
    100% { filter: drop-shadow(0 0 1px #FFDD00); }
  }

  .miner-pulse {
    animation: pulse 2s infinite;
  }

  @keyframes preview-pulse {
    0% { filter: drop-shadow(0 0 1px #FFDD00); opacity: 0.7; }
    50% { filter: drop-shadow(0 0 12px #FFDD00); opacity: 0.9; }
    100% { filter: drop-shadow(0 0 1px #FFDD00); opacity: 0.7; }
  }

  .miner-preview {
    animation: preview-pulse 1.5s infinite;
  }
`;function ik({hasFacility:e,facilityData:t,onPurchaseFacility:n,onGetStarterMiner:r,onUpgradeFacility:a,isPurchasingFacility:i,isGettingStarterMiner:s,isUpgradingFacility:c,onTileSelect:d,address:f,isGridMode:h,toggleGridMode:p,hasClaimedStarterMiner:g,miners:y=[],onPurchaseMiner:b,selectedTileHasMiner:x,getMinerAtTile:v}){let[w,N]=(0,l.useState)(),[E,A]=(0,l.useState)(!1),[I,C]=(0,l.useState)(r$.BANANA_MINER),[S,j]=(0,l.useState)([]),[P,T]=(0,l.useState)(!1),{data:M}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"acquiredStarterMiner",args:[f||n9],query:{enabled:!!f}}),{data:R,isLoading:B,refetch:O}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.EY,functionName:"getPlayerMinersPaginated",args:[f||n9,BigInt(0),BigInt(100)],query:{enabled:!!f&&e,select:e=>e&&Array.isArray(e)&&e.length>0?e.map(e=>e[1]):[]}}),{data:F,isLoading:k}=function(e={}){let{contracts:t=[],query:n={}}=e,r=(0,eG.U)(e),a=(0,iR.i)({config:r}),i=function(e,t={}){return{async queryFn({queryKey:n}){let r=[],a=n[1].contracts.length;for(let e=0;e<a;e++){let a=n[1].contracts[e],i=(t.contracts?.[e]).abi;r.push({...a,abi:i})}let{scopeKey:i,...s}=n[1];return(0,iP.I)(e,{...s,contracts:r})},queryKey:function(e={}){let t=[];for(let n of e.contracts??[]){let{abi:r,...a}=n;t.push({...a,chainId:a.chainId??e.chainId})}return["readContracts",(0,iT.xO)({...e,contracts:t})]}(t)}}(r,{...e,chainId:a}),s=(0,l.useMemo)(()=>{let e=!1;for(let n of t){let{abi:t,address:r,functionName:a}=n;if(!t||!r||!a){e=!1;break}e=!0}return!!(e&&(n.enabled??!0))},[t,n.enabled]);return(0,iM.IT)({...i,...n,enabled:s,structuralSharing:n.structuralSharing??iT.I_})}({contracts:R&&Array.isArray(R)&&R.length>0?Array.from(R).map(e=>({address:rL.QX.MAIN,abi:rL.EY,functionName:"getMiner",args:[e]})):[],query:{enabled:!!f&&!!R&&Array.isArray(R)&&R.length>0}}),L=!!M,{data:$}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"ownerToFacility",args:[f||n9],query:{enabled:!!f}}),_=(e,t)=>{h&&(N({x:e,y:t}),d&&d(e,t))},D=async(e,t)=>{console.log(`Claiming starter miner at position (${e}, ${t})`);try{if(!r&&!b)return void console.error("No handler function provided for claiming starter miner");r?(console.log("Using onGetStarterMiner to claim starter miner"),await r(e,t)):b&&(console.log("Using onPurchaseMiner to claim starter miner"),await b(r$.BANANA_MINER,e,t)),console.log("Starter miner claimed successfully"),A(!1),O(),p&&!h&&(console.log("Enabling grid mode after claiming miner"),p())}catch(e){console.error("Error claiming starter miner:",e)}},q=(0,l.useMemo)(()=>{console.log("Getting all miner positions");let e=[...S];y&&y.length>0&&(console.log("Processing miners from props:",y),y.forEach(t=>{let n=Number(t.x),r=Number(t.y);if(n>1||r>1)return void console.warn(`⚠️ Miner at invalid grid position (${n}, ${r}). Valid positions are (0,0), (0,1), (1,0), and (1,1).`);let a=Number(t.minerType||t.type);if(console.log(`Processing miner from props at position (${n}, ${r}) of type ${a} (${r_[a]?.name||"Unknown"})`),!e.some(e=>{let a=Number(e.x),i=Number(e.y),s=a===n&&i===r,o=e.id===t.id;return s&&console.log(`Found existing miner at same position (${a}, ${i})`),o||s})){console.log(`Adding new miner at position (${n}, ${r}) of type ${a}`),a===r$.MONKEY_TOASTER&&console.log(`🐵 Found Monkey Toaster at position (${n}, ${r})`);let i=r_[a]?.image||"/banana-miner.gif";e.push({...t,x:n,y:r,minerType:a,image:i})}})),e.forEach(e=>{console.log(`MINER: ID=${e.id}, Type=${e.minerType} (${r_[e.minerType]?.name||"Unknown"}), Position=(${e.x},${e.y})`),3===e.minerType&&console.log(`🐵 FOUND MONKEY TOASTER (type 3) at (${e.x},${e.y})`)});let t=e.filter(e=>{let t=Number(e.x),n=Number(e.y);return t<=1&&n<=1&&t>=0&&n>=0});return console.log("Final miners list for display:",t),t},[y,S]),U=(()=>{let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e})(),G=(0,l.useMemo)(()=>(console.log("Processing miners in RoomVisualization:",y),y.map(e=>{let t=Number(e.minerType||e.type||0),n="/banana-miner.gif";return 1===t?n="/banana-miner.gif":2===t?n="/gorilla-gadget.gif":3===t?n="/monkey-toaster.gif":4===t&&(n="/apepad.png"),{...e,minerType:t,image:n,x:Number(e.x),y:Number(e.y)}})),[y]),H=(e,t)=>{console.log(`RoomVisualization - Getting miner at tile (${e}, ${t})`);let n=Number(e),r=Number(t);if(v){let n=v(e,t);if(console.log("RoomVisualization - Parent provided miner:",n),n){let e=Number(n.minerType||n.type||0),t="/banana-miner.gif";return 1===e?t="/banana-miner.gif":2===e?t="/gorilla-gadget.gif":3===e?t="/monkey-toaster.gif":4===e&&(t="/apepad.png"),{...n,minerType:e,image:t,x:Number(n.x),y:Number(n.y)}}return n}return Q.find(e=>{let t=Number(e.x),a=Number(e.y);return t===n&&a===r})},z=(e,t)=>x?x(e,t):(console.log(`RoomVisualization - Checking if tile (${e}, ${t}) is occupied`),Q.some(n=>{let r=Number(n.x),a=Number(n.y);return r===e&&a===t})),Q=(0,l.useMemo)(()=>{let e=[...G];return q.forEach(t=>{e.some(e=>e.id===t.id||Number(e.x)===Number(t.x)&&Number(e.y)===Number(t.y))||e.push({...t,minerType:Number(t.minerType||t.type||0),image:t.image||"/banana-miner.gif",x:Number(t.x),y:Number(t.y)})}),e},[G,q]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(rz(),{id:iF.__hash,children:iF}),(0,o.jsxs)("div",{className:"relative w-full h-full",children:[e?(0,o.jsx)(u.default,{src:"/bedroom.png",alt:"Mining Room",fill:!0,priority:!0,className:`object-contain ${U?"mobile-room-bg":""}`,style:{objectFit:"contain",maxWidth:"100%",maxHeight:"100%"}}):(0,o.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-dark-blue",children:(0,o.jsx)(u.default,{src:"/bedroom.png",alt:"Empty Space",width:690,height:690,className:"opacity-30"})}),e&&p&&(0,o.jsx)("button",{onClick:p,className:`absolute top-2 left-2 z-30 px-2 py-1 font-press-start text-xs transition-all ${h?"bg-banana text-royal":"bg-transparent text-banana border border-banana"} ${U?"mobile-grid-btn":""}`,children:h?"HIDE GRID":"SHOW GRID"}),e&&(0,o.jsx)("button",{onClick:a,disabled:c,className:`absolute top-2 right-2 z-30 px-2 py-1 font-press-start text-xs bg-transparent text-banana border border-banana hover:bg-banana hover:text-royal transition-all disabled:opacity-50 disabled:cursor-not-allowed ${U?"mobile-upgrade-btn":""}`,children:c?"UPGRADING...":"UPGRADE FACILITY"}),e&&!(g||L)&&(0,o.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40",children:(0,o.jsx)("button",{onClick:()=>{console.log("Opening starter miner modal from center button"),w||N({x:0,y:0}),A(!0)},disabled:s,className:"px-4 py-3 font-press-start text-base bg-banana text-royal hover:bg-opacity-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed rounded-md shadow-lg animate-pulse",children:s?"CLAIMING...":"CLAIM FREE STARTER MINER"})}),e&&(()=>{let e=[{x:0,y:0,top:"40%",left:"40%",width:"15%",height:"15%"},{x:1,y:0,top:"46%",left:"29%",width:"15%",height:"15%"},{x:0,y:1,top:"50%",left:"55%",width:"15%",height:"15%"},{x:1,y:1,top:"60%",left:"35%",width:"15%",height:"15%"}];return w&&H(w.x,w.y),(0,o.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[P&&(0,o.jsx)("div",{className:"absolute top-2 right-2 bg-black/70 px-2 py-1 text-white text-xs rounded z-50",children:"Loading miners..."}),Q.map((t,n)=>{console.log(`Processing miner for display: ID=${t.id}, Type=${t.minerType}, Position=(${t.x},${t.y})`);let r=e.find(e=>e.x===Number(t.x)&&e.y===Number(t.y));if(!r)return console.warn(`⚠️ No grid position found for miner at (${t.x}, ${t.y}) - valid positions are (0,0), (0,1), (1,0), (1,1)`),null;let a=rq(Number(t.minerType)),i=t.image||a?.image||"/banana-miner.gif",s=a?.name||`Miner #${t.id}`;return Number(t.minerType)===r$.MONKEY_TOASTER&&console.log(`🐵 Rendering Monkey Toaster (type ${t.minerType}) at position (${t.x},${t.y})`),console.log(`Using image for miner: ${i}`),console.log(`✅ Rendering miner at position (${t.x}, ${t.y}) with grid position:`,r),(0,o.jsx)("div",{className:"absolute pointer-events-none z-20",style:{top:r.top,left:r.left,width:r.width,height:r.height,transform:"skew(-24deg, 14deg)"},children:(0,o.jsxs)("div",{className:"relative w-full h-full",children:[(0,o.jsx)(u.default,{src:i,alt:`${s} at (${t.x},${t.y})`,fill:!0,className:`object-contain miner-pulse ${U?"mobile-miner":""}`,style:{transform:`skew(24deg, -14deg) scale(${U?"1.4":"1.6"}) translate(0%, 0%)`,imageRendering:"pixelated"}}),!1,!1]})},`miner-${n}-${t.id}-${t.x}-${t.y}`)}),h&&e.map(e=>{let t=w?.x===e.x&&w?.y===e.y,n=z(e.x,e.y),r=U?"20%":e.width,a=U?"20%":e.height;return(0,o.jsx)("div",{onClick:()=>_(e.x,e.y),className:`absolute pointer-events-auto transition-all duration-200 cursor-pointer z-10 ${t?"ring-2 ring-[#FFD700]":"hover:ring-2 hover:ring-[#FFD70066]"} ${n?"opacity-70":""} ${U?"mobile-grid-cell":""}`,style:{top:e.top,left:e.left,width:r,height:a,background:t?"rgba(255, 215, 0, 0.3)":"rgba(255, 215, 0, 0.1)",transform:"skew(-24deg, 14deg)",borderRadius:"2px"}},`${e.x}-${e.y}`)})]})})(),!e&&(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[(0,o.jsx)("p",{className:"font-press-start text-xs text-[#FFD700] mb-6",children:"You don't have any mining space yet."}),(0,o.jsx)("button",{onClick:n,disabled:i,className:"bigcoin-button",children:i?"PURCHASING...":"PURCHASE FACILITY"})]})]}),!L&&(0,o.jsx)(iO,{isOpen:E,onClose:()=>A(!1),onClaim:D,selectedTile:w,isProcessing:s})]})}var iL=n(85631);function i$(){let{isConnected:e}=(0,p.F)(),t=rU(),n=function(){let{address:e,isConnected:t}=(0,p.F)(),[n,r]=(0,l.useState)(0),[a,i]=(0,l.useState)(0),[s,o]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!0),[d,f]=(0,l.useState)("0"),[h,g]=(0,l.useState)("0"),[y,b]=(0,l.useState)("0"),[x,v]=(0,l.useState)(!1),{data:w,isLoading:N}=(0,rB.A)({address:e,chainId:rL.ol,query:{enabled:!!e,refetchInterval:1e4}}),{data:E,isLoading:A}=(0,m.Q)({address:rL.Z_,abi:rL.lD,functionName:"balanceOf",args:[e||n9],query:{enabled:!!e,refetchInterval:1e4}}),{data:I,isLoading:C}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"ownerToFacility",args:[e||n9],query:{enabled:!!e,refetchInterval:1e4}}),{data:S,isLoading:j}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"getPlayerMinersPaginated",args:[e||n9,BigInt(0),BigInt(100)],query:{enabled:!!e,refetchInterval:1e4}}),{data:P,isLoading:T}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"getPlayerStats",args:[e||n9],query:{enabled:!!e,refetchInterval:1e4}}),M=w?.formatted??"0",R=E?(0,iL.J)(E,18):"0";console.log("Resources data:",{ape:M,bit:R,spaces:n,power:a,hashRate:d,miningRate:h,networkShare:y,loading:c,hasFacility:s});let B={apeBalance:M,bitBalance:R,spacesLeft:n,gigawattsAvailable:a,isLoading:c,hasFacility:s,hashRate:d,miningRate:h,networkShare:y};return console.log("\uD83D\uDD04 RETURNING ResourcesData:",B),B}(),r=t.facilityData?t.facilityData.capacity-t.facilityData.miners:n.spacesLeft,a=t.facilityData?t.facilityData.power-t.facilityData.used:n.gigawattsAvailable;return e?(0,o.jsxs)("div",{className:"bg-[#001420] p-3 rounded-md border-2 border-banana",children:[(0,o.jsx)("h3",{className:"font-press-start text-white text-xs mb-4",children:"RESOURCES"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center border-b border-[#1a2a38] pb-2",children:[(0,o.jsx)("span",{className:"font-press-start text-white text-xs",children:"APE BALANCE"}),(0,o.jsxs)("span",{className:"font-press-start text-banana text-xs",children:[n.apeBalance||"0"," APE"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center border-b border-[#1a2a38] pb-2",children:[(0,o.jsx)("span",{className:"font-press-start text-white text-xs",children:"BIT BALANCE"}),(0,o.jsxs)("span",{className:"font-press-start text-banana text-xs",children:[n.bitBalance||"0"," BIT"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center border-b border-[#1a2a38] pb-2",children:[(0,o.jsx)("span",{className:"font-press-start text-white text-xs",children:"SPACES LEFT"}),(0,o.jsxs)("span",{className:"font-press-start text-banana text-xs",children:[r," SPACES"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center border-b border-[#1a2a38] pb-2",children:[(0,o.jsx)("span",{className:"font-press-start text-white text-xs",children:"GIGAWATTS AVAILABLE"}),(0,o.jsxs)("span",{className:"font-press-start text-banana text-xs",children:[a," GW"]})]})]})]}):(0,o.jsxs)("div",{className:"bg-[#001420] p-3 rounded-md border-2 border-banana",children:[(0,o.jsx)("h3",{className:"font-press-start text-white text-xs mb-4",children:"RESOURCES"}),(0,o.jsx)("div",{className:"text-center py-4",children:(0,o.jsx)("p",{className:"font-press-start text-white text-xs",children:"CONNECT WALLET TO VIEW RESOURCES"})})]})}var[i_,iD]=(0,n(96593).q)({strict:!1,name:"ButtonGroupContext"}),iq=n(13294),iU=n(84085);function iG(e){let{children:t,className:n,...r}=e,a=(0,l.isValidElement)(t)?(0,l.cloneElement)(t,{"aria-hidden":!0,focusable:!1}):t,i=(0,iU.cx)("chakra-button__icon",n);return(0,o.jsx)(iq.B.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...r,className:i,children:a})}iG.displayName="ButtonIcon";var iH=n(55764);n(17258),n(10468);var iz=n(76729);n(6198),n(56546),n(36581);var iQ=function(e,t){var n=arguments;if(null==t||!iH.h.call(t,"css"))return l.createElement.apply(void 0,n);var r=n.length,a=Array(r);a[0]=iH.E,a[1]=(0,iH.c)(e,t);for(var i=2;i<r;i++)a[i]=n[i];return l.createElement.apply(null,a)};function iW(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,iz.J)(t)}!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(iQ||(iQ={}));var iK=n(21935),iY=n(62524),iX=n(40235),iV=function(){var e=iW.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),iZ=(0,iK.R)((e,t)=>{let n=(0,iY.Vl)("Spinner",e),{label:r="Loading...",thickness:a="2px",speed:i="0.45s",emptyColor:s="transparent",className:l,...c}=(0,iX.MN)(e),u=(0,iU.cx)("chakra-spinner",l),d={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:a,borderBottomColor:s,borderLeftColor:s,animation:`${iV} ${i} linear infinite`,...n};return(0,o.jsx)(iq.B.div,{ref:t,__css:d,className:u,...c,children:r&&(0,o.jsx)(iq.B.span,{srOnly:!0,children:r})})});function iJ(e){let{label:t,placement:n,spacing:r="0.5rem",children:a=(0,o.jsx)(iZ,{color:"currentColor",width:"1em",height:"1em"}),className:i,__css:s,...c}=e,u=(0,iU.cx)("chakra-button__spinner",i),d="start"===n?"marginEnd":"marginStart",f=(0,l.useMemo)(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[d]:t?r:0,fontSize:"1em",lineHeight:"normal",...s}),[s,t,d,r]);return(0,o.jsx)(iq.B.div,{className:u,...c,__css:f,children:a})}iZ.displayName="Spinner",iJ.displayName="ButtonSpinner";var i0=n(87833),i1=(0,iK.R)((e,t)=>{let n=iD(),r=(0,iY.Vl)("Button",{...n,...e}),{isDisabled:a=null==n?void 0:n.isDisabled,isLoading:i,isActive:s,children:c,leftIcon:u,rightIcon:d,loadingText:f,iconSpacing:h="0.5rem",type:m,spinner:p,spinnerPlacement:g="start",className:y,as:b,...x}=(0,iX.MN)(e),v=(0,l.useMemo)(()=>{let e={...null==r?void 0:r._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...r,...!!n&&{_focus:e}}},[r,n]),{ref:w,type:N}=function(e){let[t,n]=(0,l.useState)(!e);return{ref:(0,l.useCallback)(e=>{e&&n("BUTTON"===e.tagName)},[]),type:t?"button":void 0}}(b),E={rightIcon:d,leftIcon:u,iconSpacing:h,children:c};return(0,o.jsxs)(iq.B.button,{ref:(0,i0.SV)(t,w),as:b,type:null!=m?m:N,"data-active":(0,iU.sE)(s),"data-loading":(0,iU.sE)(i),__css:v,className:(0,iU.cx)("chakra-button",y),...x,disabled:a||i,children:[i&&"start"===g&&(0,o.jsx)(iJ,{className:"chakra-button__spinner--start",label:f,placement:"start",spacing:h,children:p}),i?f||(0,o.jsx)(iq.B.span,{opacity:0,children:(0,o.jsx)(i2,{...E})}):(0,o.jsx)(i2,{...E}),i&&"end"===g&&(0,o.jsx)(iJ,{className:"chakra-button__spinner--end",label:f,placement:"end",spacing:h,children:p})]})});function i2(e){let{leftIcon:t,rightIcon:n,children:r,iconSpacing:a}=e;return(0,o.jsxs)(o.Fragment,{children:[t&&(0,o.jsx)(iG,{marginEnd:a,children:t}),r,n&&(0,o.jsx)(iG,{marginStart:a,children:n})]})}function i5({variant:e="solid",size:t="md",loading:n,children:r,...a}){return(0,o.jsx)(i1,{variant:e,size:t,loading:n,...a,children:r})}function i6(){let{isConnected:e,address:t}=(0,p.F)(),n=rU(),[r,a]=(0,l.useState)({level:1,maxMiners:4,currMiners:1,totalPower:28,usedPower:1}),{data:i}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"ownerToFacility",args:[t||n9],query:{enabled:!!t}}),s=r.maxMiners-r.currMiners,c=r.totalPower-r.usedPower,u=r.level>0;return e?u||n.hasFacility?(console.log("SpaceTab - Rendering with direct values:",{level:r.level,maxMiners:r.maxMiners,currMiners:r.currMiners,totalPower:r.totalPower,usedPower:r.usedPower,gameStateFacilityData:n.facilityData}),(0,o.jsxs)("div",{className:"bg-[#001420] p-3 rounded-md border-2 border-banana",children:[(0,o.jsx)("h3",{className:"font-press-start text-white text-xs mb-4",children:"FACILITY STATUS"}),n.isConnected?n.hasFacility?(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"font-press-start text-white text-xs",children:"SPACES LEFT:"}),(0,o.jsxs)("span",{className:"font-press-start text-banana text-xs",children:[s," SPACES"]})]}),(0,o.jsx)("div",{className:"w-full bg-blue-900 h-3 rounded-full overflow-hidden",children:(0,o.jsx)("div",{className:"bg-yellow-400 h-full",style:{width:`${r.currMiners/r.maxMiners*100}%`}})}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsxs)("span",{className:"font-press-start text-white text-[9px]",children:["USED: ",r.currMiners]}),(0,o.jsxs)("span",{className:"font-press-start text-white text-[9px]",children:["MAX: ",r.maxMiners]})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"font-press-start text-white text-xs",children:"GIGAWATTS AVAILABLE:"}),(0,o.jsxs)("span",{className:"font-press-start text-banana text-xs",children:[c," GW"]})]}),(0,o.jsx)("div",{className:"w-full bg-blue-900 h-3 rounded-full overflow-hidden",children:(0,o.jsx)("div",{className:"bg-yellow-400 h-full",style:{width:`${r.usedPower/r.totalPower*100}%`}})}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsxs)("span",{className:"font-press-start text-white text-[9px]",children:["USED: ",r.usedPower," GW"]}),(0,o.jsxs)("span",{className:"font-press-start text-white text-[9px]",children:["MAX: ",r.totalPower," GW"]})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("div",{className:"flex justify-between items-center",children:(0,o.jsx)("span",{className:"font-press-start text-white text-xs",children:"UPGRADE REQUIREMENTS:"})}),(0,o.jsxs)("div",{className:"pl-4 space-y-1",children:[(0,o.jsxs)("p",{className:"font-press-start text-white text-[9px]",children:["• LEVEL: ",r.level]}),(0,o.jsx)("p",{className:"font-press-start text-white text-[9px]",children:"Upgrade in $BIT"})]})]})]}):(0,o.jsxs)("div",{className:"text-center py-4",children:[(0,o.jsx)("p",{className:"font-press-start text-white text-xs",children:"NO FACILITY DETECTED"}),(0,o.jsx)("p",{className:"font-press-start text-white text-[9px] mt-2",children:"PURCHASE A FACILITY TO BEGIN MINING"})]}):(0,o.jsx)("div",{className:"text-center py-4",children:(0,o.jsx)("p",{className:"font-press-start text-white text-xs",children:"CONNECT WALLET TO VIEW FACILITY"})})]})):(0,o.jsxs)("div",{className:"flex h-full flex-col items-center justify-center",children:[(0,o.jsx)("div",{className:"pixel-text text-white",children:"You don't have a facility yet"}),(0,o.jsx)(i5,{className:"mt-4 pixel-text bg-banana text-black hover:bg-banana/90",onClick:n.purchaseFacility,children:"Buy a Facility"})]}):(0,o.jsx)("div",{className:"flex h-full flex-col items-center justify-center",children:(0,o.jsx)("div",{className:"pixel-text text-white",children:"Connect wallet to view your Space"})})}i1.displayName="Button",n(19587);let i3=({minedBit:e,onClaimRewards:t,isClaimingReward:n,miningRate:r})=>{let{address:a}=(0,p.F)(),[i,s]=(0,l.useState)("0"),[c,u]=(0,l.useState)(0),[d,f]=(0,l.useState)(!1),[h,g]=(0,l.useState)(!1),[y,b]=(0,l.useState)(!1),[x,v]=(0,l.useState)(!1),{data:w,isLoading:N,refetch:E}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"pendingRewards",args:[a||n9],query:{enabled:!!a,refetchInterval:15e3}});(0,l.useEffect)(()=>{if(w){console.log("Pending rewards:",w);let e=parseFloat((0,es.c)(w));if(u(e),e<1e-4)return void s(e.toFixed(6));b(!0);let t=Date.now(),n=0,r=()=>{let a,i=Date.now(),o=Math.min((i-t)/2e3,1),l=e*(e=>e*(2-e))(o);s(e>=1e3?l.toFixed(2):e>=100?l.toFixed(3):e>=10?l.toFixed(4):l.toFixed(5)),i-n>150&&o<.95&&(v(e=>!e),n=i),o<1?requestAnimationFrame(r):(b(!1),s(e.toFixed(e>=100?2:e>=10?3:5)))};r()}else s(N?"Loading...":"0")},[w,N]);let{writeContract:A,isPending:I,isSuccess:C,error:S}=eH();(0,l.useEffect)(()=>{if(C&&h){console.log("Claim transaction successful!"),f(!0),s("0"),u(0);let e=setTimeout(()=>{f(!1),g(!1),E()},3e3);return()=>clearTimeout(e)}S&&h&&(console.error("Claim transaction failed:",S),g(!1))},[C,S,h,E]);let j=async()=>{if(!n&&!I&&!h&&!N&&!(c<=0))try{console.log("Calling claimRewards contract function directly..."),g(!0),A({address:rL.QX.MAIN,abi:rL.aL,functionName:"claimRewards"}),t().catch(e=>{console.log("Secondary claim method failed (this is normal):",e)})}catch(e){console.error("Error claiming rewards:",e),g(!1)}},P=n||I||h||N,T=c>0;return(0,l.useEffect)(()=>{if(!P&&!d&&T&&r){let e=parseFloat(r);if(!isNaN(e)&&e>0){let t=setInterval(()=>{u(t=>t+e/86400),y||s(c.toFixed(c>=100?2:c>=10?3:5))},1e3);return()=>clearInterval(t)}}},[P,d,T,r,c,y]),(0,o.jsxs)("div",{className:"relative p-4 bg-dark-blue border-2 border-banana rounded-lg text-center font-press-start overflow-hidden",children:[d&&(0,o.jsx)("div",{className:"absolute inset-0 bg-banana bg-opacity-20 flex items-center justify-center z-10 animate-fade-out",children:(0,o.jsx)("div",{className:"bg-royal bg-opacity-90 px-4 py-2 rounded-lg border border-banana success-animation",children:(0,o.jsx)("span",{className:"text-banana text-lg",children:"CLAIM SUCCESSFUL!"})})}),(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("h3",{className:"text-banana text-base mb-2",children:"MINING REWARDS"}),(0,o.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,o.jsx)("span",{className:"text-white text-sm",children:"YOU HAVE MINED"}),(0,o.jsx)("span",{className:`text-banana font-bold ${T?"text-xl":"text-lg"} ${y||x?"animate-pulse-custom":T?"animate-pulse-slow":""}`,children:i}),(0,o.jsx)("span",{className:"text-white text-sm",children:"BIT"})]}),r&&(0,o.jsxs)("div",{className:"text-white text-xs mt-2 opacity-75 flex items-center justify-center",children:[(0,o.jsx)("span",{className:"mining-icon mr-1",children:"⛏️"})," Mining ",r," BIT per day"]})]}),(0,o.jsxs)("button",{onClick:j,disabled:P||c<=0,className:`w-full py-2 px-3 text-sm border-2 transition-all duration-200 ${T&&!P?"bg-banana text-royal hover:bg-opacity-90 border-royal relative overflow-hidden":"bg-dark-blue text-banana border-banana opacity-60"}`,children:[P?(0,o.jsxs)("span",{className:"flex items-center justify-center",children:[(0,o.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-banana",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"CLAIMING..."]}):(0,o.jsx)("span",{className:"relative z-10",children:"CLAIM MINED BIT"}),T&&!P&&(0,o.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,o.jsx)("div",{className:"shine-effect"})})]}),S&&(0,o.jsxs)("p",{className:"text-red-500 text-xs mt-2",children:["Error: ",S.message||"Transaction failed"]}),!T&&!P&&(0,o.jsx)("p",{className:"text-white text-xs mt-2 opacity-70",children:"Keep mining to earn rewards"})]})},i4=({isOpen:e,onClose:t,onPurchase:n,isPurchasing:r})=>e?(0,o.jsxs)(iA,{open:e,onClose:t,className:"relative z-50",children:[(0,o.jsx)("div",{className:"fixed inset-0 bg-black/70","aria-hidden":"true"}),(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,o.jsxs)(iA.Panel,{className:"relative bg-royal border-2 border-banana p-6 max-w-lg w-full m-4",children:[(0,o.jsx)(iA.Title,{className:"font-press-start text-xl text-banana mb-4 text-center",children:"UPGRADE SPACE"}),(0,o.jsx)("div",{className:"bg-[#0a3049] p-4 mb-6",children:(0,o.jsx)("p",{className:"font-press-start text-white text-sm text-center",children:"UPGRADE YOUR SPACE TO INCREASE POWER OUTPUT AND SPACE CAPACITY"})}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[(0,o.jsxs)("div",{className:"bg-[#0a3049] p-4",children:[(0,o.jsx)("h3",{className:"font-press-start text-banana text-sm mb-3 text-center",children:"CURRENT SPACE"}),(0,o.jsx)("div",{className:"relative w-32 h-32 mx-auto mb-4",children:(0,o.jsx)(u.default,{src:"/images/facilities/bedroom.png",alt:"Bedroom Mining Setup",fill:!0,className:"object-contain"})}),(0,o.jsxs)("div",{className:"space-y-2 font-press-start text-white text-xs",children:[(0,o.jsx)("p",{children:"YOUR APEROOM"}),(0,o.jsx)("p",{children:"MAX MINERS: 4"}),(0,o.jsx)("p",{children:"POWER: 28 GW"})]})]}),(0,o.jsxs)("div",{className:"bg-[#0a3049] p-4",children:[(0,o.jsx)("h3",{className:"font-press-start text-banana text-sm mb-3 text-center",children:"NEXT SPACE"}),(0,o.jsx)("div",{className:"flex justify-center items-center h-10 my-2",children:(0,o.jsx)("span",{className:"text-yellow-500 text-xl font-bold",children:"➡"})}),(0,o.jsx)("div",{className:"relative w-32 h-32 mx-auto mb-4",children:(0,o.jsx)(u.default,{src:"/images/facilities/treehouse.png",alt:"Treehouse Mining Setup",fill:!0,className:"object-contain"})}),(0,o.jsxs)("div",{className:"space-y-2 font-press-start text-white text-xs",children:[(0,o.jsx)("p",{children:"YOUR TREEHOUSE"}),(0,o.jsx)("p",{children:"MAX MINERS: 8"}),(0,o.jsx)("p",{children:"POWER: 168 GW"})]})]})]}),(0,o.jsxs)("div",{className:"text-center mb-6",children:[(0,o.jsx)("h4",{className:"font-press-start text-banana text-lg mb-1",children:"UPGRADE COST: 70 $BIT"}),(0,o.jsx)("p",{className:"text-red-500 font-press-start text-xs",children:"INSUFFICIENT $BIT BALANCE"})]}),(0,o.jsxs)("div",{className:"flex justify-center space-x-6",children:[(0,o.jsx)("button",{onClick:t,className:"font-press-start px-8 py-2 border-2 border-banana text-banana hover:bg-banana hover:text-royal transition-colors",children:"CANCEL"}),(0,o.jsx)("button",{onClick:n,disabled:r||!0,className:"font-press-start px-8 py-2 bg-[#444444] text-[#888888] transition-colors disabled:opacity-50",children:"UPGRADE NOW"})]})]})})]}):null,i8=e=>(t,n,r)=>{let a=r.subscribe;return r.subscribe=(e,t,n)=>{let i=e;if(t){let a=(null==n?void 0:n.equalityFn)||Object.is,s=e(r.getState());i=n=>{let r=e(n);if(!a(s,r)){let e=s;t(s=r,e)}},(null==n?void 0:n.fireImmediately)&&t(s,s)}return a(i)},e(t,n,r)},i9=e=>t=>{try{let n=e(t);if(n instanceof Promise)return n;return{then:e=>i9(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>i9(t)(e)}}},i7=(e,t)=>(n,r,a)=>{let i,s={storage:function(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var t;let r=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=n.getItem(e))?t:null;return a instanceof Promise?a.then(r):r(a)},setItem:(e,t)=>n.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>n.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1,l=new Set,c=new Set,u=s.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...e)},r,a);let d=()=>{let e=s.partialize({...r()});return u.setItem(s.name,{state:e,version:s.version})},f=a.setState;a.setState=(e,t)=>{f(e,t),d()};let h=e((...e)=>{n(...e),d()},r,a);a.getInitialState=()=>h;let m=()=>{var e,t;if(!u)return;o=!1,l.forEach(e=>{var t;return e(null!=(t=r())?t:h)});let a=(null==(t=s.onRehydrateStorage)?void 0:t.call(s,null!=(e=r())?e:h))||void 0;return i9(u.getItem.bind(u))(s.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===s.version)return[!1,e.state];else{if(s.migrate)return[!0,s.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[a,o]=e;if(n(i=s.merge(o,null!=(t=r())?t:h),!0),a)return d()}).then(()=>{null==a||a(i,void 0),i=r(),o=!0,c.forEach(e=>e(i))}).catch(e=>{null==a||a(void 0,e)})};return a.persist={setOptions:e=>{s={...s,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},s.skipHydration||m(),i||h},se=e=>{let t,n=new Set,r=(e,r)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach(n=>n(t,e))}},a=()=>t,i={setState:r,getState:a,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e))},s=t=e(r,a,i);return i},st=e=>e?se(e):se;function sn(e,{errorInstance:t=Error("timed out"),timeout:n,signal:r}){return new Promise((a,i)=>{(async()=>{let s;try{let o=new AbortController;n>0&&(s=setTimeout(()=>{r?o.abort():i(t)},n)),a(await e({signal:o?.signal||null}))}catch(e){e?.name==="AbortError"&&i(t),i(e)}finally{clearTimeout(s)}})()})}class sr extends eF.C{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}function sa(e={}){let t,n,r,a,{shimDisconnect:i=!0,unstable_shimAsyncInject:s}=e;function o(){let t=e.target;if("function"==typeof t){let e=t();if(e)return e}return"object"==typeof t?t:"string"==typeof t?{...si[t]??{id:t,name:`${t[0].toUpperCase()}${t.slice(1)}`,provider:`is${t[0].toUpperCase()}${t.slice(1)}`}}:{id:"injected",name:"Injected",provider:e=>e?.ethereum}}return l=>({get icon(){return o().icon},get id(){return o().id},get name(){return o().name},get supportsSimulation(){return!0},type:sa.type,async setup(){let n=await this.getProvider();n?.on&&e.target&&(r||(r=this.onConnect.bind(this),n.on("connect",r)),t||(t=this.onAccountsChanged.bind(this),n.on("accountsChanged",t)))},async connect({chainId:s,isReconnecting:o}={}){let c=await this.getProvider();if(!c)throw new sr;let u=[];if(o)u=await this.getAccounts().catch(()=>[]);else if(i)try{let e=await c.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});(u=e[0]?.caveats?.[0]?.value?.map(e=>(0,A.b)(e))).length>0&&(u=await this.getAccounts())}catch(e){if(e.code===eP.vx.code)throw new eP.vx(e);if(e.code===eP.qZ.code)throw e}try{u?.length||o||(u=(await c.request({method:"eth_requestAccounts"})).map(e=>(0,A.b)(e))),r&&(c.removeListener("connect",r),r=void 0),t||(t=this.onAccountsChanged.bind(this),c.on("accountsChanged",t)),n||(n=this.onChainChanged.bind(this),c.on("chainChanged",n)),a||(a=this.onDisconnect.bind(this),c.on("disconnect",a));let d=await this.getChainId();if(s&&d!==s){let e=await this.switchChain({chainId:s}).catch(e=>{if(e.code===eP.vx.code)throw e;return{id:d}});d=e?.id??d}return i&&await l.storage?.removeItem(`${this.id}.disconnected`),e.target||await l.storage?.setItem("injected.connected",!0),{accounts:u,chainId:d}}catch(e){if(e.code===eP.vx.code)throw new eP.vx(e);if(e.code===eP.qZ.code)throw new eP.qZ(e);throw e}},async disconnect(){let t=await this.getProvider();if(!t)throw new sr;n&&(t.removeListener("chainChanged",n),n=void 0),a&&(t.removeListener("disconnect",a),a=void 0),r||(r=this.onConnect.bind(this),t.on("connect",r));try{await sn(()=>t.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}i&&await l.storage?.setItem(`${this.id}.disconnected`,!0),e.target||await l.storage?.removeItem("injected.connected")},async getAccounts(){let e=await this.getProvider();if(!e)throw new sr;return(await e.request({method:"eth_accounts"})).map(e=>(0,A.b)(e))},async getChainId(){let e=await this.getProvider();if(!e)throw new sr;return Number(await e.request({method:"eth_chainId"}))},async getProvider(){let e;if("undefined"==typeof window)return;let t=o();return(e="function"==typeof t.provider?t.provider(window):"string"==typeof t.provider?ss(window,t.provider):t.provider)&&!e.removeListener&&("off"in e&&"function"==typeof e.off?e.removeListener=e.off:e.removeListener=()=>{}),e},async isAuthorized(){try{if(i&&await l.storage?.getItem(`${this.id}.disconnected`)||!e.target&&!await l.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(void 0!==s&&!1!==s){let e=async()=>("undefined"!=typeof window&&window.removeEventListener("ethereum#initialized",e),!!await this.getProvider()),t="number"==typeof s?s:1e3;if(await Promise.race([..."undefined"!=typeof window?[new Promise(t=>window.addEventListener("ethereum#initialized",()=>t(e()),{once:!0}))]:[],new Promise(n=>setTimeout(()=>n(e()),t))]))return!0}throw new sr}return!!(await eR(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:e,chainId:t}){let n=await this.getProvider();if(!n)throw new sr;let r=l.chains.find(e=>e.id===t);if(!r)throw new eP.ch(new ek);let a=new Promise(e=>{let n=r=>{"chainId"in r&&r.chainId===t&&(l.emitter.off("change",n),e())};l.emitter.on("change",n)});try{return await Promise.all([n.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,j.cK)(t)}]}).then(async()=>{await this.getChainId()===t&&l.emitter.emit("change",{chainId:t})}),a]),r}catch(i){if(4902===i.code||i?.data?.originalError?.code===4902)try{let i,s,{default:o,...c}=r.blockExplorers??{};e?.blockExplorerUrls?i=e.blockExplorerUrls:o&&(i=[o.url,...Object.values(c).map(e=>e.url)]),s=e?.rpcUrls?.length?e.rpcUrls:[r.rpcUrls.default?.http[0]??""];let u={blockExplorerUrls:i,chainId:(0,j.cK)(t),chainName:e?.chainName??r.name,iconUrls:e?.iconUrls,nativeCurrency:e?.nativeCurrency??r.nativeCurrency,rpcUrls:s};return await Promise.all([n.request({method:"wallet_addEthereumChain",params:[u]}).then(async()=>{if(await this.getChainId()===t)l.emitter.emit("change",{chainId:t});else throw new eP.vx(Error("User rejected switch after adding network."))}),a]),r}catch(e){throw new eP.vx(e)}if(i.code===eP.vx.code)throw new eP.vx(i);throw new eP.ch(i)}},async onAccountsChanged(e){if(0===e.length)this.onDisconnect();else if(l.emitter.listenerCount("connect")){let e=(await this.getChainId()).toString();this.onConnect({chainId:e}),i&&await l.storage?.removeItem(`${this.id}.disconnected`)}else l.emitter.emit("change",{accounts:e.map(e=>(0,A.b)(e))})},onChainChanged(e){let t=Number(e);l.emitter.emit("change",{chainId:t})},async onConnect(e){let i=await this.getAccounts();if(0===i.length)return;let s=Number(e.chainId);l.emitter.emit("connect",{accounts:i,chainId:s});let o=await this.getProvider();o&&(r&&(o.removeListener("connect",r),r=void 0),t||(t=this.onAccountsChanged.bind(this),o.on("accountsChanged",t)),n||(n=this.onChainChanged.bind(this),o.on("chainChanged",n)),a||(a=this.onDisconnect.bind(this),o.on("disconnect",a)))},async onDisconnect(e){let t=await this.getProvider();e&&1013===e.code&&t&&(await this.getAccounts()).length||(l.emitter.emit("disconnect"),t&&(n&&(t.removeListener("chainChanged",n),n=void 0),a&&(t.removeListener("disconnect",a),a=void 0),r||(r=this.onConnect.bind(this),t.on("connect",r))))}})}eF.C,sa.type="injected";let si={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider:e=>e?.coinbaseWalletExtension?e.coinbaseWalletExtension:ss(e,"isCoinbaseWallet")},metaMask:{id:"metaMask",name:"MetaMask",provider:e=>ss(e,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;for(let t of["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"])if(e[t])return!1;return!0})},phantom:{id:"phantom",name:"Phantom",provider:e=>e?.phantom?.ethereum?e.phantom?.ethereum:ss(e,"isPhantom")}};function ss(e,t){function n(e){return"function"==typeof t?t(e):"string"!=typeof t||e[t]}let r=e.ethereum;return r?.providers?r.providers.find(e=>n(e)):r&&n(r)?r:void 0}var so=n(52910);class sl{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new so.b})}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,...t){let n=t[0];this._emitter.emit(e,{uid:this.uid,...n})}listenerCount(e){return this._emitter.listenerCount(e)}}function sc(e,t){return JSON.parse(e,(e,n)=>{let r=n;return r?.__type==="bigint"&&(r=BigInt(r.value)),r?.__type==="Map"&&(r=new Map(r.value)),t?.(e,r)??r})}function su(e,t){return e.slice(0,t).join(".")||"."}function sd(e,t){let{length:n}=e;for(let r=0;r<n;++r)if(e[r]===t)return r+1;return 0}function sf(e,t,n,r){return JSON.stringify(e,function(e,t){let n="function"==typeof e,r="function"==typeof t,a=[],i=[];return function(s,o){if("object"==typeof o)if(a.length){let e=sd(a,this);0===e?a[a.length]=this:(a.splice(e),i.splice(e)),i[i.length]=s;let n=sd(a,o);if(0!==n)return r?t.call(this,s,o,su(i,n)):`[ref=${su(i,n)}]`}else a[0]=o,i[0]=s;return n?e.call(this,s,o):o}}((e,n)=>{let r=n;return"bigint"==typeof r&&(r={__type:"bigint",value:n.toString()}),r instanceof Map&&(r={__type:"Map",value:Array.from(n.entries())}),t?.(e,r)??r},r),n??void 0)}let sh={getItem:()=>null,setItem:()=>{},removeItem:()=>{}},sm=256;var sp=n(36188);class sg extends b.C{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}var sy=n(37191);let sb={current:0,take(){return this.current++},reset(){this.current=0}};function sx(e,t={}){let{batch:n,fetchOptions:r,key:a="http",methods:i,name:s="HTTP JSON-RPC",onFetchRequest:o,onFetchResponse:l,retryDelay:c,raw:u}=t;return({chain:d,retryCount:f,timeout:h})=>{let{batchSize:m=1e3,wait:p=0}="object"==typeof n?n:{},g=t.retryCount??f,y=h??t.timeout??1e4,b=e||d?.rpcUrls.default.http[0];if(!b)throw new sg;let x=function(e,t={}){return{async request(n){let{body:r,onRequest:a=t.onRequest,onResponse:i=t.onResponse,timeout:s=t.timeout??1e4}=n,o={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:l,method:c,signal:u}=o;try{let t,n=await sn(async({signal:t})=>{let n={...o,body:Array.isArray(r)?(0,eB.A)(r.map(e=>({jsonrpc:"2.0",id:e.id??sb.take(),...e}))):(0,eB.A)({jsonrpc:"2.0",id:r.id??sb.take(),...r}),headers:{"Content-Type":"application/json",...l},method:c||"POST",signal:u||(s>0?t:null)},i=new Request(e,n),d=await a?.(i,n)??{...n,url:e};return await fetch(d.url??e,d)},{errorInstance:new ej.MU({body:r,url:e}),timeout:s,signal:!0});if(i&&await i(n),n.headers.get("Content-Type")?.startsWith("application/json"))t=await n.json();else{t=await n.text();try{t=JSON.parse(t||"{}")}catch(e){if(n.ok)throw e;t={error:t}}}if(!n.ok)throw new ej.Ci({body:r,details:(0,eB.A)(t.error)||n.statusText,headers:n.headers,status:n.status,url:e});return t}catch(t){if(t instanceof ej.Ci||t instanceof ej.MU)throw t;throw new ej.Ci({body:r,cause:t,url:e})}}}}(b,{fetchOptions:r,onRequest:o,onResponse:l,timeout:y});return eO({key:a,methods:i,name:s,async request({method:e,params:t}){let r={method:e,params:t},{schedule:a}=(0,sy.u)({id:b,wait:p,shouldSplitBatch:e=>e.length>m,fn:e=>x.request({body:e}),sort:(e,t)=>e.id-t.id}),i=async e=>n?a(e):[await x.request({body:e})],[{error:s,result:o}]=await i(r);if(u)return{error:s,result:o};if(s)throw new ej.J8({body:r,error:s,url:b});return o},retryCount:g,retryDelay:c,timeout:y,type:"http"},{fetchOptions:r,url:b})}}var sv=n(31212),sw=n(61489),sN=n(33465),sE=n(35536),sA=class extends sE.Q{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){let r=t.queryKey,a=t.queryHash??(0,sv.F$)(r,t),i=this.get(a);return i||(i=new sw.X({client:e,queryKey:r,queryHash:a,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){sN.jG.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,sv.MK)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,sv.MK)(e,t)):t}notify(e){sN.jG.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){sN.jG.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){sN.jG.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},sI=n(65406),sC=class extends sE.Q{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#n=new Map,this.#r=0}#t;#n;#r;build(e,t,n){let r=new sI.s({mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#t.add(e);let t=sS(e);if("string"==typeof t){let n=this.#n.get(t);n?n.push(e):this.#n.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){let t=sS(e);if("string"==typeof t){let n=this.#n.get(t);if(n)if(n.length>1){let t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&this.#n.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=sS(e);if("string"!=typeof t)return!0;{let n=this.#n.get(t),r=n?.find(e=>"pending"===e.state.status);return!r||r===e}}runNext(e){let t=sS(e);if("string"!=typeof t)return Promise.resolve();{let n=this.#n.get(t)?.find(t=>t!==e&&t.state.isPaused);return n?.continue()??Promise.resolve()}}clear(){sN.jG.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#n.clear()})}getAll(){return Array.from(this.#t)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,sv.nJ)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,sv.nJ)(e,t))}notify(e){sN.jG.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return sN.jG.batch(()=>Promise.all(e.map(e=>e.continue().catch(sv.lQ))))}};function sS(e){return e.options.scope?.id}var sj=n(39850),sP=n(22115);function sT(e){return{onFetch:(t,n)=>{let r=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],s=t.state.data?.pageParams||[],o={pages:[],pageParams:[]},l=0,c=async()=>{let n=!1,c=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",()=>{n=!0}),t.signal)})},u=(0,sv.ZM)(t.options,t.fetchOptions),d=async(e,r,a)=>{if(n)return Promise.reject();if(null==r&&e.pages.length)return Promise.resolve(e);let i={client:t.client,queryKey:t.queryKey,pageParam:r,direction:a?"backward":"forward",meta:t.options.meta};c(i);let s=await u(i),{maxPages:o}=t.options,l=a?sv.ZZ:sv.y9;return{pages:l(e.pages,s,o),pageParams:l(e.pageParams,r,o)}};if(a&&i.length){let e="backward"===a,t={pages:i,pageParams:s},n=(e?function(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}:sM)(r,t);o=await d(t,n,e)}else{let t=e??i.length;do{let e=0===l?s[0]??r.initialPageParam:sM(r,o);if(l>0&&null==e)break;o=await d(o,e),l++}while(l<t)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=c}}}function sM(e,{pages:t,pageParams:n}){let r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}var sR=class{#a;#i;#s;#o;#l;#c;#u;#d;constructor(e={}){this.#a=e.queryCache||new sA,this.#i=e.mutationCache||new sC,this.#s=e.defaultOptions||{},this.#o=new Map,this.#l=new Map,this.#c=0}mount(){this.#c++,1===this.#c&&(this.#u=sj.m.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#a.onFocus())}),this.#d=sP.t.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#a.onOnline())}))}unmount(){this.#c--,0===this.#c&&(this.#u?.(),this.#u=void 0,this.#d?.(),this.#d=void 0)}isFetching(e){return this.#a.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#i.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#a.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),n=this.#a.build(this,t),r=n.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime((0,sv.d2)(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#a.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){let r=this.defaultQueryOptions({queryKey:e}),a=this.#a.get(r.queryHash),i=a?.state.data,s=(0,sv.Zw)(t,i);if(void 0!==s)return this.#a.build(this,r).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return sN.jG.batch(()=>this.#a.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#a.get(t.queryHash)?.state}removeQueries(e){let t=this.#a;sN.jG.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let n=this.#a;return sN.jG.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){let n={revert:!0,...t};return Promise.all(sN.jG.batch(()=>this.#a.findAll(e).map(e=>e.cancel(n)))).then(sv.lQ).catch(sv.lQ)}invalidateQueries(e,t={}){return sN.jG.batch(()=>(this.#a.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,t={}){let n={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(sN.jG.batch(()=>this.#a.findAll(e).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(sv.lQ)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(sv.lQ)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let n=this.#a.build(this,t);return n.isStaleByTime((0,sv.d2)(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(sv.lQ).catch(sv.lQ)}fetchInfiniteQuery(e){return e.behavior=sT(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(sv.lQ).catch(sv.lQ)}ensureInfiniteQueryData(e){return e.behavior=sT(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return sP.t.isOnline()?this.#i.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#a}getMutationCache(){return this.#i}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#o.set((0,sv.EN)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#o.values()],n={};return t.forEach(t=>{(0,sv.Cp)(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){this.#l.set((0,sv.EN)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#l.values()],n={};return t.forEach(t=>{(0,sv.Cp)(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,sv.F$)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===sv.hT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#a.clear(),this.#i.clear()}};function sB(e){let t,r,a,i,s,o,l,c,u=e.isNewChainsStale??!0;return d=>({id:"walletConnect",name:"WalletConnect",type:sB.type,async setup(){let e=await this.getProvider().catch(()=>null);e&&(s||(s=this.onConnect.bind(this),e.on("connect",s)),l||(l=this.onSessionDelete.bind(this),e.on("session_delete",l)))},async connect({chainId:e,...t}={}){try{let n=await this.getProvider();if(!n)throw new sr;o||(o=this.onDisplayUri,n.on("display_uri",o));let r=e;if(!r){let e=await d.storage?.getItem("state")??{};r=d.chains.some(t=>t.id===e.chainId)?e.chainId:d.chains[0]?.id}if(!r)throw Error("No chains found on connector.");let u=await this.isChainsStale();if(n.session&&u&&await n.disconnect(),!n.session||u){let e=d.chains.filter(e=>e.id!==r).map(e=>e.id);await n.connect({optionalChains:[r,...e],..."pairingTopic"in t?{pairingTopic:t.pairingTopic}:{}}),this.setRequestedChainsIds(d.chains.map(e=>e.id))}let f=(await n.enable()).map(e=>(0,A.b)(e)),h=await this.getChainId();return o&&(n.removeListener("display_uri",o),o=void 0),s&&(n.removeListener("connect",s),s=void 0),a||(a=this.onAccountsChanged.bind(this),n.on("accountsChanged",a)),i||(i=this.onChainChanged.bind(this),n.on("chainChanged",i)),c||(c=this.onDisconnect.bind(this),n.on("disconnect",c)),l||(l=this.onSessionDelete.bind(this),n.on("session_delete",l)),{accounts:f,chainId:h}}catch(e){if(/(user rejected|connection request reset)/i.test(e?.message))throw new eP.vx(e);throw e}},async disconnect(){let e=await this.getProvider();try{await e?.disconnect()}catch(e){if(!/No matching key/i.test(e.message))throw e}finally{i&&(e?.removeListener("chainChanged",i),i=void 0),c&&(e?.removeListener("disconnect",c),c=void 0),s||(s=this.onConnect.bind(this),e?.on("connect",s)),a&&(e?.removeListener("accountsChanged",a),a=void 0),l&&(e?.removeListener("session_delete",l),l=void 0),this.setRequestedChainsIds([])}},async getAccounts(){return(await this.getProvider()).accounts.map(e=>(0,A.b)(e))},async getProvider({chainId:a}={}){async function i(){let t=d.chains.map(e=>e.id);if(!t.length)return;let{EthereumProvider:r}=await Promise.all([n.e(399),n.e(569),n.e(652)]).then(n.bind(n,2652));return await r.init({...e,disableProviderPing:!0,optionalChains:t,projectId:e.projectId,rpcMap:Object.fromEntries(d.chains.map(e=>{let[t]=function(e){let{chain:t}=e,n=t.rpcUrls.default.http[0];if(!e.transports)return[n];let r=e.transports?.[t.id]?.({chain:t});return(r?.value?.transports||[r]).map(({value:e})=>e?.url||n)}({chain:e,transports:d.transports});return[e.id,t]})),showQrModal:e.showQrModal??!0})}return t||(r||(r=i()),t=await r,t?.events.setMaxListeners(Number.POSITIVE_INFINITY)),a&&await this.switchChain?.({chainId:a}),t},async getChainId(){return(await this.getProvider()).chainId},async isAuthorized(){try{let[e,t]=await Promise.all([this.getAccounts(),this.getProvider()]);if(!e.length)return!1;if(await this.isChainsStale()&&t.session)return await t.disconnect().catch(()=>{}),!1;return!0}catch{return!1}},async switchChain({addEthereumChainParameter:e,chainId:t}){let n=await this.getProvider();if(!n)throw new sr;let r=d.chains.find(e=>e.id===t);if(!r)throw new eP.ch(new ek);try{await Promise.all([new Promise(e=>{let n=({chainId:r})=>{r===t&&(d.emitter.off("change",n),e())};d.emitter.on("change",n)}),n.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,j.cK)(t)}]})]);let e=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...e,t]),r}catch(a){if(/(user rejected)/i.test(a.message))throw new eP.vx(a);try{let a,i;a=e?.blockExplorerUrls?e.blockExplorerUrls:r.blockExplorers?.default.url?[r.blockExplorers?.default.url]:[],i=e?.rpcUrls?.length?e.rpcUrls:[...r.rpcUrls.default.http];let s={blockExplorerUrls:a,chainId:(0,j.cK)(t),chainName:e?.chainName??r.name,iconUrls:e?.iconUrls,nativeCurrency:e?.nativeCurrency??r.nativeCurrency,rpcUrls:i};await n.request({method:"wallet_addEthereumChain",params:[s]});let o=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...o,t]),r}catch(e){throw new eP.vx(e)}}},onAccountsChanged(e){0===e.length?this.onDisconnect():d.emitter.emit("change",{accounts:e.map(e=>(0,A.b)(e))})},onChainChanged(e){let t=Number(e);d.emitter.emit("change",{chainId:t})},async onConnect(e){let t=Number(e.chainId),n=await this.getAccounts();d.emitter.emit("connect",{accounts:n,chainId:t})},async onDisconnect(e){this.setRequestedChainsIds([]),d.emitter.emit("disconnect");let t=await this.getProvider();a&&(t.removeListener("accountsChanged",a),a=void 0),i&&(t.removeListener("chainChanged",i),i=void 0),c&&(t.removeListener("disconnect",c),c=void 0),l&&(t.removeListener("session_delete",l),l=void 0),s||(s=this.onConnect.bind(this),t.on("connect",s))},onDisplayUri(e){d.emitter.emit("message",{type:"display_uri",data:e})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds:()=>t?t.session?.namespaces.eip155?.accounts?.map(e=>Number.parseInt(e.split(":")[1]||""))??[]:[],async getRequestedChainsIds(){return await d.storage?.getItem(this.requestedChainsStorageKey)??[]},async isChainsStale(){if(!u)return!1;let e=d.chains.map(e=>e.id),t=this.getNamespaceChainsIds();if(t.length&&!t.some(t=>e.includes(t)))return!1;let n=await this.getRequestedChainsIds();return!e.every(e=>n.includes(e))},async setRequestedChainsIds(e){await d.storage?.setItem(this.requestedChainsStorageKey,e)},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}function sO(e={}){var t,r;let a,i,s,o,l,c,u,d,f;return"3"===e.version||e.headlessMode?(t=e,e=>({id:"coinbaseWalletSDK",name:"Coinbase Wallet",type:sO.type,async connect({chainId:e}={}){try{let t=await this.getProvider(),n=(await t.request({method:"eth_requestAccounts"})).map(e=>(0,A.b)(e));s||(s=this.onAccountsChanged.bind(this),t.on("accountsChanged",s)),o||(o=this.onChainChanged.bind(this),t.on("chainChanged",o)),l||(l=this.onDisconnect.bind(this),t.on("disconnect",l));let r=await this.getChainId();if(e&&r!==e){let t=await this.switchChain({chainId:e}).catch(e=>{if(e.code===eP.vx.code)throw e;return{id:r}});r=t?.id??r}return{accounts:n,chainId:r}}catch(e){if(/(user closed modal|accounts received is empty|user denied account)/i.test(e.message))throw new eP.vx(e);throw e}},async disconnect(){let e=await this.getProvider();s&&(e.removeListener("accountsChanged",s),s=void 0),o&&(e.removeListener("chainChanged",o),o=void 0),l&&(e.removeListener("disconnect",l),l=void 0),e.disconnect(),e.close()},async getAccounts(){let e=await this.getProvider();return(await e.request({method:"eth_accounts"})).map(e=>(0,A.b)(e))},async getChainId(){let e=await this.getProvider();return Number(await e.request({method:"eth_chainId"}))},async getProvider(){if(!i){a=new(await (async()=>{let{default:e}=await n.e(554).then(n.t.bind(n,58554,19));return"function"!=typeof e&&"function"==typeof e.default?e.default:e})())({...t,reloadOnDisconnect:!1});let r=a.walletExtension?.getChainId(),s=e.chains.find(e=>t.chainId?e.id===t.chainId:e.id===r)||e.chains[0],o=t.chainId||s?.id,l=t.jsonRpcUrl||s?.rpcUrls.default.http[0];i=a.makeWeb3Provider(l,o)}return i},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({addEthereumChainParameter:t,chainId:n}){let r=e.chains.find(e=>e.id===n);if(!r)throw new eP.ch(new ek);let a=await this.getProvider();try{return await a.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,j.cK)(r.id)}]}),r}catch(e){if(4902===e.code)try{let e,i;e=t?.blockExplorerUrls?t.blockExplorerUrls:r.blockExplorers?.default.url?[r.blockExplorers?.default.url]:[],i=t?.rpcUrls?.length?t.rpcUrls:[r.rpcUrls.default?.http[0]??""];let s={blockExplorerUrls:e,chainId:(0,j.cK)(n),chainName:t?.chainName??r.name,iconUrls:t?.iconUrls,nativeCurrency:t?.nativeCurrency??r.nativeCurrency,rpcUrls:i};return await a.request({method:"wallet_addEthereumChain",params:[s]}),r}catch(e){throw new eP.vx(e)}throw new eP.ch(e)}},onAccountsChanged(t){0===t.length?this.onDisconnect():e.emitter.emit("change",{accounts:t.map(e=>(0,A.b)(e))})},onChainChanged(t){let n=Number(t);e.emitter.emit("change",{chainId:n})},async onDisconnect(t){e.emitter.emit("disconnect");let n=await this.getProvider();s&&(n.removeListener("accountsChanged",s),s=void 0),o&&(n.removeListener("chainChanged",o),o=void 0),l&&(n.removeListener("disconnect",l),l=void 0)}})):(r=e,e=>({id:"coinbaseWalletSDK",name:"Coinbase Wallet",rdns:"com.coinbase.wallet",type:sO.type,async connect({chainId:e,...t}={}){try{let n=await this.getProvider(),r=(await n.request({method:"eth_requestAccounts",params:"instantOnboarding"in t&&t.instantOnboarding?[{onboarding:"instant"}]:[]})).map(e=>(0,A.b)(e));u||(u=this.onAccountsChanged.bind(this),n.on("accountsChanged",u)),d||(d=this.onChainChanged.bind(this),n.on("chainChanged",d)),f||(f=this.onDisconnect.bind(this),n.on("disconnect",f));let a=await this.getChainId();if(e&&a!==e){let t=await this.switchChain({chainId:e}).catch(e=>{if(e.code===eP.vx.code)throw e;return{id:a}});a=t?.id??a}return{accounts:r,chainId:a}}catch(e){if(/(user closed modal|accounts received is empty|user denied account|request rejected)/i.test(e.message))throw new eP.vx(e);throw e}},async disconnect(){let e=await this.getProvider();u&&(e.removeListener("accountsChanged",u),u=void 0),d&&(e.removeListener("chainChanged",d),d=void 0),f&&(e.removeListener("disconnect",f),f=void 0),e.disconnect(),e.close?.()},async getAccounts(){let e=await this.getProvider();return(await e.request({method:"eth_accounts"})).map(e=>(0,A.b)(e))},async getChainId(){let e=await this.getProvider();return Number(await e.request({method:"eth_chainId"}))},async getProvider(){if(!c){let t="string"==typeof r.preference?{options:r.preference}:{...r.preference,options:r.preference?.options??"all"},{createCoinbaseWalletSDK:a}=await n.e(528).then(n.bind(n,41528));c=a({...r,appChainIds:e.chains.map(e=>e.id),preference:t}).getProvider()}return c},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({addEthereumChainParameter:t,chainId:n}){let r=e.chains.find(e=>e.id===n);if(!r)throw new eP.ch(new ek);let a=await this.getProvider();try{return await a.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,j.cK)(r.id)}]}),r}catch(e){if(4902===e.code)try{let e,i;e=t?.blockExplorerUrls?t.blockExplorerUrls:r.blockExplorers?.default.url?[r.blockExplorers?.default.url]:[],i=t?.rpcUrls?.length?t.rpcUrls:[r.rpcUrls.default?.http[0]??""];let s={blockExplorerUrls:e,chainId:(0,j.cK)(n),chainName:t?.chainName??r.name,iconUrls:t?.iconUrls,nativeCurrency:t?.nativeCurrency??r.nativeCurrency,rpcUrls:i};return await a.request({method:"wallet_addEthereumChain",params:[s]}),r}catch(e){throw new eP.vx(e)}throw new eP.ch(e)}},onAccountsChanged(t){0===t.length?this.onDisconnect():e.emitter.emit("change",{accounts:t.map(e=>(0,A.b)(e))})},onChainChanged(t){let n=Number(t);e.emitter.emit("change",{chainId:n})},async onDisconnect(t){e.emitter.emit("disconnect");let n=await this.getProvider();u&&(n.removeListener("accountsChanged",u),u=void 0),d&&(n.removeListener("chainChanged",d),d=void 0),f&&(n.removeListener("disconnect",f),f=void 0)}}))}sB.type="walletConnect",sO.type="coinbaseWallet";let sF={formatters:void 0,fees:void 0,serializers:void 0,id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:0x125db65},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:0xdb04c1}}},sk={id:33139,name:"ApeChain",network:"apechain",nativeCurrency:{decimals:18,name:"ApeCoin",symbol:"APE"},rpcUrls:{public:{http:["https://apechain.calderachain.xyz/http"]},default:{http:["https://apechain.calderachain.xyz/http"]}},blockExplorers:{etherscan:{name:"ApeScan",url:"https://apescan.io"},default:{name:"ApeScan",url:"https://apescan.io"}}};!function(e){let t,{multiInjectedProviderDiscovery:n=!0,storage:r=function(e){let{deserialize:t=sc,key:n="wagmi",serialize:r=sf,storage:a=sh}=e;function i(e){return e instanceof Promise?e.then(e=>e).catch(()=>null):e}return{...a,key:n,async getItem(e,r){let s=a.getItem(`${n}.${e}`),o=await i(s);return o?t(o)??null:r??null},async setItem(e,t){let s=`${n}.${e}`;null===t?await i(a.removeItem(s)):await i(a.setItem(s,r(t)))},async removeItem(e){await i(a.removeItem(`${n}.${e}`))}}}({storage:function(){let e="undefined"!=typeof window&&window.localStorage?window.localStorage:sh;return{getItem:t=>e.getItem(t),removeItem(t){e.removeItem(t)},setItem(t,n){try{e.setItem(t,n)}catch{}}}}()}),syncConnectedChain:i=!0,ssr:s=!1,...o}=e,l="undefined"!=typeof window&&n?function(){let e=new Set,t=[],n=()=>(function(e){if("undefined"==typeof window)return;let t=t=>e(t.detail);return window.addEventListener("eip6963:announceProvider",t),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",t)})(n=>{t.some(({info:e})=>e.uuid===n.info.uuid)||(t=[...t,n],e.forEach(e=>e(t,{added:[n]})))}),r=n();return{_listeners:()=>e,clear(){e.forEach(e=>e([],{removed:[...t]})),t=[]},destroy(){this.clear(),e.clear(),r?.()},findProvider:({rdns:e})=>t.find(t=>t.info.rdns===e),getProviders:()=>t,reset(){this.clear(),r?.(),r=n()},subscribe:(n,{emitImmediately:r}={})=>(e.add(n),r&&n(t,{added:t}),()=>e.delete(n))}}():void 0,c=st(()=>o.chains),u=st(()=>{let e=[],t=new Set;for(let n of o.connectors??[]){let r=d(n);if(e.push(r),!s&&r.rdns)for(let e of"string"==typeof r.rdns?[r.rdns]:r.rdns)t.add(e)}if(!s&&l)for(let n of l.getProviders())t.has(n.info.rdns)||e.push(d(f(n)));return e});function d(e){let t=new sl(function(e=11){if(!a||sm+e>512){a="",sm=0;for(let e=0;e<256;e++)a+=(256+256*Math.random()|0).toString(16).substring(1)}return a.substring(sm,sm+++e)}()),n={...e({emitter:t,chains:c.getState(),storage:r,transports:o.transports}),emitter:t,uid:t.uid};return t.on("connect",b),n.setup?.(),n}function f(e){let{info:t}=e,n=e.provider;return sa({target:{...t,id:t.rdns,provider:n}})}function h(){return{chainId:c.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let m="0.0.0-canary-";t=sp.r.startsWith(m)?Number.parseInt(sp.r.replace(m,"")):Number.parseInt(sp.r.split(".")[0]??"0");let p=st(i8(r?i7(h,{migrate(e,n){if(n===t)return e;let r=h(),a=g(e,r.chainId);return{...r,chainId:a}},name:"store",partialize:e=>({connections:{__type:"Map",value:Array.from(e.connections.entries()).map(([e,t])=>{let{id:n,name:r,type:a,uid:i}=t.connector;return[e,{...t,connector:{id:n,name:r,type:a,uid:i}}]})},chainId:e.chainId,current:e.current}),merge(e,t){"object"==typeof e&&e&&"status"in e&&delete e.status;let n=g(e,t.chainId);return{...t,...e,chainId:n}},skipHydration:s,storage:r,version:t}):h));function g(e,t){return e&&"object"==typeof e&&"chainId"in e&&"number"==typeof e.chainId&&c.getState().some(t=>t.id===e.chainId)?e.chainId:t}function y(e){p.setState(t=>{let n=t.connections.get(e.uid);return n?{...t,connections:new Map(t.connections).set(e.uid,{accounts:e.accounts??n.accounts,chainId:e.chainId??n.chainId,connector:n.connector})}:t})}function b(e){"connecting"!==p.getState().status&&"reconnecting"!==p.getState().status&&p.setState(t=>{let n=u.getState().find(t=>t.uid===e.uid);return n?(n.emitter.listenerCount("connect")&&n.emitter.off("connect",y),n.emitter.listenerCount("change")||n.emitter.on("change",y),n.emitter.listenerCount("disconnect")||n.emitter.on("disconnect",x),{...t,connections:new Map(t.connections).set(e.uid,{accounts:e.accounts,chainId:e.chainId,connector:n}),current:e.uid,status:"connected"}):t})}function x(e){p.setState(t=>{let n=t.connections.get(e.uid);if(n){let e=n.connector;e.emitter.listenerCount("change")&&n.connector.emitter.off("change",y),e.emitter.listenerCount("disconnect")&&n.connector.emitter.off("disconnect",x),e.emitter.listenerCount("connect")||n.connector.emitter.on("connect",b)}if(t.connections.delete(e.uid),0===t.connections.size)return{...t,connections:new Map,current:null,status:"disconnected"};let r=t.connections.values().next().value;return{...t,connections:new Map(t.connections),current:r.connector.uid}})}p.setState(h()),i&&p.subscribe(({connections:e,current:t})=>t?e.get(t)?.chainId:void 0,e=>{if(c.getState().some(t=>t.id===e))return p.setState(t=>({...t,chainId:e??t.chainId}))}),l?.subscribe(e=>{let t=new Set,n=new Set;for(let e of u.getState())if(t.add(e.id),e.rdns)for(let t of"string"==typeof e.rdns?[e.rdns]:e.rdns)n.add(t);let a=[];for(let r of e){if(n.has(r.info.rdns))continue;let e=d(f(r));t.has(e.id)||a.push(e)}(!r||p.persist.hasHydrated())&&u.setState(e=>[...e,...a],!0)}),o.transports}({chains:[sk,sF],connectors:[sa({target:"metaMask",shimDisconnect:!0}),sa({shimDisconnect:!0}),sB({projectId:process.env.NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID||"YOUR_WEB3MODAL_PROJECT_ID",metadata:{name:"BitApe",description:"Mine BIT tokens on ApeChain",url:"https://bitape.org",icons:["https://bitape.org/bitape.png"]},showQrModal:!0}),sO({appName:"BitApe",appLogoUrl:"https://bitape.org/bitape.png"})],transports:{[sk.id]:sx(),[sF.id]:sx()}}),process.env.NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID,new sR;let sL=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"NotMinter",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"MAX_SUPPLY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"amtBurned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"minter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_minter",type:"address"}],name:"setMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],s$=process.env.NEXT_PUBLIC_BITAPE_TOKEN_ADDRESS;process.env.NEXT_PUBLIC_MAIN_CONTRACT_ADDRESS;let s_=`
  .miner-purchase-modal {
    max-height: 90vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
`,sD=({isOpen:e,onClose:t,onPurchase:n,selectedTile:r,isPurchasing:a,bitBalance:i,hasClaimedStarterMiner:s,minerTypeData:c={}})=>{let d=s?r$.MONKEY_TOASTER:r$.BANANA_MINER,[f,h]=(0,l.useState)(d),[m,g]=(0,l.useState)("initial"),[y,b]=(0,l.useState)(null),[x,v]=(0,l.useState)(!1),[w,N]=(0,l.useState)(!1),[E,A]=(0,l.useState)("0");rD();let I=rR(),{address:C}=(0,p.F)(),S=parseFloat(i),j=e=>{let t=r_[e];return{hashrate:t.hashrate,powerConsumption:t.energyConsumption,cost:t.price}},P=(0,l.useMemo)(()=>{let e=r_[f],t=f!==r$.BANANA_MINER||s?j(f).cost:0,n=j(f).hashrate,r=j(f).powerConsumption;return{name:e.name,image:e.image,description:e.description,price:"string"==typeof t?parseFloat(t):t,hashrate:"string"==typeof n?parseFloat(n):n,powerConsumption:"string"==typeof r?parseFloat(r):r}},[f,s]),T=(0,l.useMemo)(()=>{if(f===r$.BANANA_MINER&&!s)return"0";let e=P.price;return void 0!==e?e.toString():"0"},[P.price,f,s]),M=Number(T),R=M<=S,B=f===r$.BANANA_MINER&&0===M,O=B&&!s,F=r&&(R||O);r$.BANANA_MINER,r$.BANANA_MINER,r$.MONKEY_TOASTER,r$.MONKEY_TOASTER,r$.GORILLA_GADGET,r$.GORILLA_GADGET,r$.APEPAD_MINI,r$.APEPAD_MINI;let k=[r$.BANANA_MINER,r$.MONKEY_TOASTER,r$.GORILLA_GADGET,r$.APEPAD_MINI].map(e=>r_[e]).filter(e=>e.isActive);(0,l.useEffect)(()=>{let t=async()=>{if(e&&I&&C&&!B)try{if(N(!0),!T)return void console.error("Failed to get miner cost for allowance check");console.log("Checking allowance with params:",{tokenAddress:s$,ownerAddress:C,spenderAddress:rL.QX.MAIN,minerCost:T});let e=rk(T);try{let t=await I.readContract({address:s$,abi:sL,functionName:"allowance",args:[C,rL.QX.MAIN]});console.log("Allowance check result:",{allowance:t?.toString(),minerCost:e.toString(),hasEnough:t>=e}),v(t>=e)}catch(e){console.error("Specific error checking allowance:",e),v(!1)}}catch(e){console.error("Error checking allowance:",e),v(!1)}finally{N(!1)}};e&&C&&t()},[e,f,I,B,C,T]);let L=async()=>{if(b(null),console.log("handlePurchase called with: ",{selectedTile:r,isPurchasing:a,canPurchase:F,selectedMiner:f,hasEnoughAllowance:x,minerCost:T}),!r||a||!F)return void console.log("Purchase aborted because:",{noSelectedTile:!r,isPurchasing:a,cannotPurchase:!F});try{g(x?"purchasing":"approving");let e=Number(r.x),t=Number(r.y);console.log(`Initiating purchase for ${r_[f].name} on tile (${e}, ${t})`);try{await n(f,e,t),g("success"),console.log("Purchase transaction submitted successfully")}catch(t){let e="Transaction failed";e=t instanceof Error?t.message.includes("user rejected")||t.message.includes("rejected")||t.message.includes("denied")?"You declined the transaction in your wallet":t.message.includes("insufficient funds for gas")?"Not enough APE tokens for transaction fees":t.message.includes("Invalid price data")||t.message.includes("Failed to convert")?"Price data error - please try again":t.message.includes("network")||t.message.includes("connection")?"Network connection issue - please check your internet connection":t.message.includes("MetaMask")||t.message.includes("wallet")?"Wallet error: "+t.message.split(":")[0]:t.message.includes("Token approval failed")?t.message:t.message.length>100?`${t.message.substring(0,100)}...`:t.message:"Unknown error occurred",console.error("Purchase transaction failed:",t),b(e),g("initial")}}catch(t){let e=t instanceof Error?t.message:"Unknown error";b(e),console.error("Error during miner purchase:",e),g("initial")}};(0,l.useEffect)(()=>{e||g("initial")},[e]),(0,l.useEffect)(()=>{s&&f===r$.BANANA_MINER&&h(r$.MONKEY_TOASTER)},[e,s,f]),(0,l.useEffect)(()=>{e&&console.log("MinerPurchaseModal state:",{selectedMiner:f,purchaseStage:m,isPurchasing:a,bitBalance:i,canAfford:R,isFreeMiner:B,canGetFreeMiner:O,canPurchase:F,hasEnoughAllowance:x,selectedTile:r})},[e,f,m,a,i,R,B,O,F,x,r]);let $=()=>{};return((0,l.useEffect)(()=>{A(T)},[T]),e)?(0,o.jsxs)(iA,{open:e,onClose:"success"===m?$:t,className:"relative z-50",children:[(0,o.jsx)(rz(),{id:s_.__hash,children:s_}),(0,o.jsx)("div",{"aria-hidden":"true",className:"fixed inset-0 bg-black/70"}),(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:(0,o.jsxs)(iA.Panel,{className:"relative bg-royal border-2 border-banana p-6 max-w-4xl w-full m-4 miner-purchase-modal",children:[(0,o.jsx)(iA.Title,{className:"font-press-start text-2xl text-banana mb-6 text-center",children:"PURCHASE MINER"}),(0,o.jsxs)("div",{className:"bg-dark-blue p-2 mb-4 rounded",children:[(0,o.jsxs)("p",{className:"text-white font-press-start text-xs",children:["SELECTED LOCATION: ",r?`(${r.x}, ${r.y})`:"NONE"]}),(0,o.jsxs)("p",{className:"text-banana font-press-start text-xs mt-1",children:["YOUR BALANCE: ",i," BIT"]}),(0,o.jsx)("p",{className:"text-gray-400 font-press-start text-xs mt-1",children:"Transactions will be executed on Apechain"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsx)("div",{className:"space-y-2 border-r border-banana pr-3",children:k.map(e=>{let t=f===e.id,n=e.id===r$.BANANA_MINER&&0===e.price,r=n&&s;return(0,o.jsxs)("div",{onClick:()=>!r&&"initial"===m&&h(e.id),className:`bg-dark-blue p-2 flex items-center rounded 
                      ${"initial"===m&&!r?"cursor-pointer":"cursor-not-allowed"}
                      ${t?"border-l-4 border-banana":""}
                      ${r||"initial"!==m?"opacity-50":"hover:bg-dark-blue/80"}`,children:[(0,o.jsx)("div",{className:"w-10 h-10 mr-3 relative",children:(0,o.jsx)(u.default,{src:e.image,alt:e.name,fill:!0,className:"object-contain"})}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("span",{className:"text-banana font-press-start text-xs",children:e.name}),(0,o.jsx)("span",{className:"text-white font-press-start text-xs",children:n?s?"ALREADY CLAIMED":"FREE STARTER":`${"number"==typeof e.price?e.price.toFixed(2):e.price} BIT`})]})]},e.id)})}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h3",{className:"text-banana font-press-start mb-3 text-center text-sm",children:P.name}),(0,o.jsx)("div",{className:"w-36 h-36 mx-auto mb-4 relative",children:(0,o.jsx)(u.default,{src:P.image,alt:P.name,fill:!0,className:"object-contain"})}),(0,o.jsxs)("div",{className:"space-y-2 font-press-start text-xs",children:[(0,o.jsxs)("p",{className:"text-white mb-1",children:["- HASH RATE: ",P.hashrate," GH/S"]}),(0,o.jsxs)("p",{className:"text-white mb-1",children:["- PRICE: ",T," BIT"]}),(0,o.jsxs)("p",{className:"text-white mb-1",children:["- ENERGY: ",P.powerConsumption," WATT"]}),(0,o.jsxs)("p",{className:"text-white mb-1",children:["- MINER INDEX: ",f," (",P.name,")"]}),P.description&&(0,o.jsx)("p",{className:`mt-3 text-center ${B?"text-green-400":"text-yellow-300"}`,children:P.description}),!R&&!O&&(0,o.jsx)("p",{className:"text-red-500 mt-3 text-center",children:"INSUFFICIENT BIT BALANCE"}),!x&&!B&&R&&"initial"===m&&(0,o.jsx)("p",{className:"text-yellow-500 mt-3 text-center",children:"TOKEN APPROVAL NEEDED"}),"approving"===m&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"text-green-400 mt-3 text-center animate-pulse",children:["APPROVING TOKEN SPEND...",(0,o.jsx)("br",{}),(0,o.jsxs)("span",{className:"text-white text-xs mt-1 block",children:["Please check your wallet and confirm the transaction.",(0,o.jsx)("br",{}),"If your wallet isn't responding, try refreshing the page."]})]}),(0,o.jsx)("div",{className:"mt-2 text-center",children:(0,o.jsx)("button",{onClick:$,className:"mt-1 font-press-start text-xs px-3 py-1 bg-gray-700 text-white hover:bg-gray-600 transition-colors rounded",children:"WALLET NOT RESPONDING? REFRESH"})})]}),"purchasing"===m&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"text-green-400 mt-3 text-center animate-pulse",children:["PURCHASING MINER...",(0,o.jsx)("br",{}),(0,o.jsxs)("span",{className:"text-white text-xs mt-1 block",children:["Please check your wallet and confirm the transaction.",(0,o.jsx)("br",{}),"If your wallet isn't responding, try refreshing the page."]})]}),(0,o.jsx)("div",{className:"mt-2 text-center",children:(0,o.jsx)("button",{onClick:$,className:"mt-1 font-press-start text-xs px-3 py-1 bg-gray-700 text-white hover:bg-gray-600 transition-colors rounded",children:"WALLET NOT RESPONDING? REFRESH"})})]}),"success"===m&&(0,o.jsxs)("div",{className:"mt-3 text-center",children:[(0,o.jsx)("p",{className:"text-green-400 font-press-start text-sm mb-2",children:"MINER PURCHASED SUCCESSFULLY!"}),(0,o.jsx)("p",{className:"text-xs text-gray-300",children:"Your new miner should appear on the grid shortly. If you don't see it, please refresh the page."}),(0,o.jsx)("button",{onClick:$,className:"mt-2 font-press-start text-xs px-4 py-1 bg-banana text-royal hover:bg-opacity-90",children:"REFRESH PAGE"})]}),y&&(0,o.jsxs)("p",{className:"text-red-500 mt-3 text-center break-words",children:["ERROR: ",y]}),F&&"initial"===m&&!B&&(0,o.jsx)("p",{className:"text-xs text-gray-300 mt-3 text-center",children:"Click BUY to purchase this miner. Your wallet will prompt you to approve token spending if needed."})]})]})]}),(0,o.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,o.jsx)("button",{onClick:"success"===m?$:t,disabled:"initial"!==m&&"success"!==m,className:`font-press-start px-6 py-2 border-2 border-banana text-banana 
                ${"initial"===m||"success"===m?"hover:bg-banana hover:text-royal":"opacity-50 cursor-not-allowed"} 
                transition-colors`,children:"success"===m?"REFRESH":"CANCEL"}),"success"!==m?(0,o.jsx)("button",{onClick:L,disabled:!F||a||"initial"!==m||w,title:r?R||O?a?"Transaction in progress":B?"Claim your free starter miner":"Purchase this miner":"Insufficient BIT balance":"Select a tile first",className:`font-press-start px-6 py-2 ${F&&"initial"===m&&!w?"bg-banana text-royal hover:bg-opacity-90":"bg-gray-700 text-gray-400 cursor-not-allowed"} transition-colors`,children:w?"CHECKING...":(()=>{if(a||"initial"!==m)return"approving"===m?"APPROVING TOKENS...":"purchasing"===m?"PURCHASING...":"success"===m?"PURCHASED!":"PROCESSING...";if(B)return"CLAIM FREE MINER";let e=P.price,t="number"==typeof e?e.toFixed(2):e;return`BUY FOR ${t} BIT`})()}):(0,o.jsx)("button",{onClick:$,className:"font-press-start px-6 py-2 bg-banana text-royal hover:bg-opacity-90 transition-colors",children:"REFRESH PAGE"})]}),r&&(0,o.jsxs)("div",{className:"mt-6 text-center text-xs text-white",children:["MINER WILL BE PLACED AT POSITION: X=",r.x,", Y=",r.y]})]})})]}):null},sq=({viewMode:e,onChange:t,className:n="",buttonClassName:r="",compact:a=!1})=>(0,o.jsx)("div",{className:`flex ${a?"border-b-2 border-banana px-3 py-2":""} ${n}`,children:a?(0,o.jsxs)("div",{className:"flex w-full justify-between",children:[(0,o.jsx)("button",{onClick:()=>t("SIMPLE"),className:`font-press-start text-xs transition-all duration-200 ${"SIMPLE"===e?"text-banana font-bold border-b-2 border-banana pb-1":"text-[#4A5568] hover:text-[#6B7280]"} ${r}`,children:"SIMPLE"}),(0,o.jsx)("button",{onClick:()=>t("PRO"),className:`font-press-start text-xs transition-all duration-200 ${"PRO"===e?"text-banana font-bold border-b-2 border-banana pb-1":"text-[#4A5568] hover:text-[#6B7280]"} ${r}`,children:"PRO"})]}):(0,o.jsx)("button",{onClick:()=>t("SIMPLE"===e?"PRO":"SIMPLE"),className:`pixel-button font-press-start text-xs bg-transparent text-banana border-2 border-banana hover:bg-banana hover:text-royal ${r}`,children:"SIMPLE"===e?"SWITCH TO PRO VIEW":"SWITCH TO SIMPLE VIEW"})}),sU=({miningRateData:e,hashRateData:t,blocksUntilHalvingData:n,networkShareData:r,totalNetworkHashrateData:a,totalSupplyData:i,burnedBitData:s,currentBitApePerBlockData:c,isMiningRateLoading:u=!1,isHashRateLoading:d=!1,isNetworkShareLoading:f=!1,isTotalNetworkHashrateLoading:h=!1})=>{let[p,g]=(0,l.useState)("SIMPLE"),[y,b]=(0,l.useState)("0.00"),[x,v]=(0,l.useState)("0"),{data:w,isLoading:N}=(0,m.Q)({address:rL.QX.BIT_TOKEN,abi:rL.lD,functionName:"totalSupply",query:{enabled:!0}}),E=w||i;(0,l.useEffect)(()=>{if(E)try{console.log("Raw total supply data:",E.toString());let e=Number((0,iL.J)(E,18)).toFixed(2);console.log("Formatted total supply:",e),b(e)}catch(e){console.error("Error formatting total supply:",e),b("0.00")}else console.log("Total supply data is undefined or null")},[E]),(0,l.useEffect)(()=>{n&&v(n.toString())},[n]);let A=(e,t=2,n="",r=0,a=!1)=>{if(a)return"Loading...";if(void 0===e)return"0";let i=Number(e)/(r>0?10**r:1);return i<1e3&&""===n?`${i.toFixed(0)}${n}`:i>=1e9?`${(i/1e9).toFixed(t)}B${n}`:i>=1e6?`${(i/1e6).toFixed(t)}M${n}`:i>=1e3?`${(i/1e3).toFixed(t)}K${n}`:`${i.toFixed(t)}${n}`},I=A(e,2,"",18,u),C=A(t,0,"",0,d),S="0.00";f?S="Loading...":void 0!==r?S=((e,t=!1)=>t?"Loading...":void 0===e?"0.00":(Number(e)/100).toFixed(2))(r,f):t&&a&&a>BigInt(0)&&(S=(Number(t)/Number(a)*100).toFixed(2)),A(a,0,"",0,h);let j=A(c,2,"",18),P=A(s,2,"",18);return(0,o.jsxs)("div",{className:"bg-[#001420] p-3 rounded-md border-2 border-banana",children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)(sq,{viewMode:p,onChange:g,compact:!0,className:"w-full",buttonClassName:"font-bold hover:text-banana transition-colors duration-200"})}),(0,o.jsx)("div",{className:"p-3 space-y-2 font-press-start text-white text-xs",children:"SIMPLE"===p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("p",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{children:"- MINING RATE:"}),(0,o.jsxs)("span",{className:"text-banana",children:[I," BIT/DAY"]})]}),(0,o.jsxs)("p",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{children:"- HASH RATE:"}),(0,o.jsxs)("span",{className:"text-banana",children:[C," GH/S"]})]}),(0,o.jsxs)("p",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{children:"- NEXT HALVENING:"}),(0,o.jsxs)("span",{className:"text-banana",children:[x," BLOCKS"]})]}),(0,o.jsxs)("p",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{children:"- NETWORK SHARE:"}),(0,o.jsxs)("span",{className:"text-banana",children:[S,"%"]})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("p",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{children:"- BIT PER BLOCK:"}),(0,o.jsx)("span",{className:"text-banana",children:j})]}),(0,o.jsxs)("p",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{children:"- TOTAL BIT MINED:"}),(0,o.jsx)("span",{className:"text-banana",children:y})]}),(0,o.jsxs)("p",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{children:"- BIT BURNED:"}),(0,o.jsx)("span",{className:"text-banana",children:P})]}),(0,o.jsxs)("p",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{children:"- HALVENING PERIOD:"}),(0,o.jsx)("span",{className:"text-banana",children:"2,102,400 BLOCKS"})]})]})})]})};function sG(e,t){let{data:n}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"miners",args:e?[BigInt(t)]:void 0,query:{enabled:!!e&&!!t,select:e=>(console.log("miner data",e),{exists:e[0],owner:e[1],minerId:e[2],facilityId:e[3],hashrate:e[4],x:e[5],y:e[6]})}});return{data:n}}function sH(){(0,h.useParams)(),(0,h.useRouter)();let{address:e,isConnected:t}=(0,p.F)(),n=rU(),{apeBalance:r,bitBalance:a}=(0,rG.n)(),[i,s]=(0,l.useState)("resources"),[c,d]=(0,l.useState)("actions"),[g,y]=(0,l.useState)(!1),[b,x]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),[N,E]=(0,l.useState)(!1),[A,I]=(0,l.useState)(!1),[C,S]=(0,l.useState)(!1),[j,P]=(0,l.useState)(null),[T,M]=(0,l.useState)(!1),[R,B]=(0,l.useState)(!1),O=function(){let[e,t]=(0,l.useState)(!1);return e}(),[F,k]=(0,l.useState)("simple"),{writeContract:L}=eH(),$=rR(),{data:_}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"getPlayerFacility",args:e?[e]:void 0,query:{enabled:!!e}}),{data:D}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"getPlayerMinersPaginated",args:e?[e,BigInt(0),BigInt(100)]:void 0,query:{enabled:!!e,refetchInterval:6e4}}),{data:q}=(0,m.Q)({address:rL.QX.BIT_TOKEN,abi:rL.lD,functionName:"totalSupply",query:{enabled:!0}}),{data:U}=(0,m.Q)({address:rL.QX.MAIN,abi:[...rL.aL],functionName:"playerBitapePerBlock",args:e?[e]:void 0,query:{enabled:!!e,refetchInterval:6e4}}),{data:G}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"playerHashrate",args:e?[e]:void 0,query:{enabled:!!e,refetchInterval:3e4}}),{data:H}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"totalHashrate",query:{enabled:!0,refetchInterval:3e4}}),{data:z}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.t9,functionName:"getBlocksUntilHalving",query:{enabled:!0,refetchInterval:6e4}}),Q=(0,l.useMemo)(()=>G&&H&&BigInt(H)!==BigInt(0)?BigInt(G)*BigInt(1e4)/BigInt(H):BigInt(0),[G,H]),W=(0,l.useMemo)(()=>{if(!G||!H||BigInt(H)===BigInt(0)||!U)return BigInt(0);let e=BigInt(G)*BigInt(1e6)/BigInt(H);return e*BigInt(U)*BigInt(6e3)/BigInt(1e6)},[G,H,U]),{data:K}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"acquiredStarterMiner",args:e?[e]:void 0,query:{enabled:!!e}}),[Y,X]=(0,l.useState)({}),[V,Z]=(0,l.useState)([]),J=(0,l.useCallback)(async t=>{if(!e||!$)return null;try{console.log(`Fetching data for miner ID: ${t}`);let n=await $.readContract({address:rL.QX.MAIN,abi:[{inputs:[{name:"player",type:"address"},{name:"startIndex",type:"uint256"},{name:"size",type:"uint256"}],name:"getPlayerMinersPaginated",outputs:[{components:[{name:"minerIndex",type:"uint256"},{name:"id",type:"uint256"},{name:"x",type:"uint256"},{name:"y",type:"uint256"},{name:"hashrate",type:"uint256"},{name:"powerConsumption",type:"uint256"},{name:"cost",type:"uint256"},{name:"inProduction",type:"bool"}],name:"",type:"tuple[]"}],stateMutability:"view",type:"function"}],functionName:"getPlayerMinersPaginated",args:[e||n9,BigInt(0),BigInt(100)]});if(!n||!Array.isArray(n)||0===n.length)return console.log(`No miners found for player ${e}`),null;let r=n.find(e=>Number(e[1])===t);if(r)return console.log(`Data for miner ID ${t}:`,r),r;return console.log(`Miner ID ${t} not found in the list of ${n.length} miners`),null}catch(e){return console.error(`Error fetching miner data for ID ${t}:`,e),null}},[e,$]);(0,l.useCallback)(async e=>{if(console.log(`Fetching data for miner type: ${e}`),!$)return console.log("No public client available, using fallback data"),null;try{console.log(`Attempting to fetch miner data for index ${e} from contract`);let t=await $.readContract({address:rL.QX.MAIN,abi:[{inputs:[{name:"",type:"uint256"}],name:"miners",outputs:[{name:"minerIndex",type:"uint256"},{name:"id",type:"uint256"},{name:"x",type:"uint256"},{name:"y",type:"uint256"},{name:"hashrate",type:"uint256"},{name:"powerConsumption",type:"uint256"},{name:"cost",type:"uint256"},{name:"inProduction",type:"bool"}],stateMutability:"view",type:"function"}],functionName:"miners",args:[BigInt(e)]});return console.log(`Contract data for miner type ${e}:`,t),t}catch(r){console.error(`Error fetching miner type data for index ${e}:`,r),console.log(`Using fallback data from MINERS config for index ${e}`);let t=r_[e];if(!t)return console.error(`No fallback data available for miner type ${e}`),null;let n=[BigInt(t.id),BigInt(0),BigInt(0),BigInt(0),BigInt(t.hashrate),BigInt(t.energyConsumption),BigInt(1e18*t.price),t.isActive];return console.log(`Created fallback data for miner type ${e}:`,n),n}},[$]);let[ee,et]=(0,l.useState)({});(0,l.useCallback)(async()=>{if(e){try{console.log("Attempting to fetch on-chain data for miner ID 1"),await J(1)}catch(e){console.error("Error fetching miner 1:",e)}try{console.log("Attempting to fetch on-chain data for miner ID 11"),await J(11)}catch(e){console.error("Error fetching miner 11:",e)}}},[e,J]);let en=(0,l.useCallback)(()=>n.miners?n.miners.map(e=>{let t=String(e.id);if(Y[t]){let n=Y[t],r=Number(n[0]),a=Number(n[2]),i=Number(n[3]),s=Number(n[4]),o=Number(n[5]),l=Number(n[6]),c=!!n[7];console.log(`Mapping contract minerIndex ${r} for miner ID ${t}`),console.log("Full on-chain data:",n);let u={...e,minerType:r,x:a,y:i,hashrate:s,powerConsumption:o,cost:l,inProduction:c};return console.log(`Corrected miner ID ${t} data:`,u),u}return e}).filter(e=>{let t=Number(e.x),n=Number(e.y),r=t<=1&&n<=1;return r||console.warn(`Filtering out miner ID ${e.id} with invalid coordinates (${t}, ${n})`),r}):[],[n.miners,Y]),er=(0,l.useCallback)((e,t)=>{if(void 0===e||void 0===t)return null;if(console.log(`Looking for miner at tile (${e}, ${t})`),console.log("Current miners data:",n.miners),(!n.miners||0===n.miners.length)&&n.hasFacility)return(console.log("Using hardcoded miner data because no miners found but user has facility"),0===e&&0===t)?(console.log("Returning hardcoded BANANA MINER at (0, 0)"),{id:"1",minerType:1,x:0,y:0,hashrate:100,powerConsumption:1,inProduction:!0,image:"/banana-miner.gif"}):null;let r=en().find(n=>Number(n.x)===Number(e)&&Number(n.y)===Number(t));return console.log(`Miner found at (${e}, ${t}):`,r),r||null},[en,n.miners,n.hasFacility]),ea=(0,l.useCallback)((e,t)=>{if(console.log(`Checking if tile (${e}, ${t}) has a miner`),(!n.miners||0===n.miners.length)&&n.hasFacility)return console.log("Using hardcoded miner data for selectedTileHasMiner check"),0===e&&0===t&&(console.log("Hardcoded miner found at (0, 0)"),!0);let r=n.miners.some(n=>Number(n.x)===Number(e)&&Number(n.y)===Number(t));return console.log(`Tile (${e}, ${t}) has miner: ${r}`),r},[n.miners,n.hasFacility]),{data:ei}=sG(e,"1"),{data:es}=sG(e,"11");BigInt(1),BigInt(0),BigInt(0),BigInt(0),BigInt(100),BigInt(1),BigInt(0);let eo=_?{level:Number(_[0]),capacity:Number(_[1]),miners:Number(_[2]),power:Number(_[3]),used:Number(_[4]),x:Number(_[5]),y:Number(_[6])}:null,el={level:eo?.level||0,miners:eo?.miners||0,power:void 0!==eo?.power?Number(eo.power):0,capacity:void 0!==eo?.capacity?Number(eo.capacity):0,used:void 0!==eo?.used?Number(eo.used):0,resources:0,spaces:void 0!==eo?.capacity?Number(eo.capacity):0};eo&&(eo.capacity,eo.miners),eo&&(eo.power,eo.used);let{data:ec}=(0,m.Q)({address:rL.QX.MAIN,abi:rL.aL,functionName:"initializedStarterFacility",args:[e||n9],query:{enabled:!!e}}),eu=!!ec,{data:ed}=(0,m.Q)({address:rL.QX.MAIN,abi:[...rL.aL,{inputs:[{name:"player",type:"address"},{name:"x",type:"uint256"},{name:"y",type:"uint256"}],name:"playerOccupiedCoords",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"}],functionName:"playerOccupiedCoords",args:[e||n9,BigInt(1),BigInt(0)],query:{enabled:!!e}}),[ef,eh]=(0,l.useState)([]),{data:em,isLoading:ep}=(0,m.Q)({address:rL.QX.MAIN,abi:[...rL.aL,{inputs:[{name:"player",type:"address"}],name:"getPlayerBitPerDay",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getPlayerBitPerDay",args:[e||n9],query:{enabled:!!e,refetchInterval:3e4}}),{data:eg,isLoading:ey}=(0,m.Q)({address:rL.QX.MAIN,abi:[...rL.aL,{inputs:[{name:"player",type:"address"}],name:"playerHashrate",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"playerHashrate",args:[e||n9],query:{enabled:!!e,refetchInterval:3e4}}),{data:eb,isLoading:ex}=(0,m.Q)({address:rL.QX.MAIN,abi:[...rL.aL,{inputs:[{name:"player",type:"address"}],name:"getPlayerShareOfNetwork",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getPlayerShareOfNetwork",args:[e||n9],query:{enabled:!!e}}),{data:ev,isLoading:ew}=(0,m.Q)({address:rL.QX.MAIN,abi:[...rL.aL,{inputs:[],name:"getCurrentHashrate",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getCurrentHashrate",args:[],query:{enabled:!!e}}),{data:eN}=(0,m.Q)({address:rL.QX.MAIN,abi:[...rL.aL,{inputs:[],name:"getCurrentBitApePerBlock",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getCurrentBitApePerBlock",args:[],query:{enabled:!!e}}),{data:eE}=(0,m.Q)({address:rL.QX.BIT_TOKEN,abi:[{inputs:[],name:"amtBurned",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"amtBurned",args:[],query:{enabled:!!e}}),{data:eA,isLoading:eI,refetch:eC}=(0,m.Q)({address:rL.QX.MAIN,abi:[...rL.aL,{inputs:[{name:"player",type:"address"}],name:"getCurrentRewards",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getCurrentRewards",args:[e||n9],query:{enabled:!!e,refetchInterval:3e4}}),eS=(e,t=2,n="",r=0)=>{if(void 0===e)return"Loading...";let a=Number(e)/(r>0?10**r:1);return a>=1e9?`${(a/1e9).toFixed(t)}B${n}`:a>=1e6?`${(a/1e6).toFixed(t)}M${n}`:a>=1e3?`${(a/1e3).toFixed(t)}K${n}`:`${a.toFixed(t)}${n}`},ej=eI?"Loading...":eS(eA,4,"",18),eP=(()=>{if(eg&&ev&&ev>BigInt(0)&&(!em||em===BigInt(0))){let e=Number(eg)/Number(ev),t=2.5*e*6e3;return console.log(`Estimated mining rate: ${t.toFixed(2)} BIT/day (based on ${e.toFixed(4)} network share)`),t.toFixed(2)}return null})()||eS(em,2,"",18),eT=async()=>{try{console.log("Claiming rewards..."),await n.claimReward(),setTimeout(()=>{console.log("Refetching rewards after claim"),eC()},5e3)}catch(e){console.error("Error claiming rewards:",e)}},eM=e=>({[r$.BANANA_MINER]:"BANANA MINER",[r$.MONKEY_TOASTER]:"MONKEY TOASTER",[r$.GORILLA_GADGET]:"GORILLA GADGET",[r$.APEPAD_MINI]:"APEPAD MINI"})[e]||"UNKNOWN",eR=e=>{if(e===r$.MONKEY_TOASTER&&ee[r$.MONKEY_TOASTER]){let e=Number(ee[r$.MONKEY_TOASTER][4]);return console.log(`Using contract data for MONKEY_TOASTER mining rate: ${e}`),e.toString()}return({[r$.BANANA_MINER]:"100",[r$.MONKEY_TOASTER]:"1000",[r$.GORILLA_GADGET]:"750",[r$.APEPAD_MINI]:"2000"})[e]||"0"};if(!t||!e)return null;function eB({miner:e,onOpenMinerModal:t}){let[r,a]=(0,l.useState)(!1),i=(0,l.useMemo)(()=>e=>1===e?"100":2===e?"400":3===e?"1,200":4===e?"3,000":"0",[]),c=(0,l.useMemo)(()=>e=>1===e?"1":2===e?"5":3===e?"12":4===e?"25":"0",[]),d=(0,l.useMemo)(()=>e=>1===e?"FREE":2===e?"10":3===e?"30":4===e?"75":"0",[]),f=(0,l.useMemo)(()=>e=>1===e?"BANANA MINER":2===e?"GORILLA GADGET":3===e?"MONKEY TOASTER":4===e?"APEPAD MINI":"UNKNOWN MINER",[]),h=async()=>{if(j)try{console.log(`Simulating removal of miner at position (${j.x}, ${j.y})`),console.warn("Using UI-only miner removal simulation"),a(!1),n.refetch&&await n.refetch(),P({...j}),s("resources")}catch(e){console.error("Error removing miner:",e),alert("Failed to remove miner. Please try again.")}},m=void 0!==e.minerType?Number(e.minerType):void 0!==e.type?Number(e.type):0,p={1:{name:"BANANA MINER",image:"/banana-miner.gif"},2:{name:"GORILLA GADGET",image:"/gorilla-gadget.gif"},3:{name:"MONKEY TOASTER",image:"/monkey-toaster.gif"},4:{name:"APEPAD MINI",image:"/apepad.png"}}[m],g=p?.image||"/banana-miner.gif",y=p?.name||f(m);return(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)("p",{className:"bigcoin-text",children:"MINER DETAILS:"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-16 h-16 relative",children:(0,o.jsx)(u.default,{src:g,alt:y,fill:!0,className:"object-contain"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"bigcoin-value",children:y}),(0,o.jsxs)("p",{className:"bigcoin-text text-xs opacity-80",children:["HASH RATE: ",i(m)," GH/s"]}),(0,o.jsxs)("p",{className:"bigcoin-text text-xs opacity-80",children:["ENERGY: ",c(m)," WATTS"]}),1!==m&&(0,o.jsxs)("p",{className:"bigcoin-text text-xs opacity-80",children:["COST: ",d(m)," BIT"]})]})]}),(0,o.jsx)("div",{className:"mt-4 space-y-2",children:(0,o.jsx)("button",{onClick:()=>a(!0),className:"w-full bg-red-500 hover:bg-red-600 text-white font-press-start py-2 px-4 rounded-md transition-colors",children:"REMOVE MINER"})}),r&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",children:(0,o.jsxs)("div",{className:"bg-royal border-2 border-banana p-6 max-w-md w-full rounded-md",children:[(0,o.jsx)("h3",{className:"font-press-start text-lg text-banana mb-4 text-center",children:"WARNING"}),(0,o.jsx)("p",{className:"text-white mb-6 text-center",children:"Removing this miner will cause you to lose it permanently. You will need to purchase a new miner if you want to place one here again."}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("button",{onClick:()=>a(!1),className:"font-press-start px-6 py-2 border-2 border-banana text-banana hover:bg-banana/10 transition-colors",children:"CANCEL"}),(0,o.jsx)("button",{onClick:h,className:"font-press-start px-6 py-2 bg-red-500 text-white hover:bg-red-600 transition-colors",children:"REMOVE ANYWAY"})]})]})})]})}function eO({text:e,buttonClass:t,autoSelectTile:n}){return(0,o.jsxs)("button",{onClick:()=>{console.log("DirectMinerPurchaseButton clicked - opening modal directly");try{if(n){let e=[[0,0],[0,1],[1,0],[1,1]].filter(([e,t])=>!ea(e,t));if(e.length>0){let[t,n]=e[0];P({x:t,y:n}),console.log(`Auto-selected empty tile at (${t}, ${n}) for miner purchase`)}else{console.log("No empty tiles available for new miners"),alert("No empty slots available. Upgrade your facility to get more slots.");return}}M(!0)}catch(e){console.error("Error opening modal:",e)}},className:t||"w-full bg-banana text-royal font-press-start py-2 rounded-md hover:bg-yellow-400 transition-colors",children:[(0,o.jsx)("span",{children:e}),(0,o.jsx)("svg",{className:"w-5 h-5 inline-block ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]})}function eF({hasFacility:e,parsedFacility:t,onOpenMinerModal:n}){return(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("p",{className:"text-center text-sm py-3",children:"No miner at this location."}),(0,o.jsx)("div",{className:"bg-dark-blue p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[(0,o.jsx)("p",{className:"text-center text-yellow-300 font-press-start text-sm mb-3",children:"PLACE A MINER HERE"}),(0,o.jsxs)("button",{onClick:n,className:"w-full bg-green-500 hover:bg-green-600 text-white font-press-start py-3 px-4 rounded-md transition-colors shadow-lg text-center flex items-center justify-center space-x-2",children:[(0,o.jsx)("span",{children:"BUY MINER"}),(0,o.jsx)("svg",{className:"w-5 h-5 inline-block ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]}),t&&(0,o.jsx)("p",{className:"text-center text-white text-xs mt-3",children:t.capacity-t.miners>0?`You have ${t.capacity-t.miners} mining slots available`:"No mining slots available. Upgrade facility first."})]})})]})}function ek({selectedTile:e,getMinerAtTile:t,hasFacility:r,parsedFacility:a,onOpenMinerModal:i,getLocationDescription:s}){if(!e)return(0,o.jsx)("div",{className:"text-center py-4",children:(0,o.jsx)("p",{className:"text-sm",children:"Click a tile to select it"})});console.log(`SelectedTileContent: Checking for miner at (${e.x}, ${e.y})`),console.log("getMinerAtTile function available:",!!t);let l=n.miners||[];console.log("All available miners:",l);let c=l.find(t=>Number(t.x)===Number(e.x)&&Number(t.y)===Number(e.y));console.log("Direct miner check result:",c);let u=t(e.x,e.y);return console.log("SelectedTileContent: Miner found via getMinerAtTile:",u),c&&!u&&console.error("MISMATCH: Direct check found miner but getMinerAtTile did not!"),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"border-b border-white/20 pb-2 mb-3",children:[(0,o.jsx)("span",{className:"bigcoin-text",children:"LOCATION:"}),(0,o.jsx)("span",{className:"bigcoin-value block mt-1",children:s(e)}),(0,o.jsxs)("span",{className:"bigcoin-text text-xs mt-1",children:["POSITION: X: ",e.x,", Y: ",e.y]})]}),u?(0,o.jsx)(eB,{miner:u,onOpenMinerModal:i}):(0,o.jsx)(eF,{hasFacility:r,parsedFacility:a,onOpenMinerModal:i})]})}let{data:eL}=(0,m.Q)({address:rL.QX.BIT_TOKEN,abi:rL.lD,functionName:"totalSupply",query:{enabled:!0}}),e$=e=>0===e.x&&0===e.y?"NEAR BED":1===e.x&&0===e.y?"NEAR BANANA BOXES":0===e.x&&1===e.y?"NEAR JUKEBOX":1===e.x&&1===e.y?"NEAR CONTROL PANEL":"UNKNOWN LOCATION",e_=(e,t)=>{console.log(`Tile selected at (${e}, ${t})`);let n=j&&j.x===e&&j.y===t;P({x:e,y:t}),n&&"selectedTile"===i||s("selectedTile");let r=ea(e,t);console.log(`Tile has miner: ${r}`),setTimeout(()=>{(j?.x!==e||j?.y!==t)&&(console.log("Forcing tile selection update"),P({x:e,y:t}))},100)},eD=async()=>(y(!0),Promise.resolve()),eq=async()=>{E(!0)},eU=async(t,r,a)=>{if(j&&e){console.log(`Purchasing miner of type ${t} at position (${r}, ${a}) for address ${e}`);try{await n.purchaseMiner(t,r,a),M(!1)}catch(e){console.error("Error in handleMinerPurchase:",e)}}},eG=async(e,t)=>{try{console.log(`Removing miner at position (${e}, ${t})`),console.warn("Contract does not have removeMiner function - using UI-only simulation"),console.log("Miner removed successfully"),n.refetch&&(console.log("Refreshing game state after removing miner"),await n.refetch()),j&&P({...j}),s("resources"),setTimeout(()=>{n.refetch&&n.refetch()},2e3)}catch(e){console.error("Error removing miner:",e),alert("Failed to remove miner. Please try again.")}},ez=()=>{B(!R)},eQ=async()=>{let t=j||{x:0,y:0};if(!e)return void console.error("Cannot claim starter miner: wallet not connected");console.log("Claiming starter miner at position:",t,"for address:",e);try{console.log(`Calling gameState.getStarterMiner(${t.x}, ${t.y})`),await n.getStarterMiner(t.x,t.y),console.log("Starter miner transaction submitted"),n.refetch&&(console.log("Refreshing game state after claiming miner"),await n.refetch()),P({...t}),s("selectedTile"),setTimeout(()=>{n.refetch&&n.refetch()},2e3)}catch(e){console.error("Error claiming starter miner:",e),alert("Failed to claim starter miner. Please try again.")}};return O?(0,o.jsxs)("div",{className:"h-screen w-screen overflow-hidden",children:[(0,o.jsxs)("div",{className:"md:hidden flex flex-col h-screen",children:[(0,o.jsxs)("div",{className:"mobile-dashboard-header",children:[(0,o.jsx)(f(),{href:"/",children:(0,o.jsx)(u.default,{src:"/bitape.png",alt:"BitApe Logo",width:40,height:40,className:"hover:opacity-80 transition-opacity",priority:!0})}),(0,o.jsx)("button",{onClick:()=>x(!0),className:"bigcoin-button",children:"PROFILE"})]}),(0,o.jsxs)("div",{className:"mobile-dashboard-content pb-24",children:[(()=>{switch(c){case"actions":return(0,o.jsx)("div",{className:"p-4",children:(0,o.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,o.jsx)("button",{className:"bigcoin-button",onClick:()=>E(!0),children:"UPGRADE FACILITY"}),!K&&(0,o.jsx)("button",{className:"bigcoin-button",onClick:()=>I(!0),disabled:n.isGettingStarterMiner,children:n.isGettingStarterMiner?"PROCESSING...":"CLAIM STARTER MINER"}),eu&&(0,o.jsx)(eO,{text:"BUY MINER",buttonClass:"bigcoin-button",autoSelectTile:!0})]})});case"stats":return(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,o.jsx)("span",{className:"bigcoin-text",children:"APE BALANCE"}),(0,o.jsxs)("span",{className:"bigcoin-value font-press-start",children:[r||"0"," APE"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,o.jsx)("span",{className:"bigcoin-text",children:"BIT BALANCE"}),(0,o.jsxs)("span",{className:"bigcoin-value font-press-start",children:[a||"0"," BIT"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,o.jsx)("span",{className:"bigcoin-text",children:"SPACES LEFT"}),(0,o.jsx)("span",{className:"bigcoin-value font-press-start",children:eo?`${eo.capacity-eo.miners} SPACES`:"0 SPACES"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"bigcoin-text",children:"GIGAWATTS AVAILABLE"}),(0,o.jsx)("span",{className:"bigcoin-value font-press-start",children:eo?`${eo.power-eo.used} GW`:"0 GW"})]}),(0,o.jsxs)("div",{className:"border-t border-white/20 pt-4 mt-4",children:[(0,o.jsx)("h3",{className:"bigcoin-text mb-2",children:"MINING STATS"}),(0,o.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- MINING ",(0,o.jsx)("span",{className:"text-banana",children:void 0!==em?eS(em,2,"",18):"Loading..."})," BIT/DAY"]}),(0,o.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- HASH RATE: ",(0,o.jsx)("span",{className:"text-banana",children:void 0!==eg?eS(eg,0,""):"Loading..."})," GH/S"]}),(0,o.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- ",(0,o.jsx)("span",{className:"text-banana",children:void 0!==z?String(z):"Loading..."})," BLOCKS UNTIL HALVENING"]}),(0,o.jsxs)("p",{className:"font-press-start text-white text-xs",children:["- ",(0,o.jsxs)("span",{className:"text-banana",children:[void 0!==eb?(Number(eb)/100).toFixed(2):"Loading...","%"]})," OF NETWORK (",(0,o.jsx)("span",{className:"text-banana",children:void 0!==ev?eS(ev,0,""):"Loading..."})," GH/S)"]})]}),(0,o.jsxs)("div",{className:"border-t border-white/20 pt-4 mt-4",children:[(0,o.jsx)("h3",{className:"bigcoin-text mb-2",children:"NETWORK STATS"}),(0,o.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- ",(0,o.jsx)("span",{className:"text-banana",children:void 0!==eN?eS(eN,2,"",18):"Loading..."})," BIT PER BLOCK"]}),(0,o.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- ",(0,o.jsx)("span",{className:"text-banana",children:void 0!==eL?eS(eL,2,"",18):"Loading..."})," TOTAL BIT MINED"]}),(0,o.jsxs)("p",{className:"font-press-start text-white text-xs",children:["- ",(0,o.jsx)("span",{className:"text-banana",children:void 0!==eE?eS(eE,2,"",18):"Loading..."})," BIT BURNED"]})]})]});case"mining":let e=[...n.miners||[]];return 0===e.length&&n.hasClaimedStarterMiner,0===e.length&&n.hasClaimedStarterMiner&&(console.log("No miners found, but starter miner claimed. Adding default at (0,0)"),e.push({id:"0",minerType:r$.BANANA_MINER,x:0,y:0,image:r_[r$.BANANA_MINER].image,hashrate:1,powerConsumption:1,cost:0,inProduction:!0})),(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,o.jsx)("span",{className:"bigcoin-text",children:"TOTAL SPACES"}),(0,o.jsx)("span",{className:"bigcoin-value font-press-start",children:eo?`${eo.capacity} SPACES`:"0 SPACES"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,o.jsx)("span",{className:"bigcoin-text",children:"USED SPACES"}),(0,o.jsx)("span",{className:"bigcoin-value font-press-start",children:eo?`${eo.miners} SPACES`:"0 SPACES"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,o.jsx)("span",{className:"bigcoin-text",children:"TOTAL GIGAWATTS"}),(0,o.jsx)("span",{className:"bigcoin-value font-press-start",children:eo?`${eo.power} GW`:"0 GW"})]}),(0,o.jsxs)("div",{className:"border-t border-white/20 pt-3 mb-3",children:[(0,o.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- MINING ",(0,o.jsx)("span",{className:"text-banana",children:void 0!==em?eS(em,2,"",18):"Loading..."})," BIT/DAY"]}),(0,o.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- HASH RATE: ",(0,o.jsx)("span",{className:"text-banana",children:void 0!==eg?eS(eg,0,""):"Loading..."})," GH/S"]})]}),(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Your Miners"}),e.length>0?(0,o.jsx)("div",{className:"grid grid-cols-1 gap-4",children:e.map((e,t)=>(0,o.jsxs)("div",{className:"border border-white/20 p-3 rounded",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("span",{className:"text-xs",children:["Miner #",e.id]}),(0,o.jsxs)("span",{className:"text-xs",children:["Type: ",eM(e.minerType)]})]}),(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsxs)("span",{className:"text-xs",children:["Mining rate: ",eR(e.minerType)," BIT/day"]})}),(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsxs)("span",{className:"text-xs",children:["Position: X:",e.x,", Y:",e.y]})})]},t))}):(0,o.jsx)("div",{className:"text-center py-4 text-sm",children:"No miners yet"})]})]});default:return null}})(),(0,o.jsx)("div",{className:"bigcoin-panel",children:(0,o.jsx)(ik,{hasFacility:eu,facilityData:el,onPurchaseFacility:eD,onGetStarterMiner:eQ,onUpgradeFacility:eq,onPurchaseMiner:n.purchaseMiner,isPurchasingFacility:n.isPurchasingFacility,isGettingStarterMiner:n.isGettingStarterMiner,isUpgradingFacility:n.isUpgradingFacility,onTileSelect:e_,address:e,isGridMode:R,toggleGridMode:ez,hasClaimedStarterMiner:n.hasClaimedStarterMiner,miners:n.miners,selectedTileHasMiner:ea,getMinerAtTile:er})})]}),(0,o.jsxs)("div",{className:"mobile-dashboard-footer",children:[(0,o.jsx)("button",{className:`mobile-dashboard-tab ${"actions"===c?"active":""}`,onClick:()=>d("actions"),children:"ACTIONS"}),(0,o.jsx)("button",{className:`mobile-dashboard-tab ${"stats"===c?"active":""}`,onClick:()=>d("stats"),children:"STATS"}),(0,o.jsx)("button",{className:`mobile-dashboard-tab ${"mining"===c?"active":""}`,onClick:()=>d("mining"),children:"MINING"})]})]}),(0,o.jsxs)("div",{className:"hidden md:flex flex-col h-screen bg-royal overflow-hidden",children:[(0,o.jsxs)("header",{className:"nav-bar flex justify-between items-center px-4 py-2",children:[(0,o.jsx)("div",{className:"flex items-center",children:(0,o.jsx)(f(),{href:"/",children:(0,o.jsx)(u.default,{src:"/bitape.png",alt:"BitApe Logo",width:64,height:64,className:"hover:opacity-80 transition-opacity",priority:!0})})}),(0,o.jsxs)("nav",{className:"flex items-center gap-2",children:[(0,o.jsx)(f(),{href:"/about",className:"font-press-start text-sm text-white hover:text-banana",children:"ABOUT"}),(0,o.jsx)(f(),{href:"/trade",className:"font-press-start text-sm text-white hover:text-banana",children:"TRADE $BIT"}),(0,o.jsx)(f(),{href:"/leaderboard",className:"font-press-start text-sm text-[#4A5568] hover:text-banana",children:"LEADERBOARD"}),(0,o.jsx)("button",{className:"font-press-start text-sm text-banana border-2 border-banana px-3 py-1 hover:bg-banana hover:text-royal pixel-button",children:"ANNOUNCEMENTS"}),(0,o.jsx)("button",{onClick:()=>w(!0),className:"font-press-start text-sm text-banana border-2 border-banana px-3 py-1 hover:bg-banana hover:text-royal pixel-button",children:"REFER A FRIEND"}),(0,o.jsx)("button",{onClick:()=>x(!0),className:"font-press-start text-sm text-banana border-2 border-banana px-3 py-1 hover:bg-banana hover:text-royal pixel-button",children:"PROFILE"})]})]}),(0,o.jsxs)("div",{className:"flex-grow grid grid-cols-12 gap-2 p-2 max-h-[calc(100vh-56px)] overflow-hidden",children:[(0,o.jsxs)("div",{className:"col-span-4 flex flex-col gap-2 overflow-y-auto",children:[(0,o.jsxs)("div",{className:"bg-royal border-2 border-banana rounded-lg overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex border-b-2 border-banana",children:[(0,o.jsx)("button",{className:`px-3 py-1 flex-1 font-press-start text-xs ${"resources"===i?"bg-banana text-royal":"text-banana"}`,onClick:()=>s("resources"),children:"RESOURCES"}),(0,o.jsx)("button",{className:`px-3 py-1 flex-1 font-press-start text-xs ${"space"===i?"bg-banana text-royal":"text-banana"}`,onClick:()=>s("space"),children:"SPACE"}),(0,o.jsx)("button",{className:`px-3 py-1 flex-1 font-press-start text-xs ${"selectedTile"===i?"bg-banana text-royal":"text-banana"}`,onClick:()=>s("selectedTile"),children:"SELECTED TILE"})]}),(()=>{switch(console.log("Page - Rendering tab content with gameState:",{hasFacility:n.hasFacility,facilityData:n.facilityData,spacesLeft:n.spacesLeft,gigawattsAvailable:n.gigawattsAvailable,activeTab:i}),i){case"resources":return(0,o.jsx)(i$,{});case"space":return(0,o.jsx)(i6,{});case"selectedTile":return console.log("Rendering SELECTED TILE tab with selectedTile:",j),(0,o.jsx)("div",{className:"p-3 space-y-2",children:(0,o.jsx)(ek,{selectedTile:j,getMinerAtTile:er,hasFacility:eu,parsedFacility:eo,onOpenMinerModal:()=>{if(console.log("openMinerModal called from selectedTile tab"),j&&ea(j.x,j.y)){console.log("Opening modal to remove miner at:",j),eG(j.x,j.y);return}M(!0)},getLocationDescription:e$})});default:return(0,o.jsx)("div",{children:"Select a tab"})}})()]}),(0,o.jsx)("div",{className:"bg-royal border-2 border-banana rounded-lg overflow-hidden",children:(0,o.jsx)(sU,{miningRateData:W,hashRateData:G,blocksUntilHalvingData:z,networkShareData:Q,totalNetworkHashrateData:H,totalSupplyData:q,burnedBitData:void 0,currentBitApePerBlockData:U,isMiningRateLoading:!W,isHashRateLoading:!G,isNetworkShareLoading:!Q,isTotalNetworkHashrateLoading:!H})}),(0,o.jsx)("div",{className:"bg-royal border-2 border-banana rounded-lg overflow-hidden",children:(0,o.jsx)(i3,{minedBit:ej,onClaimRewards:eT,isClaimingReward:n.isClaimingReward,miningRate:eP})})]}),(0,o.jsx)("div",{className:"col-span-8 flex flex-col items-center justify-center",children:(0,o.jsx)("div",{className:"relative w-[700px] h-[700px] border border-banana overflow-hidden p-1.5",children:(0,o.jsx)(ik,{hasFacility:eu,facilityData:el,onPurchaseFacility:eD,onGetStarterMiner:eQ,onUpgradeFacility:eq,onPurchaseMiner:n.purchaseMiner,isPurchasingFacility:n.isPurchasingFacility,isGettingStarterMiner:n.isGettingStarterMiner,isUpgradingFacility:n.isUpgradingFacility,onTileSelect:e_,address:e,isGridMode:R,toggleGridMode:ez,hasClaimedStarterMiner:n.hasClaimedStarterMiner,miners:n.miners,selectedTileHasMiner:ea,getMinerAtTile:er})})})]})]}),(0,o.jsx)(iC,{isOpen:g,onClose:()=>y(!1),onConfirm:()=>{y(!1),n.refetch?.()}}),t&&e&&(0,o.jsx)(iS.A,{isOpen:b,onClose:()=>x(!1),address:e,apeBalance:r,bitBalance:a}),(0,o.jsx)(ij,{isOpen:v,onClose:()=>w(!1),totalReferrals:n.totalReferrals||0,totalBitEarned:n.totalBitEarned||"0.00"}),(0,o.jsx)(sD,{isOpen:T,onClose:()=>{console.log("Closing miner purchase modal"),M(!1)},onPurchase:(e,t,n)=>(console.log(`Purchasing miner: type=${e}, position=(${t}, ${n})`),eU(e,t,n)),selectedTile:j||void 0,isPurchasing:n.isPurchasingMiner,bitBalance:a||"0",hasClaimedStarterMiner:n.hasClaimedStarterMiner,minerTypeData:ee}),(0,o.jsx)(i4,{isOpen:N,onClose:()=>E(!1),onPurchase:()=>{E(!1),n.upgradeFacility()},isPurchasing:n.isUpgradingFacility})]}):null}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19587:()=>{},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29632:(e,t,n)=>{"use strict";e.exports=n(97668)},30925:(e,t,n)=>{Promise.resolve().then(n.bind(n,15076))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},36581:(e,t,n)=>{"use strict";var r=n(29632),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return r.isMemo(e)?s:o[e.$$typeof]||a}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(m){var a=h(n);a&&a!==m&&e(t,a,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var o=l(t),p=l(n),g=0;g<s.length;++g){var y=s[g];if(!i[y]&&!(r&&r[y])&&!(p&&p[y])&&!(o&&o[y])){var b=f(n,y);try{c(t,y,b)}catch(e){}}}}return t}},41204:e=>{"use strict";e.exports=require("string_decoder")},52910:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var r=n(11117)},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56397:()=>{},58813:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});let r=(0,n(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/alexalaniz/Downloads/bitape-ui/src/app/room/[address]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/alexalaniz/Downloads/bitape-ui/src/app/room/[address]/page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71814:(e,t,n)=>{"use strict";n.d(t,{sc:()=>u});var r=n(56774),a=n(90113);class i extends a.Vw{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,a.O8)(this.buffer)}update(e){(0,r.CC)(this);let{view:t,buffer:n,blockLen:i}=this,s=(e=(0,a.ZJ)(e)).length;for(let r=0;r<s;){let o=Math.min(i-this.pos,s-r);if(o===i){let t=(0,a.O8)(e);for(;i<=s-r;r+=i)this.process(t,r);continue}n.set(e.subarray(r,r+o),this.pos),this.pos+=o,r+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,r.CC)(this),(0,r.Ht)(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:i,isLE:s}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let e=o;e<i;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);let a=BigInt(32),i=BigInt(0xffffffff),s=Number(n>>a&i),o=Number(n&i),l=4*!!r,c=4*!r;e.setUint32(t+l,s,r),e.setUint32(t+c,o,r)}(n,i-8,BigInt(8*this.length),s),this.process(n,0);let l=(0,a.O8)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,d=this.get();if(u>d.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)l.setUint32(4*e,d[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:r,finished:a,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=a,e.destroyed=i,r%t&&e.buffer.set(n),e}}let s=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),o=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),l=new Uint32Array(64);class c extends i{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){let{A:e,B:t,C:n,D:r,E:a,F:i,G:s,H:o}=this;return[e,t,n,r,a,i,s,o]}set(e,t,n,r,a,i,s,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|a,this.F=0|i,this.G=0|s,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)l[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=l[e-15],n=l[e-2],r=(0,a.Ow)(t,7)^(0,a.Ow)(t,18)^t>>>3,i=(0,a.Ow)(n,17)^(0,a.Ow)(n,19)^n>>>10;l[e]=i+l[e-7]+r+l[e-16]|0}let{A:n,B:r,C:i,D:o,E:c,F:u,G:d,H:f}=this;for(let e=0;e<64;e++){var h,m,p,g;let t=f+((0,a.Ow)(c,6)^(0,a.Ow)(c,11)^(0,a.Ow)(c,25))+((h=c)&u^~h&d)+s[e]+l[e]|0,y=((0,a.Ow)(n,2)^(0,a.Ow)(n,13)^(0,a.Ow)(n,22))+((m=n)&(p=r)^m&(g=i)^p&g)|0;f=d,d=u,u=c,c=o+t|0,o=i,i=r,r=n,n=t+y|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,d=d+this.G|0,f=f+this.H|0,this.set(n,r,i,o,c,u,d,f)}roundClean(){l.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let u=(0,a.ld)(()=>new c)},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},75913:(e,t,n)=>{"use strict";n(56397);var r=n(43210),a=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r),i="undefined"!=typeof process&&process.env&&!0,s=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,n=t.name,r=void 0===n?"stylesheet":n,a=t.optimizeForSpeed,o=void 0===a?i:a;l(s(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",l("boolean"==typeof o,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=o,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var t,n=e.prototype;return n.setOptimizeForSpeed=function(e){l("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),l(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},n.isOptimizeForSpeed=function(){return this._optimizeForSpeed},n.inject=function(){var e=this;l(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(t,n){return"number"==typeof n?e._serverSheet.cssRules[n]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),n},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},n.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},n.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},n.insertRule=function(e,t){return l(s(e),"`insertRule` accepts only strings"),"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++},n.replaceRule=function(e,t){this._optimizeForSpeed;var n=this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!n.cssRules[e])return e;n.deleteRule(e);try{n.insertRule(t,e)}catch(r){i||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),n.insertRule(this._deletedRulePlaceholder,e)}return e},n.deleteRule=function(e){this._serverSheet.deleteRule(e)},n.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},n.cssRules=function(){return this._serverSheet.cssRules},n.makeStyleTag=function(e,t,n){t&&l(s(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var a=document.head||document.getElementsByTagName("head")[0];return n?a.insertBefore(r,n):a.appendChild(r),r},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();function l(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0},u={};function d(e,t){if(!t)return"jsx-"+e;var n=String(t),r=e+n;return u[r]||(u[r]="jsx-"+c(e+"-"+n)),u[r]}function f(e,t){var n=e+(t=t.replace(/\/style/gi,"\\/style"));return u[n]||(u[n]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[n]}var h=function(){function e(e){var t=void 0===e?{}:e,n=t.styleSheet,r=void 0===n?null:n,a=t.optimizeForSpeed,i=void 0!==a&&a;this._sheet=r||new o({name:"styled-jsx",optimizeForSpeed:i}),this._sheet.inject(),r&&"boolean"==typeof i&&(this._sheet.setOptimizeForSpeed(i),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed());var n=this.getIdAndRules(e),r=n.styleId,a=n.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var i=a.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=i,this._instancesCounts[r]=1},t.remove=function(e){var t=this,n=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(n in this._instancesCounts,"styleId: `"+n+"` not found"),this._instancesCounts[n]-=1,this._instancesCounts[n]<1){var r=this._fromServer&&this._fromServer[n];r?(r.parentNode.removeChild(r),delete this._fromServer[n]):(this._indices[n].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[n]),delete this._instancesCounts[n]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],n=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return n[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,n;return t=this.cssRules(),void 0===(n=e)&&(n={}),t.map(function(e){var t=e[0],r=e[1];return a.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:n.nonce?n.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},t.getIdAndRules=function(e){var t=e.children,n=e.dynamic,r=e.id;if(n){var a=d(r,n);return{styleId:a,rules:Array.isArray(t)?t.map(function(e){return f(a,e)}):[f(a,t)]}}return{styleId:d(r),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),m=r.createContext(null);m.displayName="StyleSheetContext";a.default.useInsertionEffect||a.default.useLayoutEffect;var p=void 0;function g(e){var t=p||r.useContext(m);return t&&t.add(e),null}g.dynamic=function(e){return e.map(function(e){return d(e[0],e[1])}).join(" ")},t.style=g},76180:(e,t,n)=>{"use strict";e.exports=n(75913).style},77598:e=>{"use strict";e.exports=require("node:crypto")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},82102:(e,t,n)=>{"use strict";n.d(t,{w:()=>s});var r=n(56774),a=n(90113);class i extends a.Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,r.sd)(e);let n=(0,a.ZJ)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,r.CC)(this),this.iHash.update(e),this}digestInto(e){(0,r.CC)(this),(0,r.DO)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:r,destroyed:a,blockLen:i,outputLen:s}=this;return e.finished=r,e.destroyed=a,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let s=(e,t,n)=>new i(e,t).update(n).digest();s.create=(e,t)=>new i(e,t)},83997:e=>{"use strict";e.exports=require("tty")},90425:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(64746),a=n(55925);function i(e,t){if(!(0,a.P)(e,{strict:!1}))throw new r.M({address:e});if(!(0,a.P)(t,{strict:!1}))throw new r.M({address:t});return e.toLowerCase()===t.toLowerCase()}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},97668:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,v=n?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case i:case o:case s:case h:return e;default:switch(e=e&&e.$$typeof){case c:case f:case g:case p:case l:return e;default:return t}}case a:return t}}}function N(e){return w(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=f,t.Fragment=i,t.Lazy=g,t.Memo=p,t.Portal=a,t.Profiler=o,t.StrictMode=s,t.Suspense=h,t.isAsyncMode=function(e){return N(e)||w(e)===u},t.isConcurrentMode=N,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===p},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===o},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===o||e===s||e===h||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===p||e.$$typeof===l||e.$$typeof===c||e.$$typeof===f||e.$$typeof===b||e.$$typeof===x||e.$$typeof===v||e.$$typeof===y)},t.typeOf=w}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[158,715,363,685],()=>n(5215));module.exports=r})();