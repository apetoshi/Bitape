(()=>{var e={};e.id=817,e.ids=[817],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5886:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>i.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>c});var r=n(65239),a=n(48088),s=n(88170),i=n.n(s),o=n(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);n.d(t,l);let c={children:["",{children:["room",{children:["[address]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,58813)),"/Users/alexalaniz/Downloads/bitape-ui/src/app/room/[address]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,94431)),"/Users/alexalaniz/Downloads/bitape-ui/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(n.t.bind(n,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(n.t.bind(n,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,u=["/Users/alexalaniz/Downloads/bitape-ui/src/app/room/[address]/page.tsx"],d={require:n,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/room/[address]/page",pathname:"/room/[address]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6957:(e,t,n)=>{Promise.resolve().then(n.bind(n,58813))},8086:e=>{"use strict";e.exports=require("module")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30925:(e,t,n)=>{Promise.resolve().then(n.bind(n,36570))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},36570:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>aN});var r,a,s=n(60687),i=n(43210),o=n.t(i,2),l=n(30474),c=n(85814),u=n.n(c),d=n(16189),m=n(89160),f=n(54050),p=n(12880),h=n(29140);function b(e={}){var t;let{mutation:n}=e,r=(t=(0,h.U)(e),{mutationFn:e=>(0,p.E)(t,e),mutationKey:["writeContract"]}),{mutate:a,mutateAsync:s,...i}=(0,f.n)({...n,...r});return{...i,writeContract:a,writeContractAsync:s}}var g=n(90187),x=n(55448),y=n(65568),v=n(98901),N=n(45548),w=n(82875),E=n(53304),A=n(98200);async function j(e,t){let{blockNumber:n,blockTag:r,name:a}=t,{chain:s}=e,i=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!s)throw Error("client chain not configured. universalResolverAddress is required.");return(0,v.M)({blockNumber:n,chain:s,contract:"ensUniversalResolver"})})(),o=s?.ensTlds;if(o&&!o.some(e=>a.endsWith(e)))throw Error(`${a} is not a valid ENS TLD (${o?.join(", ")}) for chain "${s.name}" (id: ${s.id}).`);let[l]=await (0,E.T)(e,A.J,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,N.nj)((0,w.F)(a))],blockNumber:n,blockTag:r});return l}var S=n(77316),I=n(8959),T=n(20629),C=n(14392),R=n(28169),P=n(15543),M=n(85453);async function F(e,t){let{account:n=e.account,blockNumber:r,blockTag:a="latest",blobs:s,data:i,gas:o,gasPrice:l,maxFeePerBlobGas:c,maxFeePerGas:u,maxPriorityFeePerGas:d,to:m,value:f,...p}=t,h=n?(0,T.J)(n):void 0;try{(0,M.c)(t);let n=r?(0,N.cK)(r):void 0,b=e.chain?.formatters?.transactionRequest?.format,g=(b||P.Bv)({...(0,R.o)(p,{format:b}),from:h?.address,blobs:s,data:i,gas:o,gasPrice:l,maxFeePerBlobGas:c,maxFeePerGas:u,maxPriorityFeePerGas:d,to:m,value:f}),x=await e.request({method:"eth_createAccessList",params:[g,n||a]});return{accessList:x.accessList,gasUsed:BigInt(x.gasUsed)}}catch(n){throw(0,C.d)(n,{...t,account:h,chain:e.chain})}}function O(e,{method:t}){let n={};return"fallback"===e.transport.type&&e.transport.onResponse?.(({method:e,response:r,status:a,transport:s})=>{"success"===a&&t===e&&(n[r]=s.request)}),t=>n[t]||e.request}async function $(e){let t=O(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}var L=n(84536),k=n(83117);class B extends k.C{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}var _=n(72914),D=n(48340),G=n(55005),U=n(17099),H=n(82975),z=n(45306);let q="/docs/contract/encodeEventTopics";function Y(e){let{abi:t,eventName:n,args:r}=e,a=t[0];if(n){let e=(0,z.iY)({abi:t,name:n});if(!e)throw new L.M_(n,{docsPath:q});a=e}if("event"!==a.type)throw new L.M_(void 0,{docsPath:q});let s=(0,H.B)(a),i=(0,G.h)(s),o=[];if(r&&"inputs"in a){let e=a.inputs?.filter(e=>"indexed"in e&&e.indexed),t=Array.isArray(r)?r:Object.values(r).length>0?e?.map(e=>r[e.name])??[]:[];t.length>0&&(o=e?.map((e,n)=>Array.isArray(t[n])?t[n].map((r,a)=>W({param:e,value:t[n][a]})):void 0!==t[n]&&null!==t[n]?W({param:e,value:t[n]}):null)??[])}return[i,...o]}function W({param:e,value:t}){if("string"===e.type||"bytes"===e.type)return(0,D.S)((0,_.ZJ)(t));if("tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))throw new B(e.type);return(0,U.h)([e],[t])}async function K(e,t){let{address:n,abi:r,args:a,eventName:s,fromBlock:i,strict:o,toBlock:l}=t,c=O(e,{method:"eth_newFilter"}),u=s?Y({abi:r,args:a,eventName:s}):void 0,d=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:"bigint"==typeof i?(0,N.cK)(i):i,toBlock:"bigint"==typeof l?(0,N.cK)(l):l,topics:u}]});return{abi:r,args:a,eventName:s,id:d,request:c(d),strict:!!o,type:"event"}}async function Q(e,{address:t,args:n,event:r,events:a,fromBlock:s,strict:i,toBlock:o}={}){let l=a??(r?[r]:void 0),c=O(e,{method:"eth_newFilter"}),u=[];l&&(u=[l.flatMap(e=>Y({abi:[e],eventName:e.name,args:n}))],r&&(u=u[0]));let d=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof s?(0,N.cK)(s):s,toBlock:"bigint"==typeof o?(0,N.cK)(o):o,...u.length?{topics:u}:{}}]});return{abi:l,args:n,eventName:r?r.name:void 0,fromBlock:s,id:d,request:c(d),strict:!!i,toBlock:o,type:"event"}}async function X(e){let t=O(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}var V=n(38639),J=n(36438),Z=n(89546);async function ee(e,t){let{abi:n,address:r,args:a,functionName:s,dataSuffix:i,...o}=t,l=(0,V.p)({abi:n,args:a,functionName:s});try{return await (0,E.T)(e,Z.Q,"estimateGas")({data:`${l}${i?i.replace("0x",""):""}`,to:r,...o})}catch(t){let e=o.account?(0,T.J)(o.account):void 0;throw(0,J.j)(t,{abi:n,address:r,args:a,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:e?.address})}}var et=n(3185),en=n(53230),er=n(60234);async function ea(e){return BigInt(await e.request({method:"eth_blobBaseFee"}))}var es=n(51915),ei=n(78910),eo=n(523);async function el(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){let a,s=void 0!==n?(0,N.cK)(n):void 0;return a=t?await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),(0,eo.ME)(a)}var ec=n(11022);async function eu(e,{address:t,blockNumber:n,blockTag:r="latest"}){let a=void 0!==n?(0,N.cK)(n):void 0,s=await e.request({method:"eth_getCode",params:[t,a||r]},{dedupe:!!a});if("0x"!==s)return s}var ed=n(90425),em=n(80934),ef=n(31866),ep=n(35643);let eh="/docs/contract/decodeEventLog";function eb(e){let{abi:t,data:n,strict:r,topics:a}=e,s=r??!0,[i,...o]=a;if(!i)throw new L._z({docsPath:eh});let l=1===t.length?t[0]:t.find(e=>"event"===e.type&&i===(0,G.h)((0,H.B)(e)));if(!(l&&"name"in l)||"event"!==l.type)throw new L.kE(i,{docsPath:eh});let{name:c,inputs:u}=l,d=u?.some(e=>!("name"in e&&e.name)),m=d?[]:{},f=u.filter(e=>"indexed"in e&&e.indexed);for(let e=0;e<f.length;e++){let t=f[e],n=o[e];if(!n)throw new L.l3({abiItem:l,param:t});m[d?e:t.name||e]=function({param:e,value:t}){return"string"===e.type||"bytes"===e.type||"tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/)?t:((0,ep.n)([e],t)||[])[0]}({param:t,value:n})}let p=u.filter(e=>!("indexed"in e&&e.indexed));if(p.length>0){if(n&&"0x"!==n)try{let e=(0,ep.n)(p,n);if(e)if(d)m=[...m,...e];else for(let t=0;t<p.length;t++)m[p[t].name]=e[t]}catch(e){if(s){if(e instanceof L.Iy||e instanceof ef.SK)throw new L.fo({abiItem:l,data:n,params:p,size:(0,em.E)(n)});throw e}}else if(s)throw new L.fo({abiItem:l,data:"0x",params:p,size:0})}return{eventName:c,args:Object.values(m).length>0?m:void 0}}function eg(e){let{abi:t,args:n,logs:r,strict:a=!0}=e,s=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(e=>{try{let r=t.find(t=>"event"===t.type&&e.topics[0]===(0,G.h)(t));if(!r)return null;let i=eb({...e,abi:[r],strict:a});if(s&&!s.includes(i.eventName)||!function(e){let{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function a(e,t,n){try{if("address"===e.type)return(0,ed.h)(t,n);if("string"===e.type||"bytes"===e.type)return(0,D.S)((0,_.ZJ)(t))===n;return t===n}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((e,r)=>{if(null==e)return!0;let s=n[r];return!!s&&(Array.isArray(e)?e:[e]).some(e=>a(s,e,t[r]))}):!("object"!=typeof t||Array.isArray(t)||"object"!=typeof r||Array.isArray(r))&&Object.entries(r).every(([e,r])=>{if(null==r)return!0;let s=n.find(t=>t.name===e);return!!s&&(Array.isArray(r)?r:[r]).some(n=>a(s,n,t[e]))})}({args:i.args,inputs:r.inputs,matchArgs:n}))return null;return{...i,...e}}catch(r){let t,n;if(r instanceof L.kE)return null;if(r instanceof L.fo||r instanceof L.l3){if(a)return null;t=r.abiItem.name,n=r.abiItem.inputs?.some(e=>!("name"in e&&e.name))}return{...e,args:n?[]:{},eventName:t}}}).filter(Boolean)}var ex=n(78478);async function ey(e,{address:t,blockHash:n,fromBlock:r,toBlock:a,event:s,events:i,args:o,strict:l}={}){let c,u=i??(s?[s]:void 0),d=[];u&&(d=[u.flatMap(e=>Y({abi:[e],eventName:e.name,args:i?void 0:o}))],s&&(d=d[0]));let m=(n?await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:"bigint"==typeof r?(0,N.cK)(r):r,toBlock:"bigint"==typeof a?(0,N.cK)(a):a}]})).map(e=>(0,ex.e)(e));return u?eg({abi:u,args:o,logs:m,strict:l??!1}):m}async function ev(e,t){let{abi:n,address:r,args:a,blockHash:s,eventName:i,fromBlock:o,toBlock:l,strict:c}=t,u=i?(0,z.iY)({abi:n,name:i}):void 0,d=u?void 0:n.filter(e=>"event"===e.type);return(0,E.T)(e,ey,"getLogs")({address:r,args:a,blockHash:s,event:u,events:d,fromBlock:o,toBlock:l,strict:c})}class eN extends k.C{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function ew(e,t){let{address:n,factory:r,factoryData:a}=t;try{let[t,s,i,o,l,c,u]=await (0,E.T)(e,A.J,"readContract")({abi:eE,address:n,functionName:"eip712Domain",factory:r,factoryData:a});return{domain:{name:s,version:i,chainId:Number(o),verifyingContract:l,salt:c},extensions:u,fields:t}}catch(e){if("ContractFunctionExecutionError"===e.name&&"ContractFunctionZeroDataError"===e.cause.name)throw new eN({address:n});throw e}}let eE=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];async function eA(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:a}){var s;let i=n?(0,N.cK)(n):void 0;return{baseFeePerGas:(s=await e.request({method:"eth_feeHistory",params:[(0,N.cK)(t),i||r,a]},{dedupe:!!i})).baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:s.gasUsedRatio,oldestBlock:BigInt(s.oldestBlock),reward:s.reward?.map(e=>e.map(e=>BigInt(e)))}}async function ej(e,{filter:t}){let n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if("string"==typeof r[0])return r;let a=r.map(e=>(0,ex.e)(e));return"abi"in t&&t.abi?eg({abi:t.abi,logs:a,strict:n}):a}async function eS(e,{filter:t}){let n=t.strict??!1,r=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(e=>(0,ex.e)(e));return t.abi?eg({abi:t.abi,logs:r,strict:n}):r}var eI=n(24306);async function eT(e,{address:t,blockNumber:n,blockTag:r,storageKeys:a}){let s=void 0!==n?(0,N.cK)(n):void 0;var i=await e.request({method:"eth_getProof",params:[t,a,s||(r??"latest")]});return{...i,balance:i.balance?BigInt(i.balance):void 0,nonce:i.nonce?(0,eo.ME)(i.nonce):void 0,storageProof:i.storageProof?i.storageProof.map(e=>({...e,value:BigInt(e.value)})):void 0}}async function eC(e,{address:t,blockNumber:n,blockTag:r="latest",slot:a}){let s=void 0!==n?(0,N.cK)(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,a,s||r]})}var eR=n(83886);async function eP(e,{hash:t,transactionReceipt:n}){let[r,a]=await Promise.all([(0,E.T)(e,ei.G,"getBlockNumber")({}),t?(0,E.T)(e,eR.x,"getTransaction")({hash:t}):void 0]),s=n?.blockNumber||a?.blockNumber;return s?r-s+1n:0n}var eM=n(93155),eF=n(99139),eO=n(42513);class e$ extends Error{constructor(e,t={}){let n=(()=>{if(t.cause instanceof e$){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause?.message?t.cause.message:t.details})(),r=t.cause instanceof e$&&t.cause.docsPath||t.docsPath,a=`https://oxlib.sh${r??""}`;super([e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...n||r?["",n?`Details: ${n}`:void 0,r?`See: ${a}`:void 0]:[]].filter(e=>"string"==typeof e).join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"ox@0.1.1"}),this.cause=t.cause,this.details=n,this.docs=a,this.docsPath=r,this.shortMessage=e}walk(e){return function e(t,n){return n?.(t)?t:t&&"object"==typeof t&&"cause"in t&&t.cause?e(t.cause,n):n?null:t}(this,e)}}function eL(e,t,n){return JSON.stringify(e,(e,n)=>"function"==typeof t?t(e,n):"bigint"==typeof n?n.toString()+"#__bigint":n,n)}function ek(e,t){if(eQ(e)>t)throw new eZ({givenSize:eQ(e),maxSize:t})}function eB(e,t={}){let{dir:n,size:r=32}=t;if(0===r)return e;let a=e.replace("0x","");if(a.length>2*r)throw new e1({size:Math.ceil(a.length/2),targetSize:r,type:"Hex"});return`0x${a["right"===n?"padEnd":"padStart"](2*r,"0")}`}let e_=new TextEncoder,eD=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function eG(...e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}function eU(e,t={}){let n=`0x${Number(e)}`;return"number"==typeof t.size?(ek(n,t.size),eY(n,t.size)):n}function eH(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=eD[e[t]];let r=`0x${n}`;return"number"==typeof t.size?(ek(r,t.size),eW(r,t.size)):r}function ez(e,t={}){let n,{signed:r,size:a}=t,s=BigInt(e);a?n=r?(1n<<8n*BigInt(a)-1n)-1n:2n**(8n*BigInt(a))-1n:"number"==typeof e&&(n=BigInt(Number.MAX_SAFE_INTEGER));let i="bigint"==typeof n&&r?-n-1n:0;if(n&&s>n||s<i){let t="bigint"==typeof e?"n":"";throw new eX({max:n?`${n}${t}`:void 0,min:`${i}${t}`,signed:r,size:a,value:`${e}${t}`})}let o=(r&&s<0?(1n<<BigInt(8*a))+BigInt(s):s).toString(16),l=`0x${o}`;return a?eY(l,a):l}function eq(e,t={}){return eH(e_.encode(e),t)}function eY(e,t){return eB(e,{dir:"left",size:t})}function eW(e,t){return eB(e,{dir:"right",size:t})}function eK(e,t,n,r={}){let{strict:a}=r;if("number"==typeof t&&t>0&&t>eQ(e)-1)throw new e0({offset:t,position:"start",size:eQ(e)});let s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return a&&function(e,t,n){if("number"==typeof t&&"number"==typeof n&&eQ(e)!==n-t)throw new e0({offset:n,position:"end",size:eQ(e)})}(s,t,n),s}function eQ(e){return Math.ceil((e.length-2)/2)}class eX extends e${constructor({max:e,min:t,signed:n,size:r,value:a}){super(`Number \`${a}\` is not in safe${r?` ${8*r}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class eV extends e${constructor(e){super(`Value \`${"object"==typeof e?eL(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class eJ extends e${constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class eZ extends e${constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class e0 extends e${constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class e1 extends e${constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function e2(e){return{address:e.address,amount:ez(e.amount),index:ez(e.index),validatorIndex:ez(e.validatorIndex)}}var e5=n(47430),e6=n(18060),e3=n(73008),e4=n(63016),e8=n(14661),e9=n(52611);async function e7(e,t){let{blockNumber:n,blockTag:r="latest",blocks:a,returnFullTransactions:s,traceTransfers:i,validation:o}=t;try{let t=[];for(let e of a){var l;let n=e.blockOverrides?(l=e.blockOverrides,{..."bigint"==typeof l.baseFeePerGas&&{baseFeePerGas:ez(l.baseFeePerGas)},..."bigint"==typeof l.blobBaseFee&&{blobBaseFee:ez(l.blobBaseFee)},..."string"==typeof l.feeRecipient&&{feeRecipient:l.feeRecipient},..."bigint"==typeof l.gasLimit&&{gasLimit:ez(l.gasLimit)},..."bigint"==typeof l.number&&{number:ez(l.number)},..."bigint"==typeof l.prevRandao&&{prevRandao:ez(l.prevRandao)},..."bigint"==typeof l.time&&{time:ez(l.time)},...l.withdrawals&&{withdrawals:l.withdrawals.map(e2)}}):void 0,r=e.calls.map(e=>{let t=e.account?(0,T.J)(e.account):void 0,n={...e,data:e.abi?(0,V.p)(e):e.data,from:e.from??t?.address};return(0,M.c)(n),(0,P.Bv)(n)}),a=e.stateOverrides?(0,e9.yH)(e.stateOverrides):void 0;t.push({blockOverrides:n,calls:r,stateOverrides:a})}let c=n?(0,N.cK)(n):void 0;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:t,returnFullTransactions:s,traceTransfers:i,validation:o},c||r]})).map((e,t)=>({...(0,e8.$)(e),calls:e.calls.map((e,n)=>{let{abi:r,args:s,functionName:i,to:o}=a[t].calls[n],l=e.error?.data??e.returnData,c=BigInt(e.gasUsed),u=e.logs?.map(e=>(0,ex.e)(e)),d="0x1"===e.status?"success":"failure",m=r&&"success"===d&&"0x"!==l?(0,e3.e)({abi:r,data:l,functionName:i}):null,f=(()=>{let t;if("success"!==d&&(e.error?.data==="0x"?t=new L.O:e.error&&(t=new e5.$S(e.error)),t))return(0,J.j)(t,{abi:r??[],address:o,args:s,functionName:i??"<unknown>"})})();return{data:l,gasUsed:c,logs:u,status:d,..."success"===d?{result:m}:{error:f}}})}))}catch(t){let e=(0,e4.l)(t,{});if(e instanceof e6.RM)throw t;throw e}}var te=n(35303),tt=n(71680),tn=n(57804),tr=n(54991),ta=n(88648),ts=n(66308);let ti={zero:48,nine:57,A:65,F:70,a:97,f:102};function to(e){return e>=ti.zero&&e<=ti.nine?e-ti.zero:e>=ti.A&&e<=ti.F?e-(ti.A-10):e>=ti.a&&e<=ti.f?e-(ti.a-10):void 0}let tl=new TextEncoder;class tc extends e${constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class tu extends e${constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function td(e,t={}){var n;let{as:r="string"==typeof e?"Hex":"Bytes"}=t,a=(0,ts.lY)(e instanceof Uint8Array?e:"string"==typeof e?function(e,t={}){let{size:n}=t,r=e;n&&(ek(e,n),r=eW(e,n));let a=r.slice(2);a.length%2&&(a=`0${a}`);let s=a.length/2,i=new Uint8Array(s);for(let e=0,t=0;e<s;e++){let n=to(a.charCodeAt(t++)),r=to(a.charCodeAt(t++));if(void 0===n||void 0===r)throw new e$(`Invalid byte sequence ("${a[t-2]}${a[t-1]}" in "${a}").`);i[e]=16*n+r}return i}(e):(n=e)instanceof Uint8Array?n:new Uint8Array(n));return"Bytes"===r?a:eH(a)}class tm extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=this.keys().next().value;e&&this.delete(e)}return this}}let tf={checksum:new tm(8192)}.checksum,tp=/^0x[a-fA-F0-9]{40}$/;function th(e,t={}){let{strict:n=!0}=t;if(!tp.test(e))throw new tg({address:e,cause:new tx});if(n){if(e.toLowerCase()===e)return;if(function(e){if(tf.has(e))return tf.get(e);th(e,{strict:!1});let t=e.substring(2).toLowerCase(),n=td(function(e,t={}){let{size:n}=t,r=tl.encode(e);if("number"==typeof n){var a;if(r.length>n)throw new tc({givenSize:r.length,maxSize:n});return a=r,function(e,t={}){let{dir:n,size:r=32}=t;if(0===r)return e;if(e.length>r)throw new tu({size:e.length,targetSize:r,type:"Bytes"});let a=new Uint8Array(r);for(let t=0;t<r;t++){let s="right"===n;a[s?t:r-t-1]=e[s?t:e.length-t-1]}return a}(a,{dir:"right",size:n})}return r}(t),{as:"Bytes"}),r=t.split("");for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&r[e]&&(r[e]=r[e].toUpperCase()),(15&n[e>>1])>=8&&r[e+1]&&(r[e+1]=r[e+1].toUpperCase());let a=`0x${r.join("")}`;return tf.set(e,a),a}(e)!==e)throw new tg({address:e,cause:new ty})}}function tb(e,t={}){let{strict:n=!0}=t??{};try{return th(e,{strict:n}),!0}catch{return!1}}class tg extends e${constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class tx extends e${constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class ty extends e${constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function tv(e){let t=!0,n="",r=0,a="",s=!1;for(let i=0;i<e.length;i++){let o=e[i];if(["(",")",","].includes(o)&&(t=!0),"("===o&&r++,")"===o&&r--,t){if(0===r){if(" "===o&&["event","function","error",""].includes(a))a="";else if(a+=o,")"===o){s=!0;break}continue}if(" "===o){","!==e[i-1]&&","!==n&&",("!==n&&(n="",t=!1);continue}a+=o,n+=o}}if(!s)throw new e$("Unable to normalize signature.");return a}function tN(e,t={}){let{prepare:n=!0}=t,r=Array.isArray(e)||"string"==typeof e?function(e){let t;if("string"==typeof e)t=(0,tr.uT)(e);else{let n=(0,tn.e)(e),r=e.length;for(let a=0;a<r;a++){let r=e[a];if(!(0,tt.WL)(r)){t=(0,tr.uT)(r,n);break}}}if(!t)throw new te.xo({signature:e});return t}(e):e;return{...r,...n?{hash:tE(r)}:{}}}function tw(e){return eK(tE(e),0,4)}function tE(e){return"string"!=typeof e&&"hash"in e&&e.hash?e.hash:td(eq(tv("string"==typeof e?e:ta.B(e))))}class tA extends e${constructor(e,t){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${tv(ta.B(e.abiItem))}\`, and`,`\`${t.type}\` in \`${tv(ta.B(t.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class tj extends e${constructor({name:e,data:t,type:n="item"}){super(`ABI ${n}${e?` with name "${e}"`:t?` with data "${t}"`:""} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}var tS=n(68050);let tI=/^(.*)\[([0-9]*)\]$/,tT=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,tC=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function tR(e){let t=0;for(let n=0;n<e.length;n++){let{dynamic:r,encoded:a}=e[n];r?t+=32:t+=eQ(a)}let n=[],r=[],a=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:o}=e[s];i?(n.push(ez(t+a,{size:32})),r.push(o),a+=eQ(o)):n.push(o)}return eG(...n,...r)}function tP(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function tM(e){let{type:t}=e;if("string"===t||"bytes"===t||t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(tM);let n=tP(e.type);return!!(n&&tM({...e,type:n[1]}))}function tF(e,t,n){let{checksumAddress:r=!1}=n??{};if(e.length!==t.length)throw new tk({expectedLength:e.length,givenLength:t.length});let a=tR(function({checksumAddress:e,parameters:t,values:n}){let r=[];for(let a=0;a<t.length;a++)r.push(function e({checksumAddress:t=!1,parameter:n,value:r}){let a=tP(n.type);if(a){let[s,i]=a;return function(t,n){let{checksumAddress:r,length:a,parameter:s}=n,i=null===a;if(!Array.isArray(t))throw new tB(t);if(!i&&t.length!==a)throw new t$({expectedLength:a,givenLength:t.length,type:`${s.type}[${a}]`});let o=!1,l=[];for(let n=0;n<t.length;n++){let a=e({checksumAddress:r,parameter:s,value:t[n]});a.dynamic&&(o=!0),l.push(a)}if(i||o){let e=tR(l);if(i){let t=ez(l.length,{size:32});return{dynamic:!0,encoded:l.length>0?eG(t,e):t}}if(o)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:eG(...l.map(({encoded:e})=>e))}}(r,{checksumAddress:t,length:s,parameter:{...n,type:i}})}if("tuple"===n.type)return function(t,n){let{checksumAddress:r,parameter:a}=n,s=!1,i=[];for(let n=0;n<a.components.length;n++){let o=a.components[n],l=Array.isArray(t)?n:o.name,c=e({checksumAddress:r,parameter:o,value:t[l]});i.push(c),c.dynamic&&(s=!0)}return{dynamic:s,encoded:s?tR(i):eG(...i.map(({encoded:e})=>e))}}(r,{checksumAddress:t,parameter:n});if("address"===n.type){var s=r,i={checksum:t};let{checksum:e=!1}=i;return th(s,{strict:e}),{dynamic:!1,encoded:eY(s.toLowerCase())}}if("bool"===n.type){var o=r;if("boolean"!=typeof o)throw new e$(`Invalid boolean value: "${o}" (type: ${typeof o}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:eY(eU(o))}}if(n.type.startsWith("uint")||n.type.startsWith("int")){let e=n.type.startsWith("int"),[,,t="256"]=tC.exec(n.type)??[];return function(e,{signed:t,size:n}){if("number"==typeof n){let r=2n**(BigInt(n)-(t?1n:0n))-1n,a=t?-r-1n:0n;if(e>r||e<a)throw new eX({max:r.toString(),min:a.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:ez(e,{size:32,signed:t})}}(r,{signed:e,size:Number(t)})}if(n.type.startsWith("bytes"))return function(e,{type:t}){let[,n]=t.split("bytes"),r=eQ(e);if(!n){let t=e;return r%32!=0&&(t=eW(t,32*Math.ceil((e.length-2)/2/32))),{dynamic:!0,encoded:eG(eY(ez(r,{size:32})),t)}}if(r!==Number.parseInt(n))throw new tL({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:eW(e)}}(r,{type:n.type});if("string"===n.type){var l=r;let e=eq(l),t=Math.ceil(eQ(e)/32),n=[];for(let r=0;r<t;r++)n.push(eW(eK(e,32*r,(r+1)*32)));return{dynamic:!0,encoded:eG(eW(ez(eQ(e),{size:32})),...n)}}throw new t_(n.type)}({checksumAddress:e,parameter:t[a],value:n[a]}));return r}({checksumAddress:r,parameters:e,values:t}));return 0===a.length?"0x":a}function tO(e,t){if(e.length!==t.length)throw new tk({expectedLength:e.length,givenLength:t.length});let n=[];for(let r=0;r<e.length;r++){let a=e[r],s=t[r];n.push(tO.encode(a,s))}return eG(...n)}(tO||(tO={})).encode=function e(t,n,r=!1){if("address"===t)return th(n),eY(n.toLowerCase(),32*!!r);if("string"===t)return eq(n);if("bytes"===t)return n;if("bool"===t)return eY(eU(n),r?32:1);let a=t.match(tC);if(a){let[e,t,s="256"]=a,i=Number.parseInt(s)/8;return ez(n,{size:r?32:i,signed:"int"===t})}let s=t.match(tT);if(s){let[e,t]=s;if(Number.parseInt(t)!==(n.length-2)/2)throw new tL({expectedSize:Number.parseInt(t),value:n});return eW(n,32*!!r)}let i=t.match(tI);if(i&&Array.isArray(n)){let[t,r]=i,a=[];for(let t=0;t<n.length;t++)a.push(e(r,n[t],!0));return 0===a.length?"0x":eG(...a)}throw new t_(t)};class t$ extends e${constructor({expectedLength:e,givenLength:t,type:n}){super(`Array length mismatch for type \`${n}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class tL extends e${constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${eQ(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class tk extends e${constructor({expectedLength:e,givenLength:t}){super(`ABI encoding parameters/values length mismatch.
Expected length (parameters): ${e}
Given length (values): ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class tB extends e${constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class t_ extends e${constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function tD(e,t={}){return tN(e,t)}let tG="0x0000000000000000000000000000000000000000";var tU=n(73877);async function tH(e,t){let{blockNumber:n,blockTag:r,calls:a,stateOverrides:s,traceAssetChanges:i,traceTransfers:o,validation:l}=t,c=t.account?(0,T.J)(t.account):void 0;if(i&&!c)throw new k.C("`account` is required when `traceAssetChanges` is true");let u=c?function(e,t){let{bytecode:n,args:r}=t;return eG(n,e.inputs?.length&&r?.length?tF(e.inputs,r):"0x")}(tN("constructor(bytes, bytes)"),{bytecode:tU.LX,args:["0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033",function(e,...t){let{overloads:n}=e,r=n?function(e,t,n){let r=function(e,t,n){let r,{args:a=[],prepare:s=!0}=n??{},i=function(e,t={}){let{strict:n=!1}=t;try{return!function(e,t={}){let{strict:n=!1}=t;if(!e||"string"!=typeof e)throw new eV(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e)||!e.startsWith("0x"))throw new eJ(e)}(e,{strict:n}),!0}catch{return!1}}(t,{strict:!1}),o=e.filter(e=>i?"function"===e.type||"error"===e.type?tw(e)===eK(t,0,4):"event"===e.type&&tE(e)===t:"name"in e&&e.name===t);if(0===o.length)throw new tj({name:t});if(1===o.length)return{...o[0],...s?{hash:tE(o[0])}:{}};for(let e of o){if("inputs"in e){if(!a||0===a.length){if(!e.inputs||0===e.inputs.length)return{...e,...s?{hash:tE(e)}:{}};continue}if(e.inputs&&0!==e.inputs.length&&e.inputs.length===a.length&&a.every((t,n)=>{let r="inputs"in e&&e.inputs[n];return!!r&&function e(t,n){let r=typeof t,a=n.type;switch(a){case"address":return tb(t,{strict:!1});case"bool":return"boolean"===r;case"function":case"string":return"string"===r;default:if("tuple"===a&&"components"in n)return Object.values(n.components).every((n,r)=>e(Object.values(t)[r],n));if(/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(a))return"number"===r||"bigint"===r;if(/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(a))return"string"===r||t instanceof Uint8Array;if(/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(a))return Array.isArray(t)&&t.every(t=>e(t,{...n,type:a.replace(/(\[[0-9]{0,}\])$/,"")}));return!1}}(t,r)})){if(r&&"inputs"in r&&r.inputs){let t=function e(t,n,r){for(let a in t){let s=t[a],i=n[a];if("tuple"===s.type&&"tuple"===i.type&&"components"in s&&"components"in i)return e(s.components,i.components,r[a]);let o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")||(o.includes("address")&&o.includes("string")||o.includes("address")&&o.includes("bytes"))&&tb(r[a],{strict:!1}))return o}}(e.inputs,r.inputs,a);if(t)throw new tA({abiItem:e,type:t[0]},{abiItem:r,type:t[1]})}r=e}}}let l=(()=>{if(r)return r;let[e,...t]=o;return{...e,overloads:t}})();if(!l)throw new tj({name:t});return{...l,...s?{hash:tE(l)}:{}}}(e,t,n);if("function"!==r.type)throw new tj({name:t,type:"function"});return r}([e,...n],e.name,{args:t[0]}):e,a=tw(r),s=t.length>0?tF(r.inputs,t[0]):void 0;return s?eG(a,s):a}(tD("function getBalance(address)"),[c.address])]}):void 0,d=i?await Promise.all(t.calls.map(async t=>{if(!t.data&&!t.abi)return;let{accessList:n}=await F(e,{account:c.address,...t,data:t.abi?(0,V.p)(t):t.data});return n.map(({address:e,storageKeys:t})=>t.length>0?e:null)})).then(e=>e.flat().filter(Boolean)):[],m=s?.map(e=>e.address===c?.address?{...e,nonce:0}:e),f=await e7(e,{blockNumber:n,blockTag:r,blocks:[...i?[{calls:[{data:u}],stateOverrides:s},{calls:d.map((e,t)=>({abi:[tD("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[c.address],to:e,from:tG,nonce:t})),stateOverrides:[{address:tG,nonce:0}]}]:[],{calls:[...a,{}].map((e,t)=>({...e,from:c?.address,nonce:t})),stateOverrides:m},...i?[{calls:[{data:u}]},{calls:d.map((e,t)=>({abi:[tD("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[c.address],to:e,from:tG,nonce:t})),stateOverrides:[{address:tG,nonce:0}]},{calls:d.map((e,t)=>({to:e,abi:[tD("function decimals() returns (uint256)")],functionName:"decimals",from:tG,nonce:t})),stateOverrides:[{address:tG,nonce:0}]},{calls:d.map((e,t)=>({to:e,abi:[tD("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:tG,nonce:t})),stateOverrides:[{address:tG,nonce:0}]},{calls:d.map((e,t)=>({to:e,abi:[tD("function symbol() returns (string)")],functionName:"symbol",from:tG,nonce:t})),stateOverrides:[{address:tG,nonce:0}]}]:[]],traceTransfers:o,validation:l}),p=i?f[2]:f[0],[h,b,,g,x,y,v,N]=i?f:[],{calls:w,...E}=p,A=w.slice(0,-1)??[],j=[...h?.calls??[],...b?.calls??[]].map(e=>"success"===e.status?(0,eo.uU)(e.data):null),S=[...g?.calls??[],...x?.calls??[]].map(e=>"success"===e.status?(0,eo.uU)(e.data):null),I=(y?.calls??[]).map(e=>"success"===e.status?e.result:null),C=(N?.calls??[]).map(e=>"success"===e.status?e.result:null),R=(v?.calls??[]).map(e=>"success"===e.status?e.result:null),P=[];for(let[e,t]of S.entries()){let n=j[e];if("bigint"!=typeof t||"bigint"!=typeof n)continue;let r=I[e-1],a=C[e-1],s=R[e-1],i=0===e?{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",decimals:18,symbol:"ETH"}:{address:d[e-1],decimals:s||r?Number(r??1):void 0,symbol:a??void 0};P.some(e=>e.token.address===i.address)||P.push({token:i,value:{pre:n,post:t,diff:t-n}})}return{assetChanges:P,block:E,results:A}}async function tz(e,t){let{abi:n,address:r,args:a,dataSuffix:s,functionName:i,...o}=t,l=o.account?(0,T.J)(o.account):e.account,c=(0,V.p)({abi:n,args:a,functionName:i});try{let{data:u}=await (0,E.T)(e,I.T,"call")({batch:!1,data:`${c}${s?s.replace("0x",""):""}`,to:r,...o,account:l}),d=(0,e3.e)({abi:n,args:a,functionName:i,data:u||"0x"}),m=n.filter(e=>"name"in e&&e.name===t.functionName);return{result:d,request:{abi:m,address:r,args:a,dataSuffix:s,functionName:i,...o,account:l}}}catch(e){throw(0,J.j)(e,{abi:n,address:r,args:a,docsPath:"/docs/contract/simulateContract",functionName:i,sender:l?.address})}}async function tq(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}var tY=n(32419);function tW(e,t){return(0,D.S)(function(e){let t="string"==typeof e?(0,N.i3)(e):"string"==typeof e.raw?e.raw:(0,N.My)(e.raw),n=(0,N.i3)(`\x19Ethereum Signed Message:
${(0,em.E)(t)}`);return(0,tY.xW)([n,t])}(e),t)}var tK=n(73711),tQ=n(12810),tX=n(6141),tV=n(35106);let tJ="0x6492649264926492649264926492649264926492649264926492649264926492";var tZ=n(65701),t0=n(9430),t1=n(2920);async function t2(e,t){let{address:n,factory:r,factoryData:a,hash:s,signature:i,universalSignatureVerifierAddress:o=e.chain?.contracts?.universalSignatureVerifier?.address,...l}=t,c=(0,tV.q)(i)?i:"object"==typeof i&&"r"in i&&"s"in i?function({r:e,s:t,to:n="hex",v:r,yParity:a}){let s=(()=>{if(0===a||1===a)return a;if(r&&(27n===r||28n===r||r>=35n))return+(r%2n===0n);throw Error("Invalid `v` or `yParity` value")})(),i=`0x${new t1.secp256k1.Signature((0,eo.uU)(e),(0,eo.uU)(t)).toCompactHex()}${0===s?"1b":"1c"}`;return"hex"===n?i:(0,_.aT)(i)}(i):(0,N.My)(i),u=await (async()=>{if(!r&&!a||(0,tZ.iN)(c,-32)===tJ)return c;let{address:e,data:t,signature:n,to:s="hex"}={address:r,data:a,signature:c},i=(0,tY.aP)([(0,U.h)([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,t,n]),tJ]);return"hex"===s?i:(0,_.aT)(i)})();try{let t=o?{to:o,data:(0,V.p)({abi:tK._,functionName:"isValidSig",args:[n,s,u]}),...l}:{data:(0,tQ.m)({abi:tK._,args:[n,s,u],bytecode:tU.nP}),...l},{data:r}=await (0,E.T)(e,I.T,"call")(t);return(0,eo.Nx)(r??"0x0")}catch(e){try{if((0,ed.h)((0,tX.b)(n),await (0,t0.x)({hash:s,signature:i})))return!0}catch{}if(e instanceof e5.zX)return!1;throw e}}async function t5(e,{address:t,message:n,factory:r,factoryData:a,signature:s,...i}){return t2(e,{address:t,factory:r,factoryData:a,hash:tW(n),signature:s,...i})}var t6=n(64746),t3=n(83599);class t4 extends k.C{constructor({domain:e}){super(`Invalid domain "${(0,t3.A)(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class t8 extends k.C{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class t9 extends k.C{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}var t7=n(55925),ne=n(23105);function nt({data:e,primaryType:t,types:n}){let r=function e({data:t,primaryType:n,types:r}){let a=[{type:"bytes32"}],s=[function({primaryType:e,types:t}){let n=(0,N.nj)(function({primaryType:e,types:t}){let n="",r=function e({primaryType:t,types:n},r=new Set){let a=t.match(/^\w*/u),s=a?.[0];if(r.has(s)||void 0===n[s])return r;for(let t of(r.add(s),n[s]))e({primaryType:t.type,types:n},r);return r}({primaryType:e,types:t});for(let a of(r.delete(e),[e,...Array.from(r).sort()]))n+=`${a}(${t[a].map(({name:e,type:t})=>`${t} ${e}`).join(",")})`;return n}({primaryType:e,types:t}));return(0,D.S)(n)}({primaryType:n,types:r})];for(let i of r[n]){let[n,o]=function t({types:n,name:r,type:a,value:s}){if(void 0!==n[a])return[{type:"bytes32"},(0,D.S)(e({data:s,primaryType:a,types:n}))];if("bytes"===a){let e=s.length%2?"0":"";return s=`0x${e+s.slice(2)}`,[{type:"bytes32"},(0,D.S)(s)]}if("string"===a)return[{type:"bytes32"},(0,D.S)((0,N.nj)(s))];if(a.lastIndexOf("]")===a.length-1){let e=a.slice(0,a.lastIndexOf("[")),i=s.map(a=>t({name:r,type:e,types:n,value:a}));return[{type:"bytes32"},(0,D.S)((0,U.h)(i.map(([e])=>e),i.map(([,e])=>e)))]}return[{type:a},s]}({types:r,name:i.name,type:i.type,value:t[i.name]});a.push(n),s.push(o)}return(0,U.h)(a,s)}({data:e,primaryType:t,types:n});return(0,D.S)(r)}async function nn(e,t){let{address:n,factory:r,factoryData:a,signature:s,message:i,primaryType:o,types:l,domain:c,...u}=t;return t2(e,{address:n,factory:r,factoryData:a,hash:function(e){let{domain:t={},message:n,primaryType:r}=e,a={EIP712Domain:function({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},("number"==typeof e?.chainId||"bigint"==typeof e?.chainId)&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}({domain:t}),...e.types},{domain:s,message:i,primaryType:o,types:l}={domain:t,message:n,primaryType:r,types:a},c=(e,t)=>{for(let n of e){let{name:e,type:r}=n,a=t[e],s=r.match(ne.Ge);if(s&&("number"==typeof a||"bigint"==typeof a)){let[e,t,n]=s;(0,N.cK)(a,{signed:"int"===t,size:Number.parseInt(n)/8})}if("address"===r&&"string"==typeof a&&!(0,t7.P)(a))throw new t6.M({address:a});let i=r.match(ne.BD);if(i){let[e,t]=i;if(t&&(0,em.E)(a)!==Number.parseInt(t))throw new L.BI({expectedSize:Number.parseInt(t),givenSize:(0,em.E)(a)})}let o=l[r];o&&(function(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new t9({type:e})}(r),c(o,a))}};if(l.EIP712Domain&&s){if("object"!=typeof s)throw new t4({domain:s});c(l.EIP712Domain,s)}if("EIP712Domain"!==o)if(l[o])c(l[o],i);else throw new t8({primaryType:o,types:l});let u=["0x1901"];return t&&u.push(function({domain:e,types:t}){return nt({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:a})),"EIP712Domain"!==r&&u.push(nt({data:n,primaryType:r,types:a})),(0,D.S)((0,tY.xW)(u))}({message:i,primaryType:o,types:l,domain:c}),signature:s,...u})}var nr=n(58956),na=n(63231),ns=n(80566),ni=n(78369),no=n(67221);let nl=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,nc=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;async function nu(e,t){let{address:n,domain:r,message:a,nonce:s,scheme:i,signature:o,time:l=new Date,...c}=t,u=function(e){let{scheme:t,statement:n,...r}=e.match(nl)?.groups??{},{chainId:a,expirationTime:s,issuedAt:i,notBefore:o,requestId:l,...c}=e.match(nc)?.groups??{},u=e.split("Resources:")[1]?.split("\n- ").slice(1);return{...r,...c,...a?{chainId:Number(a)}:{},...s?{expirationTime:new Date(s)}:{},...i?{issuedAt:new Date(i)}:{},...o?{notBefore:new Date(o)}:{},...l?{requestId:l}:{},...u?{resources:u}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}(a);if(!u.address||!function(e){let{address:t,domain:n,message:r,nonce:a,scheme:s,time:i=new Date}=e;if(n&&r.domain!==n||a&&r.nonce!==a||s&&r.scheme!==s||r.expirationTime&&i>=r.expirationTime||r.notBefore&&i<r.notBefore)return!1;try{if(!r.address||t&&!(0,ed.h)(r.address,t))return!1}catch{return!1}return!0}({address:n,domain:r,message:u,nonce:s,scheme:i,time:l}))return!1;let d=tW(a);return t2(e,{address:u.address,hash:d,signature:o,...c})}var nd=n(45782),nm=n(45802);function nf(e){return{call:t=>(0,I.T)(e,t),createAccessList:t=>F(e,t),createBlockFilter:()=>$(e),createContractEventFilter:t=>K(e,t),createEventFilter:t=>Q(e,t),createPendingTransactionFilter:()=>X(e),estimateContractGas:t=>ee(e,t),estimateGas:t=>(0,Z.Q)(e,t),getBalance:t=>(0,er.r)(e,t),getBlobBaseFee:()=>ea(e),getBlock:t=>(0,es.g)(e,t),getBlockNumber:t=>(0,ei.G)(e,t),getBlockTransactionCount:t=>el(e,t),getBytecode:t=>eu(e,t),getChainId:()=>(0,ec.T)(e),getCode:t=>eu(e,t),getContractEvents:t=>ev(e,t),getEip712Domain:t=>ew(e,t),getEnsAddress:t=>(0,g.B)(e,t),getEnsAvatar:t=>(0,x.i)(e,t),getEnsName:t=>(0,y.s)(e,t),getEnsResolver:t=>j(e,t),getEnsText:t=>(0,S.m)(e,t),getFeeHistory:t=>eA(e,t),estimateFeesPerGas:t=>(0,et._)(e,t),getFilterChanges:t=>ej(e,t),getFilterLogs:t=>eS(e,t),getGasPrice:()=>(0,eI.L)(e),getLogs:t=>ey(e,t),getProof:t=>eT(e,t),estimateMaxPriorityFeePerGas:t=>(0,en.b)(e,t),getStorageAt:t=>eC(e,t),getTransaction:t=>(0,eR.x)(e,t),getTransactionConfirmations:t=>eP(e,t),getTransactionCount:t=>(0,eM.y)(e,t),getTransactionReceipt:t=>(0,eF.h)(e,t),multicall:t=>(0,eO.C)(e,t),prepareTransactionRequest:t=>(0,nd.ft)(e,t),readContract:t=>(0,A.J)(e,t),sendRawTransaction:t=>(0,nm.L)(e,t),simulate:t=>e7(e,t),simulateBlocks:t=>e7(e,t),simulateCalls:t=>tH(e,t),simulateContract:t=>tz(e,t),verifyMessage:t=>t5(e,t),verifySiweMessage:t=>nu(e,t),verifyTypedData:t=>nn(e,t),uninstallFilter:t=>tq(e,t),waitForTransactionReceipt:t=>(0,nr.n)(e,t),watchBlocks:t=>(function(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:a,onError:s,includeTransactions:i,poll:o,pollingInterval:l=e.pollingInterval}){let c,u,d,m,f=void 0!==o?o:"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type),p=i??!1;return f?(()=>{let i=(0,t3.A)(["watchBlocks",e.uid,t,n,r,p,l]);return(0,ns.lB)(i,{onBlock:a,onError:s},a=>(0,ni.w)(async()=>{try{let r=await (0,E.T)(e,es.g,"getBlock")({blockTag:t,includeTransactions:p});if(r.number&&c?.number){if(r.number===c.number)return;if(r.number-c.number>1&&n)for(let t=c?.number+1n;t<r.number;t++){let n=await (0,E.T)(e,es.g,"getBlock")({blockNumber:t,includeTransactions:p});a.onBlock(n,c),c=n}}(!c?.number||"pending"===t&&!r?.number||r.number&&r.number>c.number)&&(a.onBlock(r,c),c=r)}catch(e){a.onError?.(e)}},{emitOnBegin:r,interval:l}))})():(u=!0,d=!0,m=()=>u=!1,(async()=>{try{r&&(0,E.T)(e,es.g,"getBlock")({blockTag:t,includeTransactions:p}).then(e=>{u&&d&&(a(e,void 0),d=!1)});let n=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type);return t?t.value:e.transport}return e.transport})(),{unsubscribe:i}=await n.subscribe({params:["newHeads"],async onData(t){if(!u)return;let n=await (0,E.T)(e,es.g,"getBlock")({blockNumber:t.blockNumber,includeTransactions:p}).catch(()=>{});u&&(a(n,c),d=!1,c=n)},onError(e){s?.(e)}});m=i,u||m()}catch(e){s?.(e)}})(),()=>m())})(e,t),watchBlockNumber:t=>(0,na.q)(e,t),watchContractEvent:t=>(function(e,t){let{abi:n,address:r,args:a,batch:s=!0,eventName:i,fromBlock:o,onError:l,onLogs:c,poll:u,pollingInterval:d=e.pollingInterval,strict:m}=t;return(void 0!==u?u:"bigint"==typeof o||"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type))?(()=>{let t=m??!1,u=(0,t3.A)(["watchContractEvent",r,a,s,e.uid,i,d,t,o]);return(0,ns.lB)(u,{onLogs:c,onError:l},l=>{let c,u;void 0!==o&&(c=o-1n);let m=!1,f=(0,ni.w)(async()=>{if(!m){try{u=await (0,E.T)(e,K,"createContractEventFilter")({abi:n,address:r,args:a,eventName:i,strict:t,fromBlock:o})}catch{}m=!0;return}try{let o;if(u)o=await (0,E.T)(e,ej,"getFilterChanges")({filter:u});else{let s=await (0,E.T)(e,ei.G,"getBlockNumber")({});o=c&&c<s?await (0,E.T)(e,ev,"getContractEvents")({abi:n,address:r,args:a,eventName:i,fromBlock:c+1n,toBlock:s,strict:t}):[],c=s}if(0===o.length)return;if(s)l.onLogs(o);else for(let e of o)l.onLogs([e])}catch(e){u&&e instanceof no.Di&&(m=!1),l.onError?.(e)}},{emitOnBegin:!0,interval:d});return async()=>{u&&await (0,E.T)(e,tq,"uninstallFilter")({filter:u}),f()}})})():(()=>{let t=(0,t3.A)(["watchContractEvent",r,a,s,e.uid,i,d,m??!1]),o=!0,u=()=>o=!1;return(0,ns.lB)(t,{onLogs:c,onError:l},t=>((async()=>{try{let s=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type);return t?t.value:e.transport}return e.transport})(),l=i?Y({abi:n,eventName:i,args:a}):[],{unsubscribe:c}=await s.subscribe({params:["logs",{address:r,topics:l}],onData(e){if(!o)return;let r=e.result;try{let{eventName:e,args:a}=eb({abi:n,data:r.data,topics:r.topics,strict:m}),s=(0,ex.e)(r,{args:a,eventName:e});t.onLogs([s])}catch(s){let e,n;if(s instanceof L.fo||s instanceof L.l3){if(m)return;e=s.abiItem.name,n=s.abiItem.inputs?.some(e=>!("name"in e&&e.name))}let a=(0,ex.e)(r,{args:n?[]:{},eventName:e});t.onLogs([a])}},onError(e){t.onError?.(e)}});u=c,o||u()}catch(e){l?.(e)}})(),()=>u()))})()})(e,t),watchEvent:t=>(function(e,{address:t,args:n,batch:r=!0,event:a,events:s,fromBlock:i,onError:o,onLogs:l,poll:c,pollingInterval:u=e.pollingInterval,strict:d}){let m,f,p=void 0!==c?c:"bigint"==typeof i||"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type),h=d??!1;return p?(()=>{let c=(0,t3.A)(["watchEvent",t,n,r,e.uid,a,u,i]);return(0,ns.lB)(c,{onLogs:l,onError:o},o=>{let l,c;void 0!==i&&(l=i-1n);let d=!1,m=(0,ni.w)(async()=>{if(!d){try{c=await (0,E.T)(e,Q,"createEventFilter")({address:t,args:n,event:a,events:s,strict:h,fromBlock:i})}catch{}d=!0;return}try{let i;if(c)i=await (0,E.T)(e,ej,"getFilterChanges")({filter:c});else{let r=await (0,E.T)(e,ei.G,"getBlockNumber")({});i=l&&l!==r?await (0,E.T)(e,ey,"getLogs")({address:t,args:n,event:a,events:s,fromBlock:l+1n,toBlock:r}):[],l=r}if(0===i.length)return;if(r)o.onLogs(i);else for(let e of i)o.onLogs([e])}catch(e){c&&e instanceof no.Di&&(d=!1),o.onError?.(e)}},{emitOnBegin:!0,interval:u});return async()=>{c&&await (0,E.T)(e,tq,"uninstallFilter")({filter:c}),m()}})})():(m=!0,f=()=>m=!1,(async()=>{try{let r=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type);return t?t.value:e.transport}return e.transport})(),i=s??(a?[a]:void 0),c=[];i&&(c=[i.flatMap(e=>Y({abi:[e],eventName:e.name,args:n}))],a&&(c=c[0]));let{unsubscribe:u}=await r.subscribe({params:["logs",{address:t,topics:c}],onData(e){if(!m)return;let t=e.result;try{let{eventName:e,args:n}=eb({abi:i??[],data:t.data,topics:t.topics,strict:h}),r=(0,ex.e)(t,{args:n,eventName:e});l([r])}catch(a){let e,n;if(a instanceof L.fo||a instanceof L.l3){if(d)return;e=a.abiItem.name,n=a.abiItem.inputs?.some(e=>!("name"in e&&e.name))}let r=(0,ex.e)(t,{args:n?[]:{},eventName:e});l([r])}},onError(e){o?.(e)}});f=u,m||f()}catch(e){o?.(e)}})(),()=>f())})(e,t),watchPendingTransactions:t=>(function(e,{batch:t=!0,onError:n,onTransactions:r,poll:a,pollingInterval:s=e.pollingInterval}){let i,o;return(void 0!==a?a:"webSocket"!==e.transport.type)?(()=>{let a=(0,t3.A)(["watchPendingTransactions",e.uid,t,s]);return(0,ns.lB)(a,{onTransactions:r,onError:n},n=>{let r,a=(0,ni.w)(async()=>{try{if(!r)try{r=await (0,E.T)(e,X,"createPendingTransactionFilter")({});return}catch(e){throw a(),e}let s=await (0,E.T)(e,ej,"getFilterChanges")({filter:r});if(0===s.length)return;if(t)n.onTransactions(s);else for(let e of s)n.onTransactions([e])}catch(e){n.onError?.(e)}},{emitOnBegin:!0,interval:s});return async()=>{r&&await (0,E.T)(e,tq,"uninstallFilter")({filter:r}),a()}})})():(i=!0,o=()=>i=!1,(async()=>{try{let{unsubscribe:t}=await e.transport.subscribe({params:["newPendingTransactions"],onData(e){if(!i)return;let t=e.result;r([t])},onError(e){n?.(e)}});o=t,i||o()}catch(e){n?.(e)}})(),()=>o())})(e,t)}}function np(e,t={}){let n=function(e,t={}){let n;try{n=e.getClient(t)}catch{}return n}(e,t);return n?.extend(nf)}var nh=n(39733);function nb(e={}){let t=(0,h.U)(e);return(0,nh.useSyncExternalStoreWithSelector)(e=>(function(e,t){let{onChange:n}=t;return e.subscribe(()=>np(e),n,{equalityFn:(e,t)=>e?.uid===t?.uid})})(t,{onChange:e}),()=>np(t,e),()=>np(t,e),e=>e,(e,t)=>e?.uid===t?.uid)}var ng=n(18038),nx=n(6996),ny=n(44056),nv=n(32054),nN=n(89709);function nw(e,t="wei"){return(0,nN.X)(e,nv.eL[t])}var nE=n(52855),nA=function(e){return e[e.BANANA_MINER=1]="BANANA_MINER",e[e.MONKEY_TOASTER=3]="MONKEY_TOASTER",e[e.GORILLA_GADGET=2]="GORILLA_GADGET",e[e.APEPAD_MINI=4]="APEPAD_MINI",e}({});let nj={1:{id:1,name:"BANANA MINER",image:"/banana-miner.gif",hashrate:100,energyConsumption:1,price:0,description:"YOUR FIRST BANANA MINER IS FREE!",isActive:!0},3:{id:3,name:"MONKEY TOASTER",image:"/monkey-toaster.gif",hashrate:1e3,energyConsumption:10,price:20,description:"10X HASHRATE OF BANANA MINER",isActive:!0},2:{id:2,name:"GORILLA GADGET",image:"/gorilla-gadget.gif",hashrate:5e4,energyConsumption:5,price:60,description:"50X HASHRATE OF BANANA MINER",isActive:!0},4:{id:4,name:"APEPAD MINI",image:"/apepad.png",hashrate:2e3,energyConsumption:10,price:5e3,description:"20X HASHRATE OF BANANA MINER",isActive:!0}},nS=()=>Object.values(nj).filter(e=>e.isActive);function nI(){let{address:e,isConnected:t}=(0,m.F)(),n=nb(),[r,a]=(0,i.useState)("0"),[s,o]=(0,i.useState)("0"),[l]=(0,i.useState)("0"),[c,u]=(0,i.useState)(!1),[d]=(0,i.useState)(0),[f]=(0,i.useState)(0),[p]=(0,i.useState)("0"),[h]=(0,i.useState)("0"),[g]=(0,i.useState)("0"),[x]=(0,i.useState)("0"),[y]=(0,i.useState)("0"),[v,N]=(0,i.useState)(!1),[w,E]=(0,i.useState)(!1),[A,j]=(0,i.useState)(!1),[S,I]=(0,i.useState)(!1),[T,C]=(0,i.useState)(0),[R,P]=(0,i.useState)("0"),[M,F]=(0,i.useState)([]),[O,$]=(0,i.useState)(!1),{data:L}=(0,ng.Q)({address:nE.QX.MAIN,abi:nE.aL,functionName:"miningHasStarted",query:{enabled:!0}}),{data:k}=(0,ng.Q)({address:nE.QX.MAIN,abi:nE.aL,functionName:"initializedStarterFacility",args:[e||tG],query:{enabled:!!e}}),{data:B}=(0,nx.A)({address:e,chainId:nE.ol,query:{enabled:!!e}}),{data:_}=(0,ng.Q)({address:nE.Z_,abi:nE.lD,functionName:"balanceOf",args:[e||tG],query:{enabled:!!e}}),{data:D}=(0,ng.Q)({address:nE.QX.MAIN,abi:nE.aL,functionName:"getPlayerFacility",args:[e||tG],query:{enabled:!!e}}),{data:G,refetch:U}=(0,ng.Q)({address:nE.QX.MAIN,abi:nE.aL,functionName:"initializedStarterFacility",args:[e],query:{enabled:!!e}}),{data:H}=(0,ng.Q)({address:nE.QX.MAIN,abi:nE.aL,functionName:"getUserReferralInfo",args:[e],query:{enabled:!!e}}),{data:z,refetch:q}=(0,ng.Q)({address:nE.QX.MAIN,abi:nE.aL,functionName:"getPlayerStats",args:[e||tG],query:{enabled:!!e}}),{data:Y,refetch:W}=(0,ng.Q)({address:nE.QX.MAIN,abi:nE.aL,functionName:"acquiredStarterMiner",args:[e],query:{enabled:!!e}}),{data:K,refetch:Q}=(0,ng.Q)({address:nE.QX.MAIN,abi:nE.aL,functionName:"getPlayerMinersPaginated",args:[e||tG,BigInt(0),BigInt(100)],query:{enabled:!!e&&c}}),{writeContract:X}=b(),V=async()=>{try{N(!0),await X({address:nE.QX.MAIN,abi:nE.aL,functionName:"purchaseInitialFacility",args:[tG],value:nw("0.005")}),await q()}catch(e){console.error("Error purchasing facility:",e)}finally{N(!1)}},J=async()=>{try{j(!0),await X({address:nE.QX.MAIN,abi:nE.aL,functionName:"claimRewards"}),await q()}catch(e){console.error("Error claiming rewards:",e)}finally{j(!1)}},Z=async()=>{try{I(!0),await X({address:nE.QX.MAIN,abi:nE.aL,functionName:"upgradeFacility"}),await q()}catch(e){console.error("Error upgrading facility:",e)}finally{I(!1)}},ee=async(t,n)=>{if(!e)return void console.error("No wallet connected");try{E(!0),await X({address:nE.QX.MAIN,abi:nE.aL,functionName:"getFreeStarterMiner",args:[BigInt(t),BigInt(n)]}),await W(),await Q()}catch(e){console.error("Error claiming starter miner:",e)}finally{E(!1)}},et=async()=>{console.log("Refetching all miner data..."),await Q()},en=async(t,r,a)=>{if(e)try{if(console.log("=== MINER PURCHASE FLOW STARTED ==="),console.log(`Attempting to purchase miner type ${t} at position (${r}, ${a})`),console.log(`Using BIT token address: ${nE.Z_}`),console.log(`Using MAIN contract address: ${nE.QX.MAIN}`),$(!0),!c)return void console.error("You must purchase a facility before buying miners");if(t===nA.BANANA_MINER&&!Y){console.log("Processing free starter miner claim..."),await ee(r,a);return}let s=nj[t].price.toString(),i=nw(s);if(console.log("=== MINER TRANSACTION INFO ==="),console.log("Contract ABI functions:",nE.aL.filter(e=>"function"===e.type).map(e=>e.name)),"0"!==s){if(console.log("=== CHECKING TOKEN APPROVAL ==="),console.log(`Miner price: ${s} BIT (${i} wei)`),!n)throw Error("Public client not available, cannot check allowance");try{let t=await n.readContract({address:nE.Z_,abi:nE.lD,functionName:"allowance",args:[e,nE.QX.MAIN]});if(console.log(`Current token allowance: ${(0,ny.c)(t)} BIT`),console.log(`Required allowance: ${(0,ny.c)(i)} BIT`),t<i){console.log("=== TOKEN APPROVAL NEEDED ==="),console.log(`Approving ${s} BIT for spending`);let e=await X({address:nE.Z_,abi:nE.lD,functionName:"approve",args:[nE.QX.MAIN,i]});console.log(`Token approval transaction submitted: ${e}`),console.log("Waiting for approval transaction confirmation..."),await new Promise(e=>setTimeout(e,8e3)),console.log("Token approval should be complete, proceeding to purchase")}else console.log("Token already has sufficient allowance - SKIPPING APPROVAL")}catch(e){throw console.error("Error checking token allowance:",e),Error(`Failed to check token allowance: ${e instanceof Error?e.message:"Unknown error"}`)}}console.log("=== EXECUTING MINER PURCHASE ===");let o=nE.aL.find(e=>"function"===e.type&&"buyMiner"===e.name);console.log("Found function in ABI:",o),console.log("Selected Miner Type:",{minerType:t,minerEnumValue:nA[t],minerDisplayName:nj[t].name,contractIndex:Number(t)});let l=BigInt(t),u=BigInt(r),d=BigInt(a);console.log("Function selector: 0x476e2e66 (buyMiner)"),console.log(`Expected calldata pattern: 0x476e2e66...${l.toString().padStart(8,"0")}...${u.toString().padStart(8,"0")}...${d.toString().padStart(8,"0")}`),console.log("Calling contract with exact parameters:",{contract:nE.QX.MAIN,function:"buyMiner",minerIndex:l.toString(),minerName:nj[t].name,minerType:t,x:u.toString(),y:d.toString()}),console.log(`MinerType Contract Validation: BANANA_MINER=${nA.BANANA_MINER}, MONKEY_TOASTER=${nA.MONKEY_TOASTER}, GORILLA_GADGET=${nA.GORILLA_GADGET}, APEPAD_MINI=${nA.APEPAD_MINI}`);let m=await X({address:nE.QX.MAIN,abi:nE.aL,functionName:"buyMiner",args:[l,u,d]});console.log(`Miner purchase transaction hash: ${m}`),console.log("=== MINER PURCHASE COMPLETED ==="),console.log("Refreshing game state data..."),console.log("Waiting for transaction confirmation and blockchain updates..."),await new Promise(e=>setTimeout(e,1e4)),console.log("Refetching player stats..."),await q(),console.log("Refetching miner data..."),await et(),await new Promise(e=>setTimeout(e,5e3)),console.log("Performing second refetch of miner data..."),await et(),console.log("All data refreshed. Current miners:",M),0===M.length&&console.log("Warning: Miners array is still empty after refresh. Suggesting manual page refresh.")}catch(e){throw console.error("ERROR IN MINER PURCHASE FLOW:",{message:e instanceof Error?e.message:"Unknown error",name:e instanceof Error?e.name:"Unknown error type",details:JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString():t,2)}),e}finally{$(!1)}};return{isConnected:t,address:e,apeBalance:r,bitBalance:s,spacesLeft:d,gigawattsAvailable:f,miningRate:p,hashRate:h,blocksUntilHalving:g,networkHashRatePercentage:x,totalNetworkHashRate:y,totalMinedBit:z?z[0].toString():"0",burnedBit:"1,238,626.5",rewardPerBlock:"2.5",minedBit:l,hasFacility:c,facilityData:D?{power:Number(D.power),level:Number(D.level),miners:Number(D.miners),capacity:Number(D.capacity),used:Number(D.used),resources:Number(D.resources),spaces:Number(D.spaces)}:null,stats:z?{totalMined:z[0],hashRate:z[1],miningRate:z[2],networkShare:z[3]}:{totalMined:BigInt(0),hashRate:BigInt(0),miningRate:BigInt(0),networkShare:BigInt(0)},purchaseFacility:V,getStarterMiner:ee,claimReward:J,upgradeFacility:Z,isPurchasingFacility:v,isGettingStarterMiner:w,isClaimingReward:A,isUpgradingFacility:S,isGameActive:!!L,isUserActive:!!k,totalReferrals:T,totalBitEarned:R,refetch:()=>{U(),q(),et()},referralInfo:{referralCode:e?e.slice(2,8).toUpperCase():"",totalReferrals:Number(T),rewardsEarned:R},initialFacilityPrice:"0.005",hasClaimedStarterMiner:!!Y,purchaseMiner:en,isPurchasingMiner:O,miners:M}}var nT=n(95078),nC=n(76180),nR=n.n(nC),nP=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(nP||{}),nM=Object.defineProperty,nF=(e,t,n)=>t in e?nM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nO=(e,t,n)=>(nF(e,"symbol"!=typeof t?t+"":t,n),n);class n${constructor(){nO(this,"current",this.detect()),nO(this,"handoffState","pending"),nO(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"server"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}}let nL=new n$,nk=(e,t)=>{nL.isServer?(0,i.useEffect)(e,t):(0,i.useLayoutEffect)(e,t)};function nB(e){let t=(0,i.useRef)(e);return nk(()=>{t.current=e},[e]),t}class n_ extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return void 0===t&&(t=this.factory(e),this.set(e,t)),t}}function nD(e,t){let n=e(),r=new Set;return{getSnapshot:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e)),dispatch(e,...a){let s=t[e].call(n,...a);s&&(n=s,r.forEach(e=>e()))}}}function nG(e){return(0,i.useSyncExternalStore)(e.subscribe,e.getSnapshot,e.getSnapshot)}let nU=new n_(()=>nD(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(-1===t)return this;let n=this.slice();return n.splice(t,1),n}}));function nH(e,t){let n=nU.get(t),r=(0,i.useId)(),a=nG(n);if(nk(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let s=a.indexOf(r),o=a.length;return -1===s&&(s=o,o+=1),s===o-1}let nz=function(e){let t=nB(e);return i.useCallback((...e)=>t.current(...e),[t])};function nq(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}function nY(){let e=[],t={addEventListener:(e,n,r,a)=>(e.addEventListener(n,r,a),t.add(()=>e.removeEventListener(n,r,a))),requestAnimationFrame(...e){let n=requestAnimationFrame(...e);return t.add(()=>cancelAnimationFrame(n))},nextFrame:(...e)=>t.requestAnimationFrame(()=>t.requestAnimationFrame(...e)),setTimeout(...e){let n=setTimeout(...e);return t.add(()=>clearTimeout(n))},microTask(...e){let n={current:!0};return nq(()=>{n.current&&e[0]()}),t.add(()=>{n.current=!1})},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add(()=>{Object.assign(e.style,{[t]:r})})},group(e){let t=nY();return e(t),this.add(()=>t.dispose())},add:t=>(e.includes(t)||e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function nW(e){var t,n;return nL.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?null!=(n=null==(t=e.current)?void 0:t.ownerDocument)?n:document:null:document}let nK=new Map,nQ=new Map;function nX(e){var t;let n=null!=(t=nQ.get(e))?t:0;return nQ.set(e,n+1),0!==n||(nK.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0),()=>(function(e){var t;let n=null!=(t=nQ.get(e))?t:1;if(1===n?nQ.delete(e):nQ.set(e,n-1),1!==n)return;let r=nK.get(e);r&&(null===r["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,nK.delete(e))})(e)}function nV(e,t,...n){if(e in t){let r=t[e];return"function"==typeof r?r(...n):r}let r=Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(e=>`"${e}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,nV),r}let nJ=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),nZ=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var n0=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(n0||{}),n1=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(n1||{}),n2=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(n2||{}),n5=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(n5||{}),n6=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(n6||{});function n3(e){null==e||e.focus({preventScroll:!0})}function n4(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:a=[]}={}){var s,i,o;let l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,c=Array.isArray(e)?n?function(e,t=e=>e){return e.slice().sort((e,n)=>{let r=t(e),a=t(n);if(null===r||null===a)return 0;let s=r.compareDocumentPosition(a);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}(e):e:64&t?function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(nZ)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e):function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(nJ)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e);a.length>0&&c.length>1&&(c=c.filter(e=>!a.some(t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))),r=null!=r?r:l.activeElement;let u=(()=>{if(5&t)return 1;if(10&t)return -1;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,c.indexOf(r))-1;if(4&t)return Math.max(0,c.indexOf(r))+1;if(8&t)return c.length-1;throw Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=32&t?{preventScroll:!0}:{},f=0,p=c.length,h;do{if(f>=p||f+p<=0)return 0;let e=d+f;if(16&t)e=(e+p)%p;else{if(e<0)return 3;if(e>=p)return 1}null==(h=c[e])||h.focus(m),f+=u}while(h!==l.activeElement);return 6&t&&null!=(o=null==(i=null==(s=h)?void 0:s.matches)?void 0:i.call(s,"textarea,input"))&&o&&h.select(),2}function n8(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function n9(...e){return(0,i.useMemo)(()=>nW(...e),[...e])}function n7(...e){return Array.from(new Set(e.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}var re=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(re||{}),rt=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(rt||{});function rn(){let e,t,n=(e=(0,i.useRef)([]),t=(0,i.useCallback)(t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)},[]),(...n)=>{if(!n.every(e=>null==e))return e.current=n,t});return(0,i.useCallback)(e=>(function({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:a,visible:s=!0,name:i,mergeRefs:o}){o=null!=o?o:ra;let l=rs(t,e);if(s)return rr(l,n,r,i,o);let c=null!=a?a:0;if(2&c){let{static:e=!1,...t}=l;if(e)return rr(t,n,r,i,o)}if(1&c){let{unmount:e=!0,...t}=l;return nV(+!e,{0:()=>null,1:()=>rr({...t,hidden:!0,style:{display:"none"}},n,r,i,o)})}return rr(l,n,r,i,o)})({mergeRefs:n,...e}),[n])}function rr(e,t={},n,r,a){let{as:s=n,children:o,refName:l="ref",...c}=rl(e,["unmount","static"]),u=void 0!==e.ref?{[l]:e.ref}:{},d="function"==typeof o?o(t):o;"className"in c&&c.className&&"function"==typeof c.className&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let m={};if(t){let e=!1,n=[];for(let[r,a]of Object.entries(t))"boolean"==typeof a&&(e=!0),!0===a&&n.push(r.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`));if(e)for(let e of(m["data-headlessui-state"]=n.join(" "),n))m[`data-${e}`]=""}if(s===i.Fragment&&(Object.keys(ro(c)).length>0||Object.keys(ro(m)).length>0))if(!(0,i.isValidElement)(d)||Array.isArray(d)&&d.length>1){if(Object.keys(ro(c)).length>0)throw Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ro(c)).concat(Object.keys(ro(m))).map(e=>`  - ${e}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>`  - ${e}`).join(`
`)].join(`
`))}else{var f;let e=d.props,t=null==e?void 0:e.className,n="function"==typeof t?(...e)=>n7(t(...e),c.className):n7(t,c.className),r=rs(d.props,ro(rl(c,["ref"])));for(let e in m)e in r&&delete m[e];return(0,i.cloneElement)(d,Object.assign({},r,m,u,{ref:a((f=d,i.version.split(".")[0]>="19"?f.props.ref:f.ref),u.ref)},n?{className:n}:{}))}return(0,i.createElement)(s,Object.assign({},rl(c,["ref"]),s!==i.Fragment&&u,s!==i.Fragment&&m),d)}function ra(...e){return e.every(e=>null==e)?void 0:t=>{for(let n of e)null!=n&&("function"==typeof n?n(t):n.current=t)}}function rs(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let r of e)for(let e in r)e.startsWith("on")&&"function"==typeof r[e]?(null!=n[e]||(n[e]=[]),n[e].push(r[e])):t[e]=r[e];if(t.disabled||t["aria-disabled"])for(let e in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(e)&&(n[e]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let e in n)Object.assign(t,{[e](t,...r){for(let a of n[e]){if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;a(t,...r)}}});return t}function ri(e){var t;return Object.assign((0,i.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function ro(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}function rl(e,t=[]){let n=Object.assign({},e);for(let e of t)e in n&&delete n[e];return n}var rc=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(rc||{});let ru=ri(function(e,t){var n;let{features:r=1,...a}=e,s={ref:t,"aria-hidden":(2&r)==2||(null!=(n=a["aria-hidden"])?n:void 0),hidden:(4&r)==4||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(4&r)==4&&(2&r)!=2&&{display:"none"}}};return rn()({ourProps:s,theirProps:a,slot:{},defaultTag:"span",name:"Hidden"})}),rd=(0,i.createContext)(null);function rm({children:e,node:t}){let[n,r]=(0,i.useState)(null),a=rf(null!=t?t:n);return i.createElement(rd.Provider,{value:a},e,null===a&&i.createElement(ru,{features:rc.Hidden,ref:e=>{var t,n;if(e){for(let a of null!=(n=null==(t=nW(e))?void 0:t.querySelectorAll("html > *, body > *"))?n:[])if(a!==document.body&&a!==document.head&&a instanceof HTMLElement&&null!=a&&a.contains(e)){r(a);break}}}}))}function rf(e=null){var t;return null!=(t=(0,i.useContext)(rd))?t:e}let rp=nD(()=>new Map,{PUSH(e,t){var n;let r=null!=(n=this.get(e))?n:{doc:e,count:0,d:nY(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r,a={doc:e,d:t,meta:function(e){let t={};for(let n of e)Object.assign(t,n(t));return t}(n)},s=[n8()?{before({doc:e,d:t,meta:n}){function r(e){return n.containers.flatMap(e=>e()).some(t=>t.contains(e))}t.microTask(()=>{var n;if("auto"!==window.getComputedStyle(e.documentElement).scrollBehavior){let n=nY();n.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>n.dispose()))}let a=null!=(n=window.scrollY)?n:window.pageYOffset,s=null;t.addEventListener(e,"click",t=>{if(t.target instanceof HTMLElement)try{let n=t.target.closest("a");if(!n)return;let{hash:a}=new URL(n.href),i=e.querySelector(a);i&&!r(i)&&(s=i)}catch{}},!0),t.addEventListener(e,"touchstart",e=>{if(e.target instanceof HTMLElement)if(r(e.target)){let n=e.target;for(;n.parentElement&&r(n.parentElement);)n=n.parentElement;t.style(n,"overscrollBehavior","contain")}else t.style(e.target,"touchAction","none")}),t.addEventListener(e,"touchmove",e=>{if(e.target instanceof HTMLElement&&"INPUT"!==e.target.tagName)if(r(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()},{passive:!1}),t.add(()=>{var e;a!==(null!=(e=window.scrollY)?e:window.pageYOffset)&&window.scrollTo(0,a),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{},{before({doc:e}){var t;let n=e.documentElement;r=Math.max(0,(null!=(t=e.defaultView)?t:window).innerWidth-n.clientWidth)},after({doc:e,d:t}){let n=e.documentElement,a=Math.max(0,n.clientWidth-n.offsetWidth),s=Math.max(0,r-a);t.style(n,"paddingRight",`${s}px`)}},{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}];s.forEach(({before:e})=>null==e?void 0:e(a)),s.forEach(({after:e})=>null==e?void 0:e(a))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});function rh(){let e,t=(e="undefined"==typeof document,"useSyncExternalStore"in o&&(0,o.useSyncExternalStore)(()=>()=>{},()=>!1,()=>!e)),[n,r]=i.useState(nL.isHandoffComplete);return n&&!1===nL.isHandoffComplete&&r(!1),i.useEffect(()=>{!0!==n&&r(!0)},[n]),i.useEffect(()=>nL.handoff(),[]),!t&&n}rp.subscribe(()=>{let e=rp.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let e="hidden"===t.get(n.doc),r=0!==n.count;(r&&!e||!r&&e)&&rp.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&rp.dispatch("TEARDOWN",n)}});let rb=Symbol();function rg(...e){let t=(0,i.useRef)(e),n=nz(e=>{for(let n of t.current)null!=n&&("function"==typeof n?n(e):n.current=e)});return e.every(e=>null==e||(null==e?void 0:e[rb]))?void 0:n}let rx=(0,i.createContext)(()=>{});function ry({value:e,children:t}){return i.createElement(rx.Provider,{value:e},t)}let rv=(0,i.createContext)(null);rv.displayName="OpenClosedContext";var rN=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(rN||{});function rw(){return(0,i.useContext)(rv)}function rE({value:e,children:t}){return i.createElement(rv.Provider,{value:e},t)}function rA({children:e}){return i.createElement(rv.Provider,{value:null},e)}let rj=(0,i.createContext)(!1);function rS(e){return i.createElement(rj.Provider,{value:e.force},e.children)}let rI=(0,i.createContext)(void 0),rT=(0,i.createContext)(null);rT.displayName="DescriptionContext";let rC=Object.assign(ri(function(e,t){let n=(0,i.useId)(),r=(0,i.useContext)(rI),{id:a=`headlessui-description-${n}`,...s}=e,o=function e(){let t=(0,i.useContext)(rT);if(null===t){let t=Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}return t}(),l=rg(t);nk(()=>o.register(a),[a,o.register]);let c=r||!1,u=(0,i.useMemo)(()=>({...o.slot,disabled:c}),[o.slot,c]),d={ref:l,...o.props,id:a};return rn()({ourProps:d,theirProps:s,slot:u,defaultTag:"p",name:o.name||"Description"})}),{});function rR(){let[e]=(0,i.useState)(nY);return e}function rP(){let e=(0,i.useRef)(!1);return nk(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function rM(e){nz(e),(0,i.useRef)(!1)}var rF=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(rF||{});function rO(e,t){(0,i.useRef)([]),nz(e)}let r$=[];function rL(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}var rk=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(rk||{});let rB=Object.assign(ri(function(e,t){let n,r=(0,i.useRef)(null),a=rg(r,t),{initialFocus:s,initialFocusFallback:o,containers:l,features:c=15,...u}=e;rh()||(c=0);let d=n9(r);!function(e,{ownerDocument:t}){let n=!!(8&e),r=function(e=!0){let t=(0,i.useRef)(r$.slice());return rO(([e],[n])=>{!0===n&&!1===e&&nq(()=>{t.current.splice(0)}),!1===n&&!0===e&&(t.current=r$.slice())},[e,r$,t]),nz(()=>{var e;return null!=(e=t.current.find(e=>null!=e&&e.isConnected))?e:null})}(n);rO(()=>{n||(null==t?void 0:t.activeElement)===(null==t?void 0:t.body)&&n3(r())},[n]),rM(()=>{n&&n3(r())})}(c,{ownerDocument:d});let m=function(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:a}){let s=(0,i.useRef)(null),o=nH(!!(1&e),"focus-trap#initial-focus"),l=rP();return rO(()=>{if(0===e)return;if(!o){null!=a&&a.current&&n3(a.current);return}let i=n.current;i&&nq(()=>{if(!l.current)return;let n=null==t?void 0:t.activeElement;if(null!=r&&r.current){if((null==r?void 0:r.current)===n){s.current=n;return}}else if(i.contains(n)){s.current=n;return}if(null!=r&&r.current)n3(r.current);else{if(16&e){if(n4(i,n0.First|n0.AutoFocus)!==n1.Error)return}else if(n4(i,n0.First)!==n1.Error)return;if(null!=a&&a.current&&(n3(a.current),(null==t?void 0:t.activeElement)===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}s.current=null==t?void 0:t.activeElement})},[a,o,e]),s}(c,{ownerDocument:d,container:r,initialFocus:s,initialFocusFallback:o});!function(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:a}){var s;let i=rP(),o=!!(4&e);null==t||t.defaultView,nB(e=>{if(!o||!i.current)return;let t=rL(r);n.current instanceof HTMLElement&&t.add(n.current);let s=a.current;if(!s)return;let l=e.target;l&&l instanceof HTMLElement?r_(t,l)?(a.current=l,n3(l)):(e.preventDefault(),e.stopPropagation(),n3(s)):n3(a.current)})}(c,{ownerDocument:d,container:r,containers:l,previousActiveElement:m});let f=(n=(0,i.useRef)(0),nB(e=>{"Tab"===e.key&&(n.current=+!!e.shiftKey)}),n),p=nz(e=>{let t=r.current;t&&nV(f.current,{[rF.Forwards]:()=>{n4(t,n0.First,{skipElements:[e.relatedTarget,o]})},[rF.Backwards]:()=>{n4(t,n0.Last,{skipElements:[e.relatedTarget,o]})}})}),h=nH(!!(2&c),"focus-trap#tab-lock"),b=rR(),g=(0,i.useRef)(!1),x=rn();return i.createElement(i.Fragment,null,h&&i.createElement(ru,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:rc.Focusable}),x({ourProps:{ref:a,onKeyDown(e){"Tab"==e.key&&(g.current=!0,b.requestAnimationFrame(()=>{g.current=!1}))},onBlur(e){if(!(4&c))return;let t=rL(l);r.current instanceof HTMLElement&&t.add(r.current);let n=e.relatedTarget;n instanceof HTMLElement&&"true"!==n.dataset.headlessuiFocusGuard&&(r_(t,n)||(g.current?n4(r.current,nV(f.current,{[rF.Forwards]:()=>n0.Next,[rF.Backwards]:()=>n0.Previous})|n0.WrapAround,{relativeTo:e.target}):e.target instanceof HTMLElement&&n3(e.target)))}},theirProps:u,defaultTag:"div",name:"FocusTrap"}),h&&i.createElement(ru,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:rc.Focusable}))}),{features:rk});function r_(e,t){for(let n of e)if(n.contains(t))return!0;return!1}var rD=n(51215);let rG=i.Fragment,rU=ri(function(e,t){let{ownerDocument:n=null,...r}=e,a=(0,i.useRef)(null),s=rg(function(e,t=!0){return Object.assign(e,{[rb]:t})}(e=>{a.current=e}),t),o=n9(a),l=null!=n?n:o,c=function(e){let t=(0,i.useContext)(rj),n=(0,i.useContext)(rz),[r,a]=(0,i.useState)(()=>{var r;if(!t&&null!==n)return null!=(r=n.current)?r:null;if(nL.isServer)return null;let a=null==e?void 0:e.getElementById("headlessui-portal-root");if(a)return a;if(null===e)return null;let s=e.createElement("div");return s.setAttribute("id","headlessui-portal-root"),e.body.appendChild(s)});return r}(l),[u]=(0,i.useState)(()=>{var e;return nL.isServer?null:null!=(e=null==l?void 0:l.createElement("div"))?e:null}),d=(0,i.useContext)(rq),m=rh();nk(()=>{!c||!u||c.contains(u)||(u.setAttribute("data-headlessui-portal",""),c.appendChild(u))},[c,u]),nk(()=>{if(u&&d)return d.register(u)},[d,u]),rM(()=>{var e;c&&u&&(u instanceof Node&&c.contains(u)&&c.removeChild(u),c.childNodes.length<=0&&(null==(e=c.parentElement)||e.removeChild(c)))});let f=rn();return m&&c&&u?(0,rD.createPortal)(f({ourProps:{ref:s},theirProps:r,slot:{},defaultTag:rG,name:"Portal"}),u):null}),rH=i.Fragment,rz=(0,i.createContext)(null),rq=(0,i.createContext)(null),rY=ri(function(e,t){let n=rg(t),{enabled:r=!0,ownerDocument:a,...s}=e,o=rn();return r?i.createElement(rU,{...s,ownerDocument:a,ref:n}):o({ourProps:{ref:n},theirProps:s,slot:{},defaultTag:rG,name:"Portal"})}),rW=ri(function(e,t){let{target:n,...r}=e,a={ref:rg(t)},s=rn();return i.createElement(rz.Provider,{value:n},s({ourProps:a,theirProps:r,defaultTag:rH,name:"Popover.Group"}))}),rK=Object.assign(rY,{Group:rW});"undefined"!=typeof process&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&(null==(r=null==process?void 0:process.env)?void 0:r.NODE_ENV)==="test"&&void 0===(null==(a=null==Element?void 0:Element.prototype)?void 0:a.getAnimations)&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var rQ=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(rQ||{});function rX(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||(null!=(t=e.as)?t:r2)!==i.Fragment||1===i.Children.count(e.children)}let rV=(0,i.createContext)(null);rV.displayName="TransitionContext";var rJ=(e=>(e.Visible="visible",e.Hidden="hidden",e))(rJ||{});let rZ=(0,i.createContext)(null);function r0(e){return"children"in e?r0(e.children):e.current.filter(({el:e})=>null!==e.current).filter(({state:e})=>"visible"===e).length>0}function r1(e,t){let n=nB(e),r=(0,i.useRef)([]),a=rP(),s=rR(),o=nz((e,t=rt.Hidden)=>{let i=r.current.findIndex(({el:t})=>t===e);-1!==i&&(nV(t,{[rt.Unmount](){r.current.splice(i,1)},[rt.Hidden](){r.current[i].state="hidden"}}),s.microTask(()=>{var e;!r0(r)&&a.current&&(null==(e=n.current)||e.call(n))}))}),l=nz(e=>{let t=r.current.find(({el:t})=>t===e);return t?"visible"!==t.state&&(t.state="visible"):r.current.push({el:e,state:"visible"}),()=>o(e,rt.Unmount)}),c=(0,i.useRef)([]),u=(0,i.useRef)(Promise.resolve()),d=(0,i.useRef)({enter:[],leave:[]}),m=nz((e,n,r)=>{c.current.splice(0),t&&(t.chains.current[n]=t.chains.current[n].filter(([t])=>t!==e)),null==t||t.chains.current[n].push([e,new Promise(e=>{c.current.push(e)})]),null==t||t.chains.current[n].push([e,new Promise(e=>{Promise.all(d.current[n].map(([e,t])=>t)).then(()=>e())})]),"enter"===n?u.current=u.current.then(()=>null==t?void 0:t.wait.current).then(()=>r(n)):r(n)}),f=nz((e,t,n)=>{Promise.all(d.current[t].splice(0).map(([e,t])=>t)).then(()=>{var e;null==(e=c.current.shift())||e()}).then(()=>n(t))});return(0,i.useMemo)(()=>({children:r,register:l,unregister:o,onStart:m,onStop:f,wait:u,chains:d}),[l,o,r,m,f,d,u])}rZ.displayName="NestingContext";let r2=i.Fragment,r5=re.RenderStrategy,r6=ri(function(e,t){let{show:n,appear:r=!1,unmount:a=!0,...s}=e,o=(0,i.useRef)(null),l=rg(...rX(e)?[o,t]:null===t?[]:[t]);rh();let c=rw();if(void 0===n&&null!==c&&(n=(c&rN.Open)===rN.Open),void 0===n)throw Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=(0,i.useState)(n?"visible":"hidden"),m=r1(()=>{n||d("hidden")}),[f,p]=(0,i.useState)(!0),h=(0,i.useRef)([n]);nk(()=>{!1!==f&&h.current[h.current.length-1]!==n&&(h.current.push(n),p(!1))},[h,n]);let b=(0,i.useMemo)(()=>({show:n,appear:r,initial:f}),[n,r,f]);nk(()=>{n?d("visible"):r0(m)||null===o.current||d("hidden")},[n,m]);let g={unmount:a},x=nz(()=>{var t;f&&p(!1),null==(t=e.beforeEnter)||t.call(e)}),y=nz(()=>{var t;f&&p(!1),null==(t=e.beforeLeave)||t.call(e)}),v=rn();return i.createElement(rZ.Provider,{value:m},i.createElement(rV.Provider,{value:b},v({ourProps:{...g,as:i.Fragment,children:i.createElement(r3,{ref:l,...g,...s,beforeEnter:x,beforeLeave:y})},theirProps:{},defaultTag:i.Fragment,features:r5,visible:"visible"===u,name:"Transition"})))}),r3=ri(function(e,t){var n,r;let{transition:a=!0,beforeEnter:s,afterEnter:o,beforeLeave:l,afterLeave:c,enter:u,enterFrom:d,enterTo:m,entered:f,leave:p,leaveFrom:h,leaveTo:b,...g}=e,[x,y]=(0,i.useState)(null),v=(0,i.useRef)(null),N=rX(e),w=rg(...N?[v,t,y]:null===t?[]:[t]),E=null==(n=g.unmount)||n?rt.Unmount:rt.Hidden,{show:A,appear:j,initial:S}=function(){let e=(0,i.useContext)(rV);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[I,T]=(0,i.useState)(A?"visible":"hidden"),C=function(){let e=(0,i.useContext)(rZ);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:R,unregister:P}=C;nk(()=>R(v),[R,v]),nk(()=>{if(E===rt.Hidden&&v.current)return A&&"visible"!==I?void T("visible"):nV(I,{hidden:()=>P(v),visible:()=>R(v)})},[I,v,R,P,A,E]);let M=rh();nk(()=>{if(N&&M&&"visible"===I&&null===v.current)throw Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[v,I,M,N]);let F=j&&A&&S,O=(0,i.useRef)(!1),$=r1(()=>{O.current||(T("hidden"),P(v))},C),[,L]=function(e,t,n,r){let[a,s]=(0,i.useState)(n),{hasFlag:o,addFlag:l,removeFlag:c}=function(e=0){let[t,n]=(0,i.useState)(e),r=(0,i.useCallback)(e=>n(e),[t]),a=(0,i.useCallback)(e=>n(t=>t|e),[t]),s=(0,i.useCallback)(e=>(t&e)===e,[t]);return{flags:t,setFlag:r,addFlag:a,hasFlag:s,removeFlag:(0,i.useCallback)(e=>n(t=>t&~e),[n]),toggleFlag:(0,i.useCallback)(e=>n(t=>t^e),[n])}}(e&&a?3:0),u=(0,i.useRef)(!1),d=(0,i.useRef)(!1);return nk(()=>{var a;if(e){if(n&&s(!0),!t){n&&l(3);return}return null==(a=null==r?void 0:r.start)||a.call(r,n),function(e,{prepare:t,run:n,done:r,inFlight:a}){let s=nY();return function(e,{inFlight:t,prepare:n}){if(null!=t&&t.current)return n();let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}(e,{prepare:t,inFlight:a}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(function(e,t){var n,r;let a=nY();if(!e)return a.dispose;let s=!1;a.add(()=>{s=!0});let i=null!=(r=null==(n=e.getAnimations)?void 0:n.call(e).filter(e=>e instanceof CSSTransition))?r:[];return 0===i.length?t():Promise.allSettled(i.map(e=>e.finished)).then(()=>{s||t()}),a.dispose}(e,r))})}),s.dispose}(t,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,d.current||(n?(l(3),c(4)):(l(4),c(2)))},run(){d.current?n?(c(3),l(4)):(c(4),l(3)):n?c(1):l(1)},done(){var e;d.current&&"function"==typeof t.getAnimations&&t.getAnimations().length>0||(u.current=!1,c(7),n||s(!1),null==(e=null==r?void 0:r.end)||e.call(r,n))}})}},[e,n,t,rR()]),e?[a,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}(!(!a||!N||!M||S&&!j),x,A,{start:nz(e=>{O.current=!0,$.onStart(v,e?"enter":"leave",e=>{"enter"===e?null==s||s():"leave"===e&&(null==l||l())})}),end:nz(e=>{let t=e?"enter":"leave";O.current=!1,$.onStop(v,t,e=>{"enter"===e?null==o||o():"leave"===e&&(null==c||c())}),"leave"!==t||r0($)||(T("hidden"),P(v))})}),k=ro({ref:w,className:(null==(r=n7(g.className,F&&u,F&&d,L.enter&&u,L.enter&&L.closed&&d,L.enter&&!L.closed&&m,L.leave&&p,L.leave&&!L.closed&&h,L.leave&&L.closed&&b,!L.transition&&A&&f))?void 0:r.trim())||void 0,...function(e){let t={};for(let n in e)!0===e[n]&&(t[`data-${n}`]="");return t}(L)}),B=0;"visible"===I&&(B|=rN.Open),"hidden"===I&&(B|=rN.Closed),L.enter&&(B|=rN.Opening),L.leave&&(B|=rN.Closing);let _=rn();return i.createElement(rZ.Provider,{value:$},i.createElement(rE,{value:B},_({ourProps:k,theirProps:g,defaultTag:r2,features:r5,visible:"visible"===I,name:"Transition.Child"})))}),r4=ri(function(e,t){let n=null!==(0,i.useContext)(rV),r=null!==rw();return i.createElement(i.Fragment,null,!n&&r?i.createElement(r6,{ref:t,...e}):i.createElement(r3,{ref:t,...e}))}),r8=Object.assign(r6,{Child:r4,Root:r6});var r9=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(r9||{}),r7=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(r7||{});let ae={0:(e,t)=>e.titleId===t.id?e:{...e,titleId:t.id}},at=(0,i.createContext)(null);function an(e){let t=(0,i.useContext)(at);if(null===t){let t=Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,an),t}return t}function ar(e,t){return nV(t.type,ae,e,t)}at.displayName="DialogContext";let aa=ri(function(e,t){let n,r,a,s,o,l,c,u,d,m,f=(0,i.useId)(),{id:p=`headlessui-dialog-${f}`,open:h,onClose:b,initialFocus:g,role:x="dialog",autoFocus:y=!0,__demoMode:v=!1,unmount:N=!1,...w}=e,E=(0,i.useRef)(!1);x="dialog"===x||"alertdialog"===x?x:(E.current||(E.current=!0,console.warn(`Invalid role [${x}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog");let A=rw();void 0===h&&null!==A&&(h=(A&rN.Open)===rN.Open);let j=(0,i.useRef)(null),S=rg(j,t),I=n9(j),T=+!h,[C,R]=(0,i.useReducer)(ar,{titleId:null,descriptionId:null,panelRef:(0,i.createRef)()}),P=nz(()=>b(!1)),M=nz(e=>R({type:0,id:e})),F=!!rh()&&0===T,[O,$]=(n=(0,i.useContext)(rq),r=(0,i.useRef)([]),a=nz(e=>(r.current.push(e),n&&n.register(e),()=>s(e))),s=nz(e=>{let t=r.current.indexOf(e);-1!==t&&r.current.splice(t,1),n&&n.unregister(e)}),o=(0,i.useMemo)(()=>({register:a,unregister:s,portals:r}),[a,s,r]),[r,(0,i.useMemo)(()=>function({children:e}){return i.createElement(rq.Provider,{value:o},e)},[o])]),L=rf(),{resolveContainers:k}=function({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=n9(n),a=nz(()=>{var a,s;let i=[];for(let t of e)null!==t&&(t instanceof HTMLElement?i.push(t):"current"in t&&t.current instanceof HTMLElement&&i.push(t.current));if(null!=t&&t.current)for(let e of t.current)i.push(e);for(let e of null!=(a=null==r?void 0:r.querySelectorAll("html > *, body > *"))?a:[])e!==document.body&&e!==document.head&&e instanceof HTMLElement&&"headlessui-portal-root"!==e.id&&(n&&(e.contains(n)||e.contains(null==(s=null==n?void 0:n.getRootNode())?void 0:s.host))||i.some(t=>e.contains(t))||i.push(e));return i});return{resolveContainers:a,contains:nz(e=>a().some(t=>t.contains(e)))}}({mainTreeNode:L,portals:O,defaultContainers:[{get current(){var B;return null!=(B=C.panelRef.current)?B:j.current}}]}),_=null!==A&&(A&rN.Closing)===rN.Closing;(function(e,{allowed:t,disallowed:n}={}){let r=nH(e,"inert-others");nk(()=>{var e,a;if(!r)return;let s=nY();for(let t of null!=(e=null==n?void 0:n())?e:[])t&&s.add(nX(t));let i=null!=(a=null==t?void 0:t())?a:[];for(let e of i){if(!e)continue;let t=nW(e);if(!t)continue;let n=e.parentElement;for(;n&&n!==t.body;){for(let e of n.children)i.some(t=>e.contains(t))||s.add(nX(e));n=n.parentElement}}return s.dispose},[r,t,n])})(!v&&!_&&F,{allowed:nz(()=>{var e,t;return[null!=(t=null==(e=j.current)?void 0:e.closest("[data-headlessui-portal]"))?t:null]}),disallowed:nz(()=>{var e;return[null!=(e=null==L?void 0:L.closest("body > *:not(#headlessui-portal-root)"))?e:null]})}),nH(F,"outside-click"),c=nB(e=>{e.preventDefault(),P()}),u=(0,i.useCallback)(function(e,t){if(e.defaultPrevented)return;let n=t(e);if(null!==n&&n.getRootNode().contains(n)&&n.isConnected){for(let t of function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(k))if(null!==t&&(t.contains(n)||e.composed&&e.composedPath().includes(t)))return;return function(e,t=0){var n;return e!==(null==(n=nW(e))?void 0:n.body)&&nV(t,{0:()=>e.matches(nJ),1(){let t=e;for(;null!==t;){if(t.matches(nJ))return!0;t=t.parentElement}return!1}})}(n,n5.Loose)||-1===n.tabIndex||e.preventDefault(),c.current(e,n)}},[c,k]),d=(0,i.useRef)(null),nB(e=>{var t,n;d.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target}),nB(e=>{var t,n;d.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target}),nB(e=>{n8()||/Android/gi.test(window.navigator.userAgent)||d.current&&(u(e,()=>d.current),d.current=null)}),m=(0,i.useRef)({x:0,y:0}),nB(e=>{m.current.x=e.touches[0].clientX,m.current.y=e.touches[0].clientY}),nB(e=>{let t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};if(!(Math.abs(t.x-m.current.x)>=30||Math.abs(t.y-m.current.y)>=30))return u(e,()=>e.target instanceof HTMLElement?e.target:null)}),nB(e=>u(e,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null)),function(e,t="undefined"!=typeof document?document.defaultView:null,n){let r=nH(e,"escape");nB(e=>{r&&(e.defaultPrevented||e.key===nP.Escape&&n(e))})}(F,null==I?void 0:I.defaultView,e=>{e.preventDefault(),e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur(),P()}),function(e,t,n=()=>[document.body]){!function(e,t,n=()=>({containers:[]})){let r=nG(rp),a=t?r.get(t):void 0;a&&a.count,nk(()=>{if(!(!t||!e))return rp.dispatch("PUSH",t,n),()=>rp.dispatch("POP",t,n)},[e,t])}(nH(e,"scroll-lock"),t,e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],n]}})}(!v&&!_&&F,I,k),nB(e=>{let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&P()});let[D,G]=function(){let[e,t]=(0,i.useState)([]);return[e.length>0?e.join(" "):void 0,(0,i.useMemo)(()=>function(e){let n=nz(e=>(t(t=>[...t,e]),()=>t(t=>{let n=t.slice(),r=n.indexOf(e);return -1!==r&&n.splice(r,1),n}))),r=(0,i.useMemo)(()=>({register:n,slot:e.slot,name:e.name,props:e.props,value:e.value}),[n,e.slot,e.name,e.props,e.value]);return i.createElement(rT.Provider,{value:r},e.children)},[t])]}(),U=(0,i.useMemo)(()=>[{dialogState:T,close:P,setTitleId:M,unmount:N},C],[T,C,P,M,N]),H=(0,i.useMemo)(()=>({open:0===T}),[T]),z={ref:S,id:p,role:x,tabIndex:-1,"aria-modal":v?void 0:0===T||void 0,"aria-labelledby":C.titleId,"aria-describedby":D,unmount:N},q=!function(){var e;let[t]=(0,i.useState)(()=>null),[n,r]=(0,i.useState)(null!=(e=null==t?void 0:t.matches)&&e);return nk(()=>{if(t)return t.addEventListener("change",e),()=>t.removeEventListener("change",e);function e(e){r(e.matches)}},[t]),n}(),Y=rk.None;F&&!v&&(Y|=rk.RestoreFocus,Y|=rk.TabLock,y&&(Y|=rk.AutoFocus),q&&(Y|=rk.InitialFocus));let W=rn();return i.createElement(rA,null,i.createElement(rS,{force:!0},i.createElement(rK,null,i.createElement(at.Provider,{value:U},i.createElement(rW,{target:j},i.createElement(rS,{force:!1},i.createElement(G,{slot:H},i.createElement($,null,i.createElement(rB,{initialFocus:g,initialFocusFallback:j,containers:k,features:Y},i.createElement(ry,{value:P},W({ourProps:z,theirProps:w,slot:H,defaultTag:as,features:ai,visible:0===T,name:"Dialog"})))))))))))}),as="div",ai=re.RenderStrategy|re.Static,ao=Object.assign(ri(function(e,t){let{transition:n=!1,open:r,...a}=e,s=rw(),o=e.hasOwnProperty("open")||null!==s,l=e.hasOwnProperty("onClose");if(!o&&!l)throw Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&"boolean"!=typeof e.open)throw Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if("function"!=typeof e.onClose)throw Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(void 0!==r||n)&&!a.static?i.createElement(rm,null,i.createElement(r8,{show:r,transition:n,unmount:a.unmount},i.createElement(aa,{ref:t,...a}))):i.createElement(rm,null,i.createElement(aa,{ref:t,open:r,...a}))}),{Panel:ri(function(e,t){let n=(0,i.useId)(),{id:r=`headlessui-dialog-panel-${n}`,transition:a=!1,...s}=e,[{dialogState:o,unmount:l},c]=an("Dialog.Panel"),u=rg(t,c.panelRef),d=(0,i.useMemo)(()=>({open:0===o}),[o]),m=nz(e=>{e.stopPropagation()}),f=a?r4:i.Fragment,p=rn();return i.createElement(f,{...a?{unmount:l}:{}},p({ourProps:{ref:u,id:r,onClick:m},theirProps:s,slot:d,defaultTag:"div",name:"Dialog.Panel"}))}),Title:(ri(function(e,t){let{transition:n=!1,...r}=e,[{dialogState:a,unmount:s}]=an("Dialog.Backdrop"),o=(0,i.useMemo)(()=>({open:0===a}),[a]),l=n?r4:i.Fragment,c=rn();return i.createElement(l,{...n?{unmount:s}:{}},c({ourProps:{ref:t,"aria-hidden":!0},theirProps:r,slot:o,defaultTag:"div",name:"Dialog.Backdrop"}))}),ri(function(e,t){let n=(0,i.useId)(),{id:r=`headlessui-dialog-title-${n}`,...a}=e,[{dialogState:s,setTitleId:o}]=an("Dialog.Title"),l=rg(t),c=(0,i.useMemo)(()=>({open:0===s}),[s]);return rn()({ourProps:{ref:l,id:r},theirProps:a,slot:c,defaultTag:"h2",name:"Dialog.Title"})})),Description:rC}),al=`
  .facility-modal-content {
    max-height: 90vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
`,ac=function({isOpen:e,onClose:t,onConfirm:n}){let{purchaseFacility:r,isPurchasingFacility:a,apeBalance:i,initialFacilityPrice:o}=nI(),l=parseFloat(i)>=parseFloat(o),c=async()=>{await r(),n?.()};return(0,s.jsxs)(ao,{open:e,onClose:t,className:"relative z-50",children:[(0,s.jsx)(nR(),{id:al.__hash,children:al}),(0,s.jsx)("div",{"aria-hidden":"true",className:"fixed inset-0 bg-black/70 transition-opacity duration-300"}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:(0,s.jsxs)(ao.Panel,{className:"w-full max-w-md bg-royal border-2 border-banana p-6 shadow-lg shadow-black/25 transform transition-all facility-modal-content",children:[(0,s.jsx)(ao.Title,{className:"font-press-start text-xl text-banana mb-6 text-center",children:"PURCHASE INITIAL FACILITY"}),(0,s.jsxs)("div",{className:"bg-royal-dark p-6 mb-8 border border-banana/20",children:[(0,s.jsxs)("p",{className:"font-press-start text-white text-sm text-center",children:["Purchase your initial facility for ",o," APE to start mining BIT."]}),!l&&(0,s.jsxs)("p",{className:"font-press-start text-red-500 text-sm mt-4 text-center",children:["You need at least ",o," APE to purchase a facility."]})]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-6",children:[(0,s.jsx)("button",{onClick:t,className:"font-press-start px-8 py-3 border-2 border-banana text-banana hover:bg-banana/10 active:bg-banana/20 transition-colors duration-150",children:"CANCEL"}),(0,s.jsx)("button",{onClick:c,disabled:!l||a,className:"font-press-start px-8 py-3 bg-banana text-royal hover:bg-banana/90 active:bg-banana/80 transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"PURCHASING...":"PURCHASE FACILITY"})]})]})})]})};var au=n(1592);let ad=({isOpen:e,onClose:t,totalReferrals:n,totalBitEarned:r})=>{let{address:a}=(0,m.F)(),i=a?`https://bitape.tech?ref=${a}`:"";return(0,s.jsxs)(ao,{open:e,onClose:t,className:"relative z-50",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/70","aria-hidden":"true"}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,s.jsx)(ao.Panel,{className:"w-full max-w-2xl bg-royal border-4 border-banana rounded-lg shadow-xl overflow-y-auto max-h-[90vh]",children:(0,s.jsxs)("div",{className:"p-4 md:p-6",children:[(0,s.jsx)(ao.Title,{className:"text-lg md:text-xl font-press-start text-center text-banana mb-4",children:"REFER A FRIEND"}),(0,s.jsx)("p",{className:"text-xs md:text-sm font-press-start text-center text-white mb-6 md:mb-8",children:"SHARE YOUR REFERRAL LINK WITH FRIENDS AND EARN A 2.5% BONUS OF WHATEVER $BIT THEY MINE!"}),(0,s.jsxs)("div",{className:"bg-royal-dark p-3 md:p-4 mb-6 md:mb-8 rounded",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between mb-6 space-y-4 sm:space-y-0",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-press-start text-white text-xs md:text-sm mb-2",children:"TOTAL REFERRALS"}),(0,s.jsx)("p",{className:"font-press-start text-banana text-lg md:text-xl",children:n})]}),(0,s.jsxs)("div",{className:"sm:text-right",children:[(0,s.jsx)("p",{className:"font-press-start text-white text-xs md:text-sm mb-2",children:"TOTAL BIT EARNED"}),(0,s.jsxs)("p",{className:"font-press-start text-banana text-lg md:text-xl",children:[r," $BIT"]})]})]}),(0,s.jsx)("p",{className:"font-press-start text-white text-xs md:text-sm mb-2",children:"YOUR REFERRAL LINK"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,s.jsx)("input",{type:"text",readOnly:!0,value:i,"aria-label":"Your referral link",title:"Your referral link",className:"flex-1 bg-royal font-press-start text-banana p-2 border-2 border-banana text-xs md:text-sm overflow-x-auto whitespace-nowrap"}),(0,s.jsx)("button",{onClick:()=>navigator.clipboard.writeText(i),className:"px-6 py-2 bg-banana font-press-start text-royal hover:bg-banana-dark transition-colors text-xs md:text-sm whitespace-nowrap",children:"COPY"})]})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("button",{onClick:t,className:"px-6 py-2 bg-transparent font-press-start text-banana border-2 border-banana hover:bg-banana hover:text-royal transition-colors text-xs md:text-sm",children:"CLOSE"})})]})})})]})},am=`
  @keyframes float {
    0% { transform: translateY(0px) rotate(0deg); }
    25% { transform: translateY(-5px) rotate(-3deg); }
    50% { transform: translateY(0px) rotate(0deg); }
    75% { transform: translateY(5px) rotate(3deg); }
    100% { transform: translateY(0px) rotate(0deg); }
  }

  .miner-float {
    animation: float 3s ease-in-out infinite;
  }
  
  @keyframes pulse {
    0% { opacity: 0.7; }
    50% { opacity: 1; }
    100% { opacity: 0.7; }
  }
  
  .instruction-pulse {
    animation: pulse 2s infinite;
  }
  
  /* Ensure modal is scrollable on mobile */
  .starter-miner-modal {
    max-height: 90vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
`,af=({isOpen:e,onClose:t,onClaim:n,selectedTile:r,isProcessing:a})=>{let[o,c]=(0,i.useState)(e),u=(0,i.useCallback)(()=>{c(!1),setTimeout(()=>{t()},300)},[t]);return((0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&u()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[u]),o)?(0,s.jsxs)(ao,{open:o,onClose:()=>{},className:"relative z-50",children:[(0,s.jsx)(nR(),{id:am.__hash,children:am}),(0,s.jsx)("div",{"aria-hidden":"true",className:"fixed inset-0 bg-black/70"}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:(0,s.jsxs)(ao.Panel,{className:"relative bg-royal border-2 border-banana p-6 max-w-lg w-full m-4 starter-miner-modal",children:[(0,s.jsx)(ao.Title,{className:"font-press-start text-2xl text-banana mb-6 text-center",children:"CLAIM YOUR FREE BANANA MINER"}),(0,s.jsx)("div",{className:"bg-royal-dark p-6 mb-8 border border-banana/20",children:(0,s.jsxs)("div",{className:"space-y-4 font-press-start",children:[(0,s.jsxs)("div",{className:"mb-4 border border-banana/50 p-3 bg-black/50",children:[(0,s.jsx)("p",{className:"text-white text-center font-bold",children:"HOW TO CLAIM YOUR MINER:"}),(0,s.jsxs)("ol",{className:"list-decimal pl-6 text-white mt-2 space-y-2",children:[(0,s.jsx)("li",{className:"text-yellow-300 font-bold",children:'Click "CLOSE" button below'}),(0,s.jsx)("li",{className:"text-yellow-300 font-bold",children:'Click "SHOW GRID" button in the top-left'}),(0,s.jsx)("li",{className:"text-yellow-300 font-bold",children:"Click one of the highlighted tiles"}),(0,s.jsx)("li",{className:"text-yellow-300 font-bold",children:'Click "CLAIM STARTER MINER" button'})]})]}),r?(0,s.jsxs)("p",{className:"text-green-400 text-center font-bold",children:["✓ Tile Selected: X:",r.x,", Y:",r.y]}):(0,s.jsx)("p",{className:"text-yellow-300 text-center animate-pulse",children:"No tile selected yet"}),(0,s.jsxs)("div",{className:"relative w-48 h-48 mx-auto mb-6",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:`relative w-40 h-40 ${r?"miner-float":""}`,children:(0,s.jsx)(l.default,{src:"/banana-miner.gif",alt:"Banana Miner",fill:!0,className:"object-contain",style:{filter:r?"drop-shadow(0 0 10px #FFDD00)":"none"}})})}),r&&(0,s.jsx)("div",{className:"absolute bottom-0 w-full",children:(0,s.jsx)("div",{className:"bg-royal border border-banana rounded-full w-24 h-6 mx-auto flex items-center justify-center",children:(0,s.jsxs)("p",{className:"text-banana text-xs font-press-start",children:["POSITION ",r.x,",",r.y]})})})]}),(0,s.jsxs)("div",{className:"space-y-2 text-white",children:[(0,s.jsx)("p",{children:"- HASH RATE: 100 GH/S"}),(0,s.jsx)("p",{children:"- ENERGY: 1 WATT"}),(0,s.jsx)("p",{children:"- PRICE: FREE"}),(0,s.jsx)("p",{className:"text-yellow-300 mt-4",children:"This is your free starter miner! You can only claim one per wallet."})]})]})}),(0,s.jsxs)("div",{className:"flex justify-between space-x-4",children:[(0,s.jsx)("button",{onClick:u,className:"font-press-start px-6 py-2 border-2 border-banana text-banana hover:bg-banana hover:text-royal transition-colors",children:"CLOSE"}),r?(0,s.jsx)("button",{onClick:()=>r&&n(r.x,r.y),disabled:!r||a,className:"font-press-start px-6 py-2 bg-banana text-royal hover:bg-opacity-90 transition-colors disabled:opacity-50",children:a?"CLAIMING...":"CLAIM FREE MINER"}):(0,s.jsx)("button",{onClick:u,className:"font-press-start px-6 py-2 bg-banana text-royal hover:bg-opacity-90 transition-colors",children:"CLOSE & SELECT TILE"})]})]})})]}):null},ap=`
  @keyframes pulse {
    0% { filter: drop-shadow(0 0 1px #FFDD00); }
    50% { filter: drop-shadow(0 0 8px #FFDD00); }
    100% { filter: drop-shadow(0 0 1px #FFDD00); }
  }

  .miner-pulse {
    animation: pulse 2s infinite;
  }

  @keyframes preview-pulse {
    0% { filter: drop-shadow(0 0 1px #FFDD00); opacity: 0.7; }
    50% { filter: drop-shadow(0 0 12px #FFDD00); opacity: 0.9; }
    100% { filter: drop-shadow(0 0 1px #FFDD00); opacity: 0.7; }
  }

  .miner-preview {
    animation: preview-pulse 1.5s infinite;
  }
`;function ah({hasFacility:e,facilityData:t,onPurchaseFacility:n,onGetStarterMiner:r,onUpgradeFacility:a,isPurchasingFacility:o,isGettingStarterMiner:c,isUpgradingFacility:u,onTileSelect:d,address:m,isGridMode:f,toggleGridMode:p,hasClaimedStarterMiner:h,miners:b=[],onPurchaseMiner:g}){let[x,y]=(0,i.useState)(),[v,N]=(0,i.useState)(!1),[w,E]=(0,i.useState)(nA.BANANA_MINER),[A,j]=(0,i.useState)([]),[S,I]=(0,i.useState)(!1),{data:T}=(0,ng.Q)({address:nE.QX.MAIN,abi:nE.aL,functionName:"acquiredStarterMiner",args:[m||tG],query:{enabled:!!m}}),{data:C,isLoading:R,refetch:P}=(0,ng.Q)({address:nE.QX.MAIN,abi:[...nE.aL,{inputs:[{name:"player",type:"address"}],name:"getPlayerMiners",outputs:[{name:"",type:"uint256[]"}],stateMutability:"view",type:"function"}],functionName:"getPlayerMiners",args:[m||tG],query:{enabled:!!m&&e}}),M=!!T,F=(e,t)=>{f&&(y({x:e,y:t}),d&&d(e,t))},O=async(e,t)=>{console.log(`Claiming starter miner at position (${e}, ${t})`);try{g?(console.log("Using onPurchaseMiner to claim starter miner"),await g(nA.BANANA_MINER,e,t)):(console.log("Using onGetStarterMiner to claim starter miner"),await r(e,t)),console.log("Starter miner claimed successfully"),N(!1),P(),p&&!f&&(console.log("Enabling grid mode after claiming miner"),p())}catch(e){console.error("Error claiming starter miner:",e)}},$=()=>{console.log("Getting all miner positions");let e=[...A];b&&b.length>0&&(console.log("Processing miners from props:",b),b.forEach(t=>{let n=Number(t.x),r=Number(t.y);if(n>1||r>1)return void console.warn(`⚠️ Miner at invalid grid position (${n}, ${r}). Valid positions are (0,0), (0,1), (1,0), and (1,1).`);let a=void 0!==t.minerType?t.minerType:void 0!==t.type?t.type:nA.BANANA_MINER;if(console.log(`Processing miner from props at position (${n}, ${r}) of type ${a} (${nj[a]?.name})`),!e.some(e=>{let a=Number(e.x),s=Number(e.y),i=a===n&&s===r,o=e.id===t.id;return i&&console.log(`Found existing miner at same position (${a}, ${s})`),o||i})){console.log(`Adding new miner at position (${n}, ${r}) of type ${a}`),1===n&&0===r&&console.log("\uD83D\uDCCD Special handling for miner at position (1, 0)");let s=nj[a]?.image||"/banana-miner.gif";e.push({...t,x:n,y:r,minerType:a,image:s})}}));let t=e.some(e=>1===Number(e.x)&&0===Number(e.y));console.log(`Position (1,0) miner present: ${t}`),console.log("Valid miners for grid positions:",e.filter(e=>1>=Number(e.x)&&1>=Number(e.y))),e.forEach(e=>{console.log(`MINER: ID=${e.id}, Type=${e.minerType} (${nj[e.minerType]?.name}), Position=(${e.x},${e.y}), Image=${e.image}`)});let n=e.filter(e=>1>=Number(e.x)&&1>=Number(e.y));return console.log("Final miners list for display:",n),n},L=[{x:0,y:0,top:"40%",left:"40%",width:"15%",height:"15%"},{x:1,y:0,top:"46%",left:"29%",width:"15%",height:"15%"},{x:0,y:1,top:"50%",left:"55%",width:"15%",height:"15%"},{x:1,y:1,top:"60%",left:"35%",width:"15%",height:"15%"}],k=(()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e})();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nR(),{id:ap.__hash,children:ap}),(0,s.jsxs)("div",{className:"relative w-full h-full",children:[e?(0,s.jsx)(l.default,{src:"/bedroom.png",alt:"Mining Room",fill:!0,priority:!0,className:`object-contain ${k?"mobile-room-bg":""}`,style:{objectFit:"contain",maxWidth:"100%",maxHeight:"100%"}}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-dark-blue",children:(0,s.jsx)(l.default,{src:"/bedroom.png",alt:"Empty Space",width:690,height:690,className:"opacity-30"})}),e&&p&&(0,s.jsx)("button",{onClick:p,className:`absolute top-2 left-2 z-30 px-2 py-1 font-press-start text-xs transition-all ${f?"bg-banana text-royal":"bg-transparent text-banana border border-banana"} ${k?"mobile-grid-btn":""}`,children:f?"HIDE GRID":"SHOW GRID"}),e&&(0,s.jsx)("button",{onClick:a,disabled:u,className:`absolute top-2 right-2 z-30 px-2 py-1 font-press-start text-xs bg-transparent text-banana border border-banana hover:bg-banana hover:text-royal transition-all disabled:opacity-50 disabled:cursor-not-allowed ${k?"mobile-upgrade-btn":""}`,children:u?"UPGRADING...":"UPGRADE FACILITY"}),e&&!(h||M)&&(0,s.jsx)("button",{onClick:()=>{N(!0)},disabled:c,className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 z-30 px-4 py-2 font-press-start text-xs bg-banana text-royal hover:bg-opacity-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?"CLAIMING...":"CLAIM STARTER MINER"}),e&&(()=>{let e=$();console.log("Grid positions:",L),console.log("All miners for rendering:",e);let t=(t,n)=>{console.log(`Checking if tile (${t}, ${n}) is occupied`);let r=Number(t),a=Number(n),s=e.some(e=>{let t=Number(e.x),n=Number(e.y),s=t===r&&n===a;return console.log(`Comparing miner at (${t}, ${n}) with target (${r}, ${a}): ${s}`),s});return console.log(`Tile (${t}, ${n}) occupied: ${s}`),s};return(0,s.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[S&&(0,s.jsx)("div",{className:"absolute top-2 right-2 bg-black/70 px-2 py-1 text-white text-xs rounded z-50",children:"Loading miners..."}),e.map((e,t)=>{console.log(`Processing miner for display: ID=${e.id}, Type=${e.minerType}, Position=(${e.x},${e.y})`);let n=L.find(t=>t.x===Number(e.x)&&t.y===Number(e.y));if(!n)return console.warn(`⚠️ No grid position found for miner at (${e.x}, ${e.y}) - valid positions are (0,0), (0,1), (1,0), (1,1)`),null;let r=e.image||nj[e.minerType]?.image||"/banana-miner.gif";return console.log(`Using image for miner: ${r}`),console.log(`✅ Rendering miner at position (${e.x}, ${e.y}) with grid position:`,n),(0,s.jsx)("div",{className:"absolute pointer-events-none z-20",style:{top:n.top,left:n.left,width:n.width,height:n.height,transform:"skew(-24deg, 14deg)"},children:(0,s.jsxs)("div",{className:"relative w-full h-full",children:[(0,s.jsx)(l.default,{src:r,alt:`${nj[e.minerType]?.name||"Miner"} at (${e.x},${e.y})`,fill:!0,className:`object-contain miner-pulse ${k?"mobile-miner":""}`,style:{transform:`skew(24deg, -14deg) scale(${k?"1.4":"1.6"}) translate(0%, 0%)`,imageRendering:"pixelated"}}),f&&(0,s.jsx)("div",{className:"absolute top-0 left-0 text-xs text-white bg-black/70 px-1 rounded",style:{transform:"skew(24deg, -14deg)"},children:nj[e.minerType]?.name||`Miner #${e.id}`})]})},`miner-${t}-${e.id}-${e.x}-${e.y}`)}),f&&L.map(e=>{let n=x?.x===e.x&&x?.y===e.y,r=t(e.x,e.y),a=k?"20%":e.width,i=k?"20%":e.height;return(0,s.jsx)("div",{onClick:()=>F(e.x,e.y),className:`absolute pointer-events-auto transition-all duration-200 cursor-pointer z-10 ${n?"ring-2 ring-[#FFD700]":"hover:ring-2 hover:ring-[#FFD70066]"} ${r?"opacity-70":""} ${k?"mobile-grid-cell":""}`,style:{top:e.top,left:e.left,width:a,height:i,background:n?"rgba(255, 215, 0, 0.3)":"rgba(255, 215, 0, 0.1)",transform:"skew(-24deg, 14deg)",borderRadius:"2px"}},`${e.x}-${e.y}`)})]})})(),!e&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[(0,s.jsx)("p",{className:"font-press-start text-xs text-[#FFD700] mb-6",children:"You don't have any mining space yet."}),(0,s.jsx)("button",{onClick:n,disabled:o,className:"bigcoin-button",children:o?"PURCHASING...":"PURCHASE FACILITY"})]})]}),!M&&(0,s.jsx)(af,{isOpen:v,onClose:()=>N(!1),onClaim:O,selectedTile:x,isProcessing:c})]})}n(41968);let ab=({minedBit:e,onClaimRewards:t,isClaimingReward:n,miningRate:r})=>{let a=isNaN(parseFloat(e))?0:parseFloat(e),o=a>0,[l,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)(a),[m,f]=(0,i.useState)(!1),{writeContract:p,isPending:h,isSuccess:g,error:x}=b();(0,i.useEffect)(()=>{if(u>0&&0===a&&!n&&!m){c(!0);let e=setTimeout(()=>c(!1),3e3);return()=>clearTimeout(e)}d(a)},[a,n,u,m]),(0,i.useEffect)(()=>{if(g&&m){console.log("Claim transaction successful!"),c(!0);let e=setTimeout(()=>{c(!1),f(!1)},3e3);return()=>clearTimeout(e)}x&&m&&(console.error("Claim transaction failed:",x),f(!1))},[g,x,m]);let y=async()=>{if(!n&&!h&&!m&&o)try{console.log("Calling claimRewards contract function directly..."),f(!0),p({address:nE.QX.MAIN,abi:[{inputs:[],name:"claimRewards",outputs:[],stateMutability:"nonpayable",type:"function"}],functionName:"claimRewards"}),t().catch(e=>{console.log("Secondary claim method failed (this is normal):",e)})}catch(e){console.error("Error claiming rewards:",e),f(!1)}},v=n||h||m;return(0,s.jsxs)("div",{className:"relative p-4 bg-dark-blue border-2 border-banana rounded-lg text-center font-press-start overflow-hidden",children:[l&&(0,s.jsx)("div",{className:"absolute inset-0 bg-banana bg-opacity-20 flex items-center justify-center z-10 animate-fade-out",children:(0,s.jsx)("div",{className:"bg-royal bg-opacity-90 px-4 py-2 rounded-lg border border-banana success-animation",children:(0,s.jsx)("span",{className:"text-banana text-lg",children:"CLAIM SUCCESSFUL!"})})}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h3",{className:"text-banana text-base mb-2",children:"MINING REWARDS"}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{className:"text-white text-sm",children:"YOU HAVE MINED"}),(0,s.jsx)("span",{className:`text-banana font-bold ${o?"text-xl animate-pulse-custom":"text-lg"}`,children:e}),(0,s.jsx)("span",{className:"text-white text-sm",children:"BIT"})]}),r&&(0,s.jsxs)("div",{className:"text-white text-xs mt-2 opacity-75 flex items-center justify-center",children:[(0,s.jsx)("span",{className:"mining-icon mr-1",children:"⛏️"})," Mining ",r," BIT per day"]})]}),(0,s.jsxs)("button",{onClick:y,disabled:v||a<=0,className:`w-full py-2 px-3 text-sm border-2 transition-all duration-200 ${o&&!v?"bg-banana text-royal hover:bg-opacity-90 border-royal relative overflow-hidden":"bg-dark-blue text-banana border-banana opacity-60"}`,children:[v?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-banana",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"CLAIMING..."]}):(0,s.jsx)("span",{className:"relative z-10",children:"CLAIM MINED BIT"}),o&&!v&&(0,s.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,s.jsx)("div",{className:"shine-effect"})})]}),x&&(0,s.jsxs)("p",{className:"text-red-500 text-xs mt-2",children:["Error: ",x.message||"Transaction failed"]}),!o&&!v&&(0,s.jsx)("p",{className:"text-white text-xs mt-2 opacity-70",children:"Keep mining to earn rewards"})]})},ag=({isOpen:e,onClose:t,onPurchase:n,isPurchasing:r})=>e?(0,s.jsxs)(ao,{open:e,onClose:t,className:"relative z-50",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/70","aria-hidden":"true"}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,s.jsxs)(ao.Panel,{className:"relative bg-royal border-2 border-banana p-6 max-w-lg w-full m-4",children:[(0,s.jsx)(ao.Title,{className:"font-press-start text-xl text-banana mb-4 text-center",children:"UPGRADE SPACE"}),(0,s.jsx)("div",{className:"bg-[#0a3049] p-4 mb-6",children:(0,s.jsx)("p",{className:"font-press-start text-white text-sm text-center",children:"UPGRADE YOUR SPACE TO INCREASE POWER OUTPUT AND SPACE CAPACITY"})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{className:"bg-[#0a3049] p-4",children:[(0,s.jsx)("h3",{className:"font-press-start text-banana text-sm mb-3 text-center",children:"CURRENT SPACE"}),(0,s.jsx)("div",{className:"relative w-32 h-32 mx-auto mb-4",children:(0,s.jsx)(l.default,{src:"/images/facilities/bedroom.png",alt:"Bedroom Mining Setup",fill:!0,className:"object-contain"})}),(0,s.jsxs)("div",{className:"space-y-2 font-press-start text-white text-xs",children:[(0,s.jsx)("p",{children:"YOUR APEROOM"}),(0,s.jsx)("p",{children:"MAX MINERS: 4"}),(0,s.jsx)("p",{children:"POWER: 28 GW"})]})]}),(0,s.jsxs)("div",{className:"bg-[#0a3049] p-4",children:[(0,s.jsx)("h3",{className:"font-press-start text-banana text-sm mb-3 text-center",children:"NEXT SPACE"}),(0,s.jsx)("div",{className:"flex justify-center items-center h-10 my-2",children:(0,s.jsx)("span",{className:"text-yellow-500 text-xl font-bold",children:"➡"})}),(0,s.jsx)("div",{className:"relative w-32 h-32 mx-auto mb-4",children:(0,s.jsx)(l.default,{src:"/images/facilities/treehouse.png",alt:"Treehouse Mining Setup",fill:!0,className:"object-contain"})}),(0,s.jsxs)("div",{className:"space-y-2 font-press-start text-white text-xs",children:[(0,s.jsx)("p",{children:"YOUR TREEHOUSE"}),(0,s.jsx)("p",{children:"MAX MINERS: 8"}),(0,s.jsx)("p",{children:"POWER: 168 GW"})]})]})]}),(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h4",{className:"font-press-start text-banana text-lg mb-1",children:"UPGRADE COST: 70 $BIT"}),(0,s.jsx)("p",{className:"text-red-500 font-press-start text-xs",children:"INSUFFICIENT $BIT BALANCE"})]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-6",children:[(0,s.jsx)("button",{onClick:t,className:"font-press-start px-8 py-2 border-2 border-banana text-banana hover:bg-banana hover:text-royal transition-colors",children:"CANCEL"}),(0,s.jsx)("button",{onClick:n,disabled:r||!0,className:"font-press-start px-8 py-2 bg-[#444444] text-[#888888] transition-colors disabled:opacity-50",children:"UPGRADE NOW"})]})]})})]}):null,ax=`
  .miner-purchase-modal {
    max-height: 90vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
`,ay=({isOpen:e,onClose:t,onPurchase:n,selectedTile:r,isPurchasing:a,bitBalance:o,hasClaimedStarterMiner:c})=>{let u=c?nA.MONKEY_TOASTER:nA.BANANA_MINER,[d,m]=(0,i.useState)(u),[f,p]=(0,i.useState)("initial"),[h,b]=(0,i.useState)(null);nS();let g=parseFloat(o),x=nj[d],y=x.price<=g,v=d===nA.BANANA_MINER&&0===x.price,N=v&&!c,w=r&&(y||N),E={[nA.BANANA_MINER]:{name:"BANANA MINER",index:nA.BANANA_MINER},[nA.MONKEY_TOASTER]:{name:"MONKEY TOASTER",index:nA.MONKEY_TOASTER},[nA.GORILLA_GADGET]:{name:"GORILLA GADGET",index:nA.GORILLA_GADGET},[nA.APEPAD_MINI]:{name:"APEPAD MINI",index:nA.APEPAD_MINI}},A=[nA.BANANA_MINER,nA.MONKEY_TOASTER,nA.GORILLA_GADGET,nA.APEPAD_MINI].map(e=>nj[e]).filter(e=>e.isActive),j=async()=>{if(b(null),console.log("handlePurchase called with: ",{selectedTile:r,isPurchasing:a,canPurchase:w,selectedMiner:d,minerIndex:d,minerIndexValue:Number(d),minerName:nj[d].name}),console.log("Miner index mapping information:",{BANANA_MINER:nA.BANANA_MINER,MONKEY_TOASTER:nA.MONKEY_TOASTER,GORILLA_GADGET:nA.GORILLA_GADGET,APEPAD_MINI:nA.APEPAD_MINI}),!r||a||!w)return void console.log("Purchase aborted because:",{noSelectedTile:!r,isPurchasing:a,cannotPurchase:!w});try{p("approving");let e=Number(r.x),t=Number(r.y);console.log(`Initiating purchase of miner index ${d} (${nj[d].name}) at position (${e}, ${t})`),console.log(`Expected contract calldata will contain: minerIndex=${d}, x=${e}, y=${t}`);try{await n(d,e,t),p("success"),console.log("Purchase transaction submitted successfully")}catch(t){let e=t instanceof Error?t.message:"Unknown error occurred";b(e),console.error("Purchase transaction failed:",e),p("initial")}}catch(t){let e=t instanceof Error?t.message:"Unknown error";b(e),console.error("Error during miner purchase:",e),p("initial")}};(0,i.useEffect)(()=>{e||p("initial")},[e]),(0,i.useEffect)(()=>{c&&d===nA.BANANA_MINER&&m(nA.MONKEY_TOASTER)},[e,c,d]),(0,i.useEffect)(()=>{e&&console.log("MinerPurchaseModal state:",{selectedMiner:d,purchaseStage:f,isPurchasing:a,bitBalance:o,canAfford:y,isFreeMiner:v,canGetFreeMiner:N,canPurchase:w,selectedTile:r})},[e,d,f,a,o,y,v,N,w,r]);let S=()=>{};return e?(0,s.jsxs)(ao,{open:e,onClose:"success"===f?S:t,className:"relative z-50",children:[(0,s.jsx)(nR(),{id:ax.__hash,children:ax}),(0,s.jsx)("div",{"aria-hidden":"true",className:"fixed inset-0 bg-black/70"}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:(0,s.jsxs)(ao.Panel,{className:"relative bg-royal border-2 border-banana p-6 max-w-4xl w-full m-4 miner-purchase-modal",children:[(0,s.jsx)(ao.Title,{className:"font-press-start text-2xl text-banana mb-6 text-center",children:"PURCHASE MINER"}),(0,s.jsxs)("div",{className:"bg-dark-blue p-2 mb-4 rounded",children:[(0,s.jsxs)("p",{className:"text-white font-press-start text-xs",children:["SELECTED LOCATION: ",r?`(${r.x}, ${r.y})`:"NONE"]}),(0,s.jsxs)("p",{className:"text-banana font-press-start text-xs mt-1",children:["YOUR BALANCE: ",o," BIT"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)("div",{className:"space-y-2 border-r border-banana pr-3",children:A.map(e=>{let t=d===e.id,n=e.id===nA.BANANA_MINER&&0===e.price,r=n&&c;return(0,s.jsxs)("div",{onClick:()=>!r&&"initial"===f&&m(e.id),className:`bg-dark-blue p-2 flex items-center rounded 
                      ${"initial"===f&&!r?"cursor-pointer":"cursor-not-allowed"}
                      ${t?"border-l-4 border-banana":""}
                      ${r||"initial"!==f?"opacity-50":"hover:bg-dark-blue/80"}`,children:[(0,s.jsx)("div",{className:"w-10 h-10 mr-3 relative",children:(0,s.jsx)(l.default,{src:e.image,alt:e.name,fill:!0,className:"object-contain"})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-banana font-press-start text-xs",children:e.name}),(0,s.jsx)("span",{className:"text-white font-press-start text-xs",children:n?c?"ALREADY CLAIMED":"FREE STARTER":`${e.price} BIT`})]})]},e.id)})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-banana font-press-start mb-3 text-center text-sm",children:x.name}),(0,s.jsx)("div",{className:"w-36 h-36 mx-auto mb-4 relative",children:(0,s.jsx)(l.default,{src:x.image,alt:x.name,fill:!0,className:"object-contain"})}),(0,s.jsxs)("div",{className:"space-y-2 font-press-start text-xs",children:[(0,s.jsxs)("p",{className:"text-white mb-1",children:["- HASH RATE: ",x.hashrate," GH/S"]}),(0,s.jsxs)("p",{className:"text-white mb-1",children:["- PRICE: ",x.price," BIT"]}),(0,s.jsxs)("p",{className:"text-white mb-1",children:["- ENERGY: ",x.energyConsumption," WATT"]}),(0,s.jsxs)("p",{className:"text-white mb-1",children:["- MINER INDEX: ",d," (",E[d].name,")"]}),x.description&&(0,s.jsx)("p",{className:`mt-3 text-center ${v?"text-green-400":"text-yellow-300"}`,children:x.description}),!y&&!N&&(0,s.jsx)("p",{className:"text-red-500 mt-3 text-center",children:"INSUFFICIENT BIT BALANCE"}),"approving"===f&&(0,s.jsx)("p",{className:"text-green-400 mt-3 text-center animate-pulse",children:"APPROVING TOKEN SPEND..."}),"purchasing"===f&&(0,s.jsx)("p",{className:"text-green-400 mt-3 text-center animate-pulse",children:"PURCHASING MINER..."}),"success"===f&&(0,s.jsxs)("div",{className:"mt-3 text-center",children:[(0,s.jsx)("p",{className:"text-green-400 font-press-start text-sm mb-2",children:"MINER PURCHASED SUCCESSFULLY!"}),(0,s.jsx)("p",{className:"text-xs text-gray-300",children:"Your new miner should appear on the grid shortly. If you don't see it, please refresh the page."}),(0,s.jsx)("button",{onClick:S,className:"mt-2 font-press-start text-xs px-4 py-1 bg-banana text-royal hover:bg-opacity-90",children:"REFRESH PAGE"})]}),h&&(0,s.jsxs)("p",{className:"text-red-500 mt-3 text-center break-words",children:["ERROR: ",h]}),w&&"initial"===f&&!v&&(0,s.jsx)("p",{className:"text-xs text-gray-300 mt-3 text-center",children:"When you click BUY, you'll need to approve the transaction. If it's your first time, two wallet prompts may appear: one for token approval and one for the purchase."})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,s.jsx)("button",{onClick:"success"===f?S:t,disabled:"initial"!==f&&"success"!==f,className:`font-press-start px-6 py-2 border-2 border-banana text-banana 
                ${"initial"===f||"success"===f?"hover:bg-banana hover:text-royal":"opacity-50 cursor-not-allowed"} 
                transition-colors`,children:"success"===f?"REFRESH":"CANCEL"}),"success"!==f?(0,s.jsx)("button",{onClick:j,disabled:!w||a||"initial"!==f,title:r?y||N?a?"Transaction in progress":v?"Claim your free starter miner":"Purchase this miner":"Insufficient BIT balance":"Select a tile first",className:`font-press-start px-6 py-2 ${w&&"initial"===f?"bg-banana text-royal hover:bg-opacity-90":"bg-gray-700 text-gray-400 cursor-not-allowed"} transition-colors`,children:a||"initial"!==f?"approving"===f?"APPROVING TOKENS...":"purchasing"===f?"PURCHASING...":"success"===f?"PURCHASED!":"PROCESSING...":v?"CLAIM FREE MINER":`BUY FOR ${x.price} BIT`}):(0,s.jsx)("button",{onClick:S,className:"font-press-start px-6 py-2 bg-banana text-royal hover:bg-opacity-90 transition-colors",children:"REFRESH PAGE"})]}),r&&(0,s.jsxs)("div",{className:"mt-6 text-center text-xs text-white",children:["MINER WILL BE PLACED AT POSITION: X=",r.x,", Y=",r.y]})]})})]}):null},av=({miningRateData:e,hashRateData:t,blocksUntilHalvingData:n,networkShareData:r,totalNetworkHashrateData:a,totalSupplyData:o,burnedBitData:l,currentBitApePerBlockData:c,isMiningRateLoading:u=!1,isHashRateLoading:d=!1,isNetworkShareLoading:m=!1,isTotalNetworkHashrateLoading:f=!1})=>{let[p,h]=(0,i.useState)("SIMPLE"),b=(e,t=2,n="",r=0,a=!1)=>{if(void 0===e)return a?"Loading...":"0";let s=Number(e)/(r>0?10**r:1);return s<1e3&&""===n?`${s.toFixed(0)}${n}`:s>=1e9?`${(s/1e9).toFixed(t)}B${n}`:s>=1e6?`${(s/1e6).toFixed(t)}M${n}`:s>=1e3?`${(s/1e3).toFixed(t)}K${n}`:`${s.toFixed(t)}${n}`},g=b(e,2,"",18,u),x=b(t,0,"",0,d),y=void 0!==n?String(n):"Loading...",v=g;if(("0"===g||"Loading..."===g)&&t&&a&&a>BigInt(0)){let e=Number(t)/Number(a);v=(e*(c?Number(c)/1e18:2.5)*6e3).toFixed(2),console.log(`Estimated mining rate: ${v} BIT/day (based on ${e.toFixed(4)} network share)`)}let N="0.00";if(t&&a&&a>BigInt(0)){let e=Number(t)/Number(a)*100;N=e.toFixed(2),console.log(`Calculated network share: ${e.toFixed(2)}% (hashRate: ${t}, totalNetwork: ${a})`)}else N=((e,t=!1)=>void 0===e?t?"Loading...":"0.00":(Number(e)/100).toFixed(2))(r,m);let w=b(a,0,"",0,f),E=b(c,2,"",18),A=b(o,2,"",18),j=b(l,2,"",18);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex border-b-2 border-banana px-3 py-1",children:[(0,s.jsx)("button",{onClick:()=>h("SIMPLE"),className:`font-press-start text-xs ${"SIMPLE"===p?"text-banana":"text-[#4A5568]"} mr-4`,children:"SIMPLE"}),(0,s.jsx)("button",{onClick:()=>h("PRO"),className:`font-press-start text-xs ${"PRO"===p?"text-banana":"text-[#4A5568]"}`,children:"PRO"})]}),(0,s.jsx)("div",{className:"p-3 space-y-1 font-press-start text-white text-xs",children:"SIMPLE"===p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["- YOU ARE MINING ",(0,s.jsx)("span",{className:"text-banana",children:v})," BIT A DAY"]}),(0,s.jsxs)("p",{children:["- YOUR HASH RATE IS ",(0,s.jsx)("span",{className:"text-banana",children:x})," GH/S"]}),(0,s.jsxs)("p",{children:["- ",(0,s.jsx)("span",{className:"text-banana",children:y})," BLOCKS UNTIL NEXT HALVENING"]}),(0,s.jsxs)("p",{children:["- YOU HAVE ",(0,s.jsxs)("span",{className:"text-banana",children:[N,"%"]})," OF THE TOTAL NETWORK HASH RATE (",(0,s.jsx)("span",{className:"text-banana",children:w})," GH/S)"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["- ",(0,s.jsx)("span",{className:"text-banana",children:E})," TOTAL BIT MINED PER BLOCK"]}),(0,s.jsxs)("p",{children:["- ",(0,s.jsx)("span",{className:"text-banana",children:A})," BIT HAS EVER BEEN MINED"]}),(0,s.jsxs)("p",{children:["- ",(0,s.jsx)("span",{className:"text-banana",children:j})," BIT HAS BEEN BURNED"]})]})})]})};function aN(){(0,d.useParams)(),(0,d.useRouter)();let{address:e,isConnected:t}=(0,m.F)(),n=nI(),{apeBalance:r,bitBalance:a}=(0,nT.n)(),[o,c]=(0,i.useState)("resources"),[f,p]=(0,i.useState)("actions"),[h,g]=(0,i.useState)(!1),[x,y]=(0,i.useState)(!1),[v,N]=(0,i.useState)(!1),[w,E]=(0,i.useState)(!1),[A,j]=(0,i.useState)(!1),[S,I]=(0,i.useState)(!1),[T,C]=(0,i.useState)(null),[R,P]=(0,i.useState)(!1),[M,F]=(0,i.useState)(!1),O=function(){let[e,t]=(0,i.useState)(!1);return e}(),[$,L]=(0,i.useState)("simple"),{writeContract:k}=b(),B=nb(),{data:_}=(0,ng.Q)({address:nE.QX.MAIN,abi:nE.aL,functionName:"getPlayerFacility",args:[e||tG],query:{enabled:!!e}}),{data:D}=(0,ng.Q)({address:nE.QX.MAIN,abi:nE.aL,functionName:"acquiredStarterMiner",args:[e||tG],query:{enabled:!!e}}),[G,U]=(0,i.useState)({}),[H,z]=(0,i.useState)([]),q=(0,i.useCallback)(async t=>{if(console.log(`Fetching data for miner ID: ${t}`),!B)return null;try{let n=await B.readContract({address:nE.QX.MAIN,abi:[{inputs:[{name:"player",type:"address"},{name:"minerId",type:"uint256"}],name:"getPlayerMiner",outputs:[{name:"minerIndex",type:"uint256"},{name:"x",type:"uint256"},{name:"y",type:"uint256"},{name:"id",type:"uint256"},{name:"hashrate",type:"uint256"},{name:"powerConsumption",type:"uint256"},{name:"cost",type:"uint256"},{name:"inProduction",type:"bool"}],stateMutability:"view",type:"function"}],functionName:"getPlayerMiner",args:[e||tG,BigInt(t.toString())]});return console.log(`Data for miner ID ${t}:`,n),n}catch(e){return console.error(`Error fetching miner data for ID ${t}:`,e),null}},[e,B]);(0,i.useCallback)(async()=>{if(e){try{console.log("Attempting to fetch on-chain data for miner ID 1"),await q(1)}catch(e){console.error("Error fetching miner 1:",e)}try{console.log("Attempting to fetch on-chain data for miner ID 11"),await q(11)}catch(e){console.error("Error fetching miner 11:",e)}}},[e,q]);let Y=(0,i.useCallback)(()=>n.miners?n.miners.map(e=>{let t=String(e.id);if(G[t]){let[n,r,a,s,i,o,l,c]=G[t],u=Number(n);console.log(`Mapping contract minerIndex ${n} to frontend type ${u} for miner ID ${t}`),console.log(`Full on-chain data: [${n}, ${r}, ${a}, ${s}, ${i}, ${o}, ${l}, ${c}]`);let d={...e,minerType:u,x:Number(r),y:Number(a),hashrate:Number(i),powerConsumption:Number(o),cost:Number(l),inProduction:!!c};return console.log(`Corrected miner ID ${t} data:`,d),d}return e}).filter(e=>{let t=Number(e.x),n=Number(e.y),r=t<=1&&n<=1;return r||console.warn(`Filtering out miner ID ${e.id} with invalid coordinates (${t}, ${n})`),r}):[],[n.miners,G]),W=(0,i.useCallback)((e,t)=>{if(void 0===e||void 0===t)return null;console.log(`Looking for miner at tile (${e}, ${t})`);let n=Y().find(n=>Number(n.x)===Number(e)&&Number(n.y)===Number(t));return console.log(`Miner found at (${e}, ${t}):`,n),n||null},[Y]);function K(t){return(0,ng.Q)({address:nE.QX.MAIN,abi:[...nE.aL,{inputs:[{name:"player",type:"address"},{name:"minerId",type:"uint256"}],name:"getPlayerMiner",outputs:[{name:"minerIndex",type:"uint256"},{name:"x",type:"uint256"},{name:"y",type:"uint256"},{name:"id",type:"uint256"},{name:"hashrate",type:"uint256"},{name:"powerConsumption",type:"uint256"},{name:"cost",type:"uint256"},{name:"inProduction",type:"bool"}],stateMutability:"view",type:"function"}],functionName:"getPlayerMiner",args:[e||tG,BigInt(t)],query:{enabled:!!e&&!!t}})}let{data:Q}=K("1"),{data:X}=K("11");BigInt(1),BigInt(0),BigInt(0),BigInt(0),BigInt(100),BigInt(1),BigInt(0);let V=_?{level:Number(_[0]),capacity:Number(_[1]),miners:Number(_[2]),power:Number(_[3]),used:Number(_[4]),x:Number(_[5]),y:Number(_[6])}:null,J={level:V?.level||0,miners:V?.miners||0,power:void 0!==V?.power?Number(V.power):0,capacity:void 0!==V?.capacity?Number(V.capacity):0,used:void 0!==V?.used?Number(V.used):0,resources:0,spaces:void 0!==V?.capacity?Number(V.capacity):0};V&&(V.capacity,V.miners),V&&(V.power,V.used);let{data:Z}=(0,ng.Q)({address:nE.QX.MAIN,abi:nE.aL,functionName:"initializedStarterFacility",args:[e||tG],query:{enabled:!!e}}),ee=!!Z,{data:et}=(0,ng.Q)({address:nE.QX.MAIN,abi:[...nE.aL,{inputs:[{name:"player",type:"address"},{name:"x",type:"uint256"},{name:"y",type:"uint256"}],name:"playerOccupiedCoords",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"}],functionName:"playerOccupiedCoords",args:[e||tG,BigInt(1),BigInt(0)],query:{enabled:!!e}}),[en,er]=(0,i.useState)([]),ea=(0,i.useCallback)((e,t)=>{0===e&&0===t&&console.log("Special check for starter miner at position (0,0)");let n=Y().some(n=>Number(n.x)===Number(e)&&Number(n.y)===Number(t));return console.log(`Has miner at (${e},${t}): ${n}`),n},[e,Y]),{data:es,isLoading:ei}=(0,ng.Q)({address:nE.QX.MAIN,abi:[...nE.aL,{inputs:[{name:"player",type:"address"}],name:"getPlayerBitPerDay",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getPlayerBitPerDay",args:[e||tG],query:{enabled:!!e,refetchInterval:3e4}}),{data:eo,isLoading:el}=(0,ng.Q)({address:nE.QX.MAIN,abi:[...nE.aL,{inputs:[{name:"player",type:"address"}],name:"playerHashrate",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"playerHashrate",args:[e||tG],query:{enabled:!!e,refetchInterval:3e4}}),{data:ec}=(0,ng.Q)({address:nE.QX.MAIN,abi:[...nE.aL,{inputs:[],name:"getBlocksUntilNextHalving",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getBlocksUntilNextHalving",args:[],query:{enabled:!!e}}),{data:eu,isLoading:ed}=(0,ng.Q)({address:nE.QX.MAIN,abi:[...nE.aL,{inputs:[{name:"player",type:"address"}],name:"getPlayerShareOfNetwork",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getPlayerShareOfNetwork",args:[e||tG],query:{enabled:!!e}}),{data:em,isLoading:ef}=(0,ng.Q)({address:nE.QX.MAIN,abi:[...nE.aL,{inputs:[],name:"getCurrentHashrate",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getCurrentHashrate",args:[],query:{enabled:!!e}}),{data:ep}=(0,ng.Q)({address:nE.QX.MAIN,abi:[...nE.aL,{inputs:[],name:"getCurrentBitApePerBlock",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getCurrentBitApePerBlock",args:[],query:{enabled:!!e}}),{data:eh}=(0,ng.Q)({address:nE.QX.BIT_TOKEN,abi:[{inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"totalSupply",args:[],query:{enabled:!!e}}),{data:eb}=(0,ng.Q)({address:nE.QX.BIT_TOKEN,abi:[{inputs:[],name:"amtBurned",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"amtBurned",args:[],query:{enabled:!!e}}),{data:eg,isLoading:ex,refetch:ey}=(0,ng.Q)({address:nE.QX.MAIN,abi:[...nE.aL,{inputs:[{name:"player",type:"address"}],name:"getCurrentRewards",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getCurrentRewards",args:[e||tG],query:{enabled:!!e,refetchInterval:3e4}}),ev=(e,t=2,n="",r=0)=>{if(void 0===e)return"Loading...";let a=Number(e)/(r>0?10**r:1);return a>=1e9?`${(a/1e9).toFixed(t)}B${n}`:a>=1e6?`${(a/1e6).toFixed(t)}M${n}`:a>=1e3?`${(a/1e3).toFixed(t)}K${n}`:`${a.toFixed(t)}${n}`},eN=ex?"Loading...":ev(eg,4,"",18),ew=(()=>{if(eo&&em&&em>BigInt(0)&&(!es||es===BigInt(0))){let e=Number(eo)/Number(em),t=2.5*e*6e3;return console.log(`Estimated mining rate: ${t.toFixed(2)} BIT/day (based on ${e.toFixed(4)} network share)`),t.toFixed(2)}return null})()||ev(es,2,"",18),eE=async()=>{try{console.log("Claiming rewards..."),await n.claimReward(),setTimeout(()=>{console.log("Refetching rewards after claim"),ey()},5e3)}catch(e){console.error("Error claiming rewards:",e)}},eA=e=>({[nA.BANANA_MINER]:"BANANA MINER",[nA.MONKEY_TOASTER]:"MONKEY TOASTER",[nA.GORILLA_GADGET]:"GORILLA GADGET",[nA.APEPAD_MINI]:"APEPAD MINI"})[e]||"UNKNOWN",ej=e=>({[nA.BANANA_MINER]:"100",[nA.MONKEY_TOASTER]:"1000",[nA.GORILLA_GADGET]:"750",[nA.APEPAD_MINI]:"2000"})[e]||"0",eS=e=>({[nA.BANANA_MINER]:"100",[nA.MONKEY_TOASTER]:"1000",[nA.GORILLA_GADGET]:"750",[nA.APEPAD_MINI]:"2000"})[e]||"0",eI=e=>({[nA.BANANA_MINER]:"1",[nA.GORILLA_GADGET]:"5",[nA.MONKEY_TOASTER]:"10",[nA.APEPAD_MINI]:"100"})[e]||"0";if(!t||!e)return null;let eT=e=>0===e.x&&0===e.y?"NEAR BED":1===e.x&&0===e.y?"NEAR BANANA BOXES":0===e.x&&1===e.y?"NEAR JUKEBOX":1===e.x&&1===e.y?"NEAR CONTROL PANEL":"UNKNOWN LOCATION",eC=(e,t)=>{console.log(`Tile selected at (${e}, ${t})`);let n=T&&T.x===e&&T.y===t;C({x:e,y:t}),n&&"selectedTile"===o||c("selectedTile");let r=ea(e,t);console.log(`Tile has miner: ${r}`),setTimeout(()=>{(T?.x!==e||T?.y!==t)&&(console.log("Forcing tile selection update"),C({x:e,y:t}))},100)},eR=async()=>(g(!0),Promise.resolve()),eP=async()=>{E(!0)},eM=async(e,t,r)=>{T&&(await n.purchaseMiner(e,t,r),P(!1))},eF=()=>{F(!M)},eO=async()=>{let e=T||{x:0,y:0};console.log("Claiming starter miner at position:",e);try{await n.getStarterMiner(e.x,e.y),console.log("Starter miner claimed successfully"),n.refetch&&(console.log("Refreshing game state after claiming miner"),await n.refetch());let t={id:n.miners?.length?n.miners.length:0,minerType:nA.BANANA_MINER,x:e.x,y:e.y};console.log("Created new miner object:",t),g(!1);let r=ea(e.x,e.y);console.log(`Tile has miner after claiming: ${r}`),C({...e}),c("selectedTile"),setTimeout(()=>{console.log("Delayed check for miner presence");let t=ea(e.x,e.y);console.log(`Tile has miner after delay: ${t}`),C({...e})},2e3)}catch(e){console.error("Error claiming starter miner:",e)}};return O?(0,s.jsxs)("div",{className:"h-screen flex flex-col grid-background overflow-hidden",children:[(0,s.jsxs)("div",{className:"md:hidden mobile-dashboard",children:[(0,s.jsxs)("div",{className:"mobile-dashboard-header",children:[(0,s.jsx)(u(),{href:"/",children:(0,s.jsx)(l.default,{src:"/bitape.png",alt:"BitApe Logo",width:40,height:40,className:"hover:opacity-80 transition-opacity",priority:!0})}),(0,s.jsx)("button",{onClick:()=>y(!0),className:"bigcoin-button",children:"PROFILE"})]}),(0,s.jsxs)("div",{className:"mobile-dashboard-content pb-24",children:[(()=>{switch(f){case"actions":return(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,s.jsx)("button",{className:"bigcoin-button",onClick:()=>E(!0),children:"UPGRADE FACILITY"}),!D&&(0,s.jsx)("button",{className:"bigcoin-button",onClick:()=>j(!0),disabled:n.isGettingStarterMiner,children:n.isGettingStarterMiner?"PROCESSING...":"CLAIM STARTER MINER"}),(0,s.jsx)("button",{className:"bigcoin-button",onClick:()=>I(!0),children:"PURCHASE MINER"})]})});case"stats":return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"APE BALANCE"}),(0,s.jsxs)("span",{className:"bigcoin-value font-press-start",children:[r||"0"," APE"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"BIT BALANCE"}),(0,s.jsxs)("span",{className:"bigcoin-value font-press-start",children:[a||"0"," BIT"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"SPACES LEFT"}),(0,s.jsx)("span",{className:"bigcoin-value font-press-start",children:V?`${V.capacity-V.miners} SPACES`:"0 SPACES"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"GIGAWATTS AVAILABLE"}),(0,s.jsx)("span",{className:"bigcoin-value font-press-start",children:V?`${V.power-V.used} GW`:"0 GW"})]}),(0,s.jsxs)("div",{className:"border-t border-white/20 pt-4 mt-4",children:[(0,s.jsx)("h3",{className:"bigcoin-text mb-2",children:"MINING STATS"}),(0,s.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- MINING ",(0,s.jsx)("span",{className:"text-banana",children:void 0!==es?ev(es,2,"",18):"Loading..."})," BIT/DAY"]}),(0,s.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- HASH RATE: ",(0,s.jsx)("span",{className:"text-banana",children:void 0!==eo?ev(eo,0,""):"Loading..."})," GH/S"]}),(0,s.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- ",(0,s.jsx)("span",{className:"text-banana",children:void 0!==ec?String(ec):"Loading..."})," BLOCKS UNTIL HALVENING"]}),(0,s.jsxs)("p",{className:"font-press-start text-white text-xs",children:["- ",(0,s.jsxs)("span",{className:"text-banana",children:[void 0!==eu?(Number(eu)/100).toFixed(2):"Loading...","%"]})," OF NETWORK (",(0,s.jsx)("span",{className:"text-banana",children:void 0!==em?ev(em,0,""):"Loading..."})," GH/S)"]})]}),(0,s.jsxs)("div",{className:"border-t border-white/20 pt-4 mt-4",children:[(0,s.jsx)("h3",{className:"bigcoin-text mb-2",children:"NETWORK STATS"}),(0,s.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- ",(0,s.jsx)("span",{className:"text-banana",children:void 0!==ep?ev(ep,2,"",18):"Loading..."})," BIT PER BLOCK"]}),(0,s.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- ",(0,s.jsx)("span",{className:"text-banana",children:void 0!==eh?ev(eh,2,"",18):"Loading..."})," TOTAL BIT MINED"]}),(0,s.jsxs)("p",{className:"font-press-start text-white text-xs",children:["- ",(0,s.jsx)("span",{className:"text-banana",children:void 0!==eb?ev(eb,2,"",18):"Loading..."})," BIT BURNED"]})]})]});case"mining":let e=[...n.miners||[]];return 0===e.length&&n.hasClaimedStarterMiner,0===e.length&&n.hasClaimedStarterMiner&&(console.log("No miners found, but starter miner claimed. Adding default at (0,0)"),e.push({id:"0",minerType:nA.BANANA_MINER,x:0,y:0,image:nj[nA.BANANA_MINER].image,hashrate:1,powerConsumption:1,cost:0,inProduction:!0})),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"TOTAL SPACES"}),(0,s.jsx)("span",{className:"bigcoin-value font-press-start",children:V?`${V.capacity} SPACES`:"0 SPACES"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"USED SPACES"}),(0,s.jsx)("span",{className:"bigcoin-value font-press-start",children:V?`${V.miners} SPACES`:"0 SPACES"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"TOTAL GIGAWATTS"}),(0,s.jsx)("span",{className:"bigcoin-value font-press-start",children:V?`${V.power} GW`:"0 GW"})]}),(0,s.jsxs)("div",{className:"border-t border-white/20 pt-3 mb-3",children:[(0,s.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- MINING ",(0,s.jsx)("span",{className:"text-banana",children:void 0!==es?ev(es,2,"",18):"Loading..."})," BIT/DAY"]}),(0,s.jsxs)("p",{className:"font-press-start text-white text-xs mb-1",children:["- HASH RATE: ",(0,s.jsx)("span",{className:"text-banana",children:void 0!==eo?ev(eo,0,""):"Loading..."})," GH/S"]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Your Miners"}),e.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:e.map((e,t)=>(0,s.jsxs)("div",{className:"border border-white/20 p-3 rounded",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-xs",children:["Miner #",e.id]}),(0,s.jsxs)("span",{className:"text-xs",children:["Type: ",eA(e.minerType)]})]}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsxs)("span",{className:"text-xs",children:["Mining rate: ",ej(e.minerType)," BIT/day"]})}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsxs)("span",{className:"text-xs",children:["Position: X:",e.x,", Y:",e.y]})})]},t))}):(0,s.jsx)("div",{className:"text-center py-4 text-sm",children:"No miners yet"})]})]});default:return null}})(),(0,s.jsx)("div",{className:"bigcoin-panel",children:(0,s.jsx)(ah,{hasFacility:ee,facilityData:J,onPurchaseFacility:eR,onGetStarterMiner:eO,onUpgradeFacility:eP,onPurchaseMiner:n.purchaseMiner,isPurchasingFacility:n.isPurchasingFacility,isGettingStarterMiner:n.isGettingStarterMiner,isUpgradingFacility:n.isUpgradingFacility,onTileSelect:eC,address:e,isGridMode:M,toggleGridMode:eF,hasClaimedStarterMiner:n.hasClaimedStarterMiner,miners:Y().map(e=>{let t=e.minerType;nA.BANANA_MINER;let n=nj[t]?.image||"/banana-miner.gif";return console.log(`Miner ID ${e.id}: Contract type ${t}, Frontend type ${t}, Image ${n}`),{id:e.id,minerType:t,x:Number(e.x),y:Number(e.y),image:n,hashrate:e.hashrate,powerConsumption:e.powerConsumption,inProduction:e.inProduction}}),selectedTileHasMiner:(e,t)=>ea(e,t),getMinerAtTile:(e,t)=>{let n=W(e,t);if(!n)return null;let r=n.minerType;nA.BANANA_MINER;let a=nj[r]?.image||"/banana-miner.gif";return{id:n.id,minerType:r,x:Number(n.x),y:Number(n.y),image:a,hashrate:n.hashrate,powerConsumption:n.powerConsumption,inProduction:n.inProduction}}})})]}),(0,s.jsxs)("div",{className:"mobile-dashboard-footer",children:[(0,s.jsx)("button",{className:`mobile-dashboard-tab ${"actions"===f?"active":""}`,onClick:()=>p("actions"),children:"ACTIONS"}),(0,s.jsx)("button",{className:`mobile-dashboard-tab ${"stats"===f?"active":""}`,onClick:()=>p("stats"),children:"STATS"}),(0,s.jsx)("button",{className:`mobile-dashboard-tab ${"mining"===f?"active":""}`,onClick:()=>p("mining"),children:"MINING"})]})]}),(0,s.jsxs)("div",{className:"hidden md:flex flex-col h-screen bg-royal overflow-hidden",children:[(0,s.jsxs)("header",{className:"nav-bar flex justify-between items-center px-4 py-2",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(u(),{href:"/",children:(0,s.jsx)(l.default,{src:"/bitape.png",alt:"BitApe Logo",width:64,height:64,className:"hover:opacity-80 transition-opacity",priority:!0})})}),(0,s.jsxs)("nav",{className:"flex items-center gap-2",children:[(0,s.jsx)(u(),{href:"/about",className:"font-press-start text-sm text-white hover:text-banana",children:"ABOUT"}),(0,s.jsx)(u(),{href:"/trade",className:"font-press-start text-sm text-white hover:text-banana",children:"TRADE $BIT"}),(0,s.jsx)(u(),{href:"/leaderboard",className:"font-press-start text-sm text-[#4A5568] hover:text-banana",children:"LEADERBOARD"}),(0,s.jsx)("button",{className:"font-press-start text-sm text-banana border-2 border-banana px-3 py-1 hover:bg-banana hover:text-royal pixel-button",children:"ANNOUNCEMENTS"}),(0,s.jsx)("button",{onClick:()=>N(!0),className:"font-press-start text-sm text-banana border-2 border-banana px-3 py-1 hover:bg-banana hover:text-royal pixel-button",children:"REFER A FRIEND"}),(0,s.jsx)("button",{onClick:()=>y(!0),className:"font-press-start text-sm text-banana border-2 border-banana px-3 py-1 hover:bg-banana hover:text-royal pixel-button",children:"PROFILE"})]})]}),(0,s.jsxs)("div",{className:"flex-grow grid grid-cols-12 gap-2 p-2 max-h-[calc(100vh-56px)] overflow-hidden",children:[(0,s.jsxs)("div",{className:"col-span-4 flex flex-col gap-2 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"bg-royal border-2 border-banana rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex border-b-2 border-banana",children:[(0,s.jsx)("button",{className:`px-3 py-1 flex-1 font-press-start text-xs ${"resources"===o?"bg-banana text-royal":"text-banana"}`,onClick:()=>c("resources"),children:"RESOURCES"}),(0,s.jsx)("button",{className:`px-3 py-1 flex-1 font-press-start text-xs ${"space"===o?"bg-banana text-royal":"text-banana"}`,onClick:()=>c("space"),children:"SPACE"}),(0,s.jsx)("button",{className:`px-3 py-1 flex-1 font-press-start text-xs ${"selectedTile"===o?"bg-banana text-royal":"text-banana"}`,onClick:()=>c("selectedTile"),children:"SELECTED TILE"})]}),(()=>{if(!n.hasFacility&&!ee)return(0,s.jsxs)("div",{className:"text-center p-4",children:[(0,s.jsx)("p",{className:"bigcoin-text",children:"Purchase a facility to view details"}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("button",{onClick:()=>g(!0),className:"bigcoin-button",children:"BUY FACILITY"})})]});switch(o){case"resources":return(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"APE BALANCE"}),(0,s.jsxs)("span",{className:"bigcoin-value font-press-start",children:[r||"0"," APE"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"BIT BALANCE"}),(0,s.jsxs)("span",{className:"bigcoin-value font-press-start",children:[a||"0"," BIT"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"SPACES LEFT"}),(0,s.jsx)("span",{className:"bigcoin-value font-press-start",children:V?`${V.capacity-V.miners} SPACES`:"0 SPACES"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"GIGAWATTS AVAILABLE"}),(0,s.jsx)("span",{className:"bigcoin-value font-press-start",children:V?`${V.power-V.used} GW`:"0 GW"})]})]});case"space":return(0,s.jsxs)("div",{className:"p-3 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center border-b border-white/20 pb-2",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"YOUR MINING ROOM"}),(0,s.jsx)("span",{className:"bigcoin-value font-press-start",children:"1"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center border-b border-white/20 pb-2",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"TOTAL SPACES"}),(0,s.jsx)("span",{className:"bigcoin-value font-press-start",children:V?`${V.capacity} SPACES`:"0 SPACES"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center border-b border-white/20 pb-2",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"USED SPACES"}),(0,s.jsx)("span",{className:"bigcoin-value font-press-start",children:V?`${V.miners} SPACES`:"0 SPACES"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center pb-2",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"TOTAL GIGAWATTS"}),(0,s.jsx)("span",{className:"bigcoin-value font-press-start",children:V?`${V.power} GW`:"0 GW"})]}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("button",{onClick:()=>E(!0),className:"w-full bigcoin-button",children:"UPGRADE FACILITY"})})]});case"selectedTile":return(0,s.jsx)("div",{className:"p-3 space-y-2",children:T?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"border-b border-white/20 pb-2 mb-3",children:[(0,s.jsx)("span",{className:"bigcoin-text",children:"LOCATION:"}),(0,s.jsx)("span",{className:"bigcoin-value block mt-1",children:eT(T)}),(0,s.jsxs)("span",{className:"bigcoin-text text-xs mt-1",children:["POSITION: X: ",T.x,", Y: ",T.y]})]}),(()=>{let e=W(T.x,T.y);if(console.log("Miner found by getMinerAtTile:",e),!e)return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-center text-sm py-4",children:"No miner at this location."}),ee&&V&&Number(V.miners)<Number(V.capacity)&&(0,s.jsx)("button",{onClick:()=>P(!0),className:"w-full bigcoin-button",children:"PLACE MINER HERE"})]});{let t=void 0!==e.minerType?Number(e.minerType):void 0!==e.type?Number(e.type):0,n=nj[t],r=n?.image||"/banana-miner.gif",a=n?.name||eA(t);return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("p",{className:"bigcoin-text",children:"MINER DETAILS:"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-16 h-16 relative",children:(0,s.jsx)(l.default,{src:r,alt:a,fill:!0,className:"object-contain"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"bigcoin-value",children:a}),(0,s.jsxs)("p",{className:"bigcoin-text text-xs opacity-80",children:["HASH RATE: ",eS(t)," GH/s"]}),(0,s.jsxs)("p",{className:"bigcoin-text text-xs opacity-80",children:["ENERGY: ",eI(t)," WATTS"]})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{onClick:()=>P(!0),className:"w-full bigcoin-button",children:"UPGRADE MINER"})})]})}})()]}):(0,s.jsx)("div",{className:"text-center py-4",children:(0,s.jsx)("p",{className:"text-sm",children:"Click a tile to select it"})})});default:return(0,s.jsx)("div",{children:"Select a tab"})}})()]}),(0,s.jsx)("div",{className:"bg-royal border-2 border-banana rounded-lg overflow-hidden",children:(0,s.jsx)(av,{miningRateData:es,hashRateData:eo,blocksUntilHalvingData:ec,networkShareData:eu,totalNetworkHashrateData:em,totalSupplyData:eh,burnedBitData:eb,currentBitApePerBlockData:ep,isMiningRateLoading:ei,isHashRateLoading:el,isNetworkShareLoading:ed,isTotalNetworkHashrateLoading:ef})}),(0,s.jsx)("div",{className:"bg-royal border-2 border-banana rounded-lg overflow-hidden",children:(0,s.jsx)(ab,{minedBit:eN,onClaimRewards:eE,isClaimingReward:n.isClaimingReward,miningRate:ew})})]}),(0,s.jsx)("div",{className:"col-span-8 flex flex-col items-center justify-center",children:(0,s.jsx)("div",{className:"relative w-[700px] h-[700px] border border-banana overflow-hidden p-1.5",children:(0,s.jsx)(ah,{hasFacility:ee,facilityData:J,onPurchaseFacility:eR,onGetStarterMiner:eO,onUpgradeFacility:eP,onPurchaseMiner:n.purchaseMiner,isPurchasingFacility:n.isPurchasingFacility,isGettingStarterMiner:n.isGettingStarterMiner,isUpgradingFacility:n.isUpgradingFacility,onTileSelect:eC,address:e,isGridMode:M,toggleGridMode:eF,hasClaimedStarterMiner:n.hasClaimedStarterMiner,miners:Y().map(e=>{let t=e.minerType;nA.BANANA_MINER;let n=nj[t]?.image||"/banana-miner.gif";return console.log(`Miner ID ${e.id}: Contract type ${t}, Frontend type ${t}, Image ${n}`),{id:e.id,minerType:t,x:Number(e.x),y:Number(e.y),image:n,hashrate:e.hashrate,powerConsumption:e.powerConsumption,inProduction:e.inProduction}}),selectedTileHasMiner:(e,t)=>ea(e,t),getMinerAtTile:(e,t)=>{let n=W(e,t);if(!n)return null;let r=n.minerType;nA.BANANA_MINER;let a=nj[r]?.image||"/banana-miner.gif";return{id:n.id,minerType:r,x:Number(n.x),y:Number(n.y),image:a,hashrate:n.hashrate,powerConsumption:n.powerConsumption,inProduction:n.inProduction}}})})})]})]}),(0,s.jsx)(ac,{isOpen:h,onClose:()=>g(!1),onConfirm:()=>{g(!1),n.refetch?.()}}),t&&e&&(0,s.jsx)(au.A,{isOpen:x,onClose:()=>y(!1),address:e,apeBalance:r,bitBalance:a}),(0,s.jsx)(ad,{isOpen:v,onClose:()=>N(!1),totalReferrals:n.totalReferrals||0,totalBitEarned:n.totalBitEarned||"0.00"}),(0,s.jsx)(ay,{isOpen:R,onClose:()=>P(!1),onPurchase:eM,selectedTile:T||void 0,isPurchasing:n.isPurchasingMiner,bitBalance:a,hasClaimedStarterMiner:n.hasClaimedStarterMiner}),(0,s.jsx)(ag,{isOpen:w,onClose:()=>E(!1),onPurchase:()=>{E(!1),n.upgradeFacility()},isPurchasing:n.isUpgradingFacility})]}):null}},41204:e=>{"use strict";e.exports=require("string_decoder")},41968:()=>{},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56397:()=>{},58813:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});let r=(0,n(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/alexalaniz/Downloads/bitape-ui/src/app/room/[address]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/alexalaniz/Downloads/bitape-ui/src/app/room/[address]/page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},75913:(e,t,n)=>{"use strict";n(56397);var r=n(43210),a=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r),s="undefined"!=typeof process&&process.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,n=t.name,r=void 0===n?"stylesheet":n,a=t.optimizeForSpeed,o=void 0===a?s:a;l(i(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",l("boolean"==typeof o,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=o,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var t,n=e.prototype;return n.setOptimizeForSpeed=function(e){l("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),l(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},n.isOptimizeForSpeed=function(){return this._optimizeForSpeed},n.inject=function(){var e=this;l(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(t,n){return"number"==typeof n?e._serverSheet.cssRules[n]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),n},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},n.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},n.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},n.insertRule=function(e,t){return l(i(e),"`insertRule` accepts only strings"),"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++},n.replaceRule=function(e,t){this._optimizeForSpeed;var n=this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!n.cssRules[e])return e;n.deleteRule(e);try{n.insertRule(t,e)}catch(r){s||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),n.insertRule(this._deletedRulePlaceholder,e)}return e},n.deleteRule=function(e){this._serverSheet.deleteRule(e)},n.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},n.cssRules=function(){return this._serverSheet.cssRules},n.makeStyleTag=function(e,t,n){t&&l(i(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var a=document.head||document.getElementsByTagName("head")[0];return n?a.insertBefore(r,n):a.appendChild(r),r},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();function l(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0},u={};function d(e,t){if(!t)return"jsx-"+e;var n=String(t),r=e+n;return u[r]||(u[r]="jsx-"+c(e+"-"+n)),u[r]}function m(e,t){var n=e+(t=t.replace(/\/style/gi,"\\/style"));return u[n]||(u[n]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[n]}var f=function(){function e(e){var t=void 0===e?{}:e,n=t.styleSheet,r=void 0===n?null:n,a=t.optimizeForSpeed,s=void 0!==a&&a;this._sheet=r||new o({name:"styled-jsx",optimizeForSpeed:s}),this._sheet.inject(),r&&"boolean"==typeof s&&(this._sheet.setOptimizeForSpeed(s),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed());var n=this.getIdAndRules(e),r=n.styleId,a=n.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var s=a.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=s,this._instancesCounts[r]=1},t.remove=function(e){var t=this,n=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(n in this._instancesCounts,"styleId: `"+n+"` not found"),this._instancesCounts[n]-=1,this._instancesCounts[n]<1){var r=this._fromServer&&this._fromServer[n];r?(r.parentNode.removeChild(r),delete this._fromServer[n]):(this._indices[n].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[n]),delete this._instancesCounts[n]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],n=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return n[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,n;return t=this.cssRules(),void 0===(n=e)&&(n={}),t.map(function(e){var t=e[0],r=e[1];return a.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:n.nonce?n.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},t.getIdAndRules=function(e){var t=e.children,n=e.dynamic,r=e.id;if(n){var a=d(r,n);return{styleId:a,rules:Array.isArray(t)?t.map(function(e){return m(a,e)}):[m(a,t)]}}return{styleId:d(r),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),p=r.createContext(null);p.displayName="StyleSheetContext";a.default.useInsertionEffect||a.default.useLayoutEffect;var h=void 0;function b(e){var t=h||r.useContext(p);return t&&t.add(e),null}b.dynamic=function(e){return e.map(function(e){return d(e[0],e[1])}).join(" ")},t.style=b},76180:(e,t,n)=>{"use strict";e.exports=n(75913).style},77598:e=>{"use strict";e.exports=require("node:crypto")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},90425:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var r=n(64746),a=n(55925);function s(e,t){if(!(0,a.P)(e,{strict:!1}))throw new r.M({address:e});if(!(0,a.P)(t,{strict:!1}))throw new r.M({address:t});return e.toLowerCase()===t.toLowerCase()}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[435,715,255,920,933,103],()=>n(5886));module.exports=r})();